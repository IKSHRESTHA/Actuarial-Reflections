<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Krishna Kumar Shrestha">
<meta name="dcterms.date" content="2025-07-17">
<meta name="description" content="A comprehensive guide to creating stunning visualizations with ggplot2, featuring custom themes, advanced techniques, and all major plot types with beautiful aesthetics.">

<title>Complete ggplot2 Visualization Guide: Mastering Beautiful Data Plots – Actuarial-Reflections</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-a986a95301e671fce2c6472dffc862a1.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-LSZ7YTNKVY"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-LSZ7YTNKVY', { 'anonymize_ip': true});
</script>
<link href="../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../site_libs/pagedtable-1.1/js/pagedtable.js"></script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Actuarial-Reflections</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../all-blogs.html"> 
<span class="menu-text">All Blog Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About Me</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/IKSHRESTHA"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/ikshrestha/"> <i class="bi bi-linkedin" role="img" aria-label="LinkedIn">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#complete-ggplot2-visualization-guide-mastering-beautiful-data-plots" id="toc-complete-ggplot2-visualization-guide-mastering-beautiful-data-plots" class="nav-link active" data-scroll-target="#complete-ggplot2-visualization-guide-mastering-beautiful-data-plots">Complete ggplot2 Visualization Guide: Mastering Beautiful Data Plots</a>
  <ul class="collapse">
  <li><a href="#setup-and-custom-theme" id="toc-setup-and-custom-theme" class="nav-link" data-scroll-target="#setup-and-custom-theme">Setup and Custom Theme</a></li>
  <li><a href="#sample-data-generation" id="toc-sample-data-generation" class="nav-link" data-scroll-target="#sample-data-generation">Sample Data Generation</a></li>
  <li><a href="#bar-charts-and-column-charts" id="toc-bar-charts-and-column-charts" class="nav-link" data-scroll-target="#bar-charts-and-column-charts">1. Bar Charts and Column Charts</a></li>
  <li><a href="#line-charts-and-time-series" id="toc-line-charts-and-time-series" class="nav-link" data-scroll-target="#line-charts-and-time-series">2. Line Charts and Time Series</a></li>
  <li><a href="#scatter-plots-and-correlation-analysis" id="toc-scatter-plots-and-correlation-analysis" class="nav-link" data-scroll-target="#scatter-plots-and-correlation-analysis">3. Scatter Plots and Correlation Analysis</a></li>
  <li><a href="#histograms-and-density-plots" id="toc-histograms-and-density-plots" class="nav-link" data-scroll-target="#histograms-and-density-plots">4. Histograms and Density Plots</a></li>
  <li><a href="#box-plots-and-violin-plots" id="toc-box-plots-and-violin-plots" class="nav-link" data-scroll-target="#box-plots-and-violin-plots">5. Box Plots and Violin Plots</a></li>
  <li><a href="#heatmaps-and-correlation-matrices" id="toc-heatmaps-and-correlation-matrices" class="nav-link" data-scroll-target="#heatmaps-and-correlation-matrices">6. Heatmaps and Correlation Matrices</a></li>
  <li><a href="#pie-charts-and-donut-charts" id="toc-pie-charts-and-donut-charts" class="nav-link" data-scroll-target="#pie-charts-and-donut-charts">7. Pie Charts and Donut Charts</a></li>
  <li><a href="#advanced-plots-ridgeline-and-waterfall" id="toc-advanced-plots-ridgeline-and-waterfall" class="nav-link" data-scroll-target="#advanced-plots-ridgeline-and-waterfall">8. Advanced Plots: Ridgeline and Waterfall</a></li>
  <li><a href="#faceting-and-small-multiples" id="toc-faceting-and-small-multiples" class="nav-link" data-scroll-target="#faceting-and-small-multiples">9. Faceting and Small Multiples</a></li>
  <li><a href="#interactive-elements-and-annotations" id="toc-interactive-elements-and-annotations" class="nav-link" data-scroll-target="#interactive-elements-and-annotations">10. Interactive Elements and Annotations</a></li>
  <li><a href="#area-charts-and-stacked-plots" id="toc-area-charts-and-stacked-plots" class="nav-link" data-scroll-target="#area-charts-and-stacked-plots">11. Area Charts and Stacked Plots</a></li>
  <li><a href="#polar-and-radar-charts" id="toc-polar-and-radar-charts" class="nav-link" data-scroll-target="#polar-and-radar-charts">12. Polar and Radar Charts</a></li>
  <li><a href="#statistical-plots" id="toc-statistical-plots" class="nav-link" data-scroll-target="#statistical-plots">13. Statistical Plots</a></li>
  <li><a href="#network-and-flow-diagrams" id="toc-network-and-flow-diagrams" class="nav-link" data-scroll-target="#network-and-flow-diagrams">14. Network and Flow Diagrams</a></li>
  <li><a href="#advanced-distribution-plots" id="toc-advanced-distribution-plots" class="nav-link" data-scroll-target="#advanced-distribution-plots">15. Advanced Distribution Plots</a></li>
  <li><a href="#specialized-business-plots" id="toc-specialized-business-plots" class="nav-link" data-scroll-target="#specialized-business-plots">16. Specialized Business Plots</a></li>
  <li><a href="#tree-maps-and-hierarchical-plots" id="toc-tree-maps-and-hierarchical-plots" class="nav-link" data-scroll-target="#tree-maps-and-hierarchical-plots">17. Tree Maps and Hierarchical Plots</a></li>
  <li><a href="#time-series-decomposition-and-calendar-plots" id="toc-time-series-decomposition-and-calendar-plots" class="nav-link" data-scroll-target="#time-series-decomposition-and-calendar-plots">18. Time Series Decomposition and Calendar Plots</a></li>
  <li><a href="#d-style-and-perspective-plots" id="toc-d-style-and-perspective-plots" class="nav-link" data-scroll-target="#d-style-and-perspective-plots">19. 3D-Style and Perspective Plots</a></li>
  <li><a href="#animated-style-and-motion-plots" id="toc-animated-style-and-motion-plots" class="nav-link" data-scroll-target="#animated-style-and-motion-plots">20. Animated-Style and Motion Plots</a></li>
  <li><a href="#mathematical-and-scientific-plots" id="toc-mathematical-and-scientific-plots" class="nav-link" data-scroll-target="#mathematical-and-scientific-plots">21. Mathematical and Scientific Plots</a></li>
  <li><a href="#geographic-and-spatial-plots" id="toc-geographic-and-spatial-plots" class="nav-link" data-scroll-target="#geographic-and-spatial-plots">22. Geographic and Spatial Plots</a></li>
  <li><a href="#advanced-statistical-and-ml-plots" id="toc-advanced-statistical-and-ml-plots" class="nav-link" data-scroll-target="#advanced-statistical-and-ml-plots">23. Advanced Statistical and ML Plots</a></li>
  <li><a href="#financial-and-economic-plots" id="toc-financial-and-economic-plots" class="nav-link" data-scroll-target="#financial-and-economic-plots">24. Financial and Economic Plots</a></li>
  <li><a href="#artistic-and-creative-visualizations" id="toc-artistic-and-creative-visualizations" class="nav-link" data-scroll-target="#artistic-and-creative-visualizations">25. Artistic and Creative Visualizations</a></li>
  <li><a href="#interactive-style-and-dashboard-elements" id="toc-interactive-style-and-dashboard-elements" class="nav-link" data-scroll-target="#interactive-style-and-dashboard-elements">26. Interactive-Style and Dashboard Elements</a></li>
  <li><a href="#conclusion-best-practices-for-beautiful-ggplot2-visualizations" id="toc-conclusion-best-practices-for-beautiful-ggplot2-visualizations" class="nav-link" data-scroll-target="#conclusion-best-practices-for-beautiful-ggplot2-visualizations">Conclusion: Best Practices for Beautiful ggplot2 Visualizations</a>
  <ul class="collapse">
  <li><a href="#key-takeaways" id="toc-key-takeaways" class="nav-link" data-scroll-target="#key-takeaways">Key Takeaways:</a></li>
  <li><a href="#advanced-tips" id="toc-advanced-tips" class="nav-link" data-scroll-target="#advanced-tips">Advanced Tips:</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Complete ggplot2 Visualization Guide: Mastering Beautiful Data Plots</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
  <div class="quarto-categories">
    <div class="quarto-category">data visualization</div>
    <div class="quarto-category">ggplot2</div>
    <div class="quarto-category">R</div>
    <div class="quarto-category">data science</div>
  </div>
  </div>

<div>
  <div class="description">
    A comprehensive guide to creating stunning visualizations with ggplot2, featuring custom themes, advanced techniques, and all major plot types with beautiful aesthetics.
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Krishna Kumar Shrestha </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 17, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="complete-ggplot2-visualization-guide-mastering-beautiful-data-plots" class="level1">
<h1>Complete ggplot2 Visualization Guide: Mastering Beautiful Data Plots</h1>
<p>Data visualization is the art of transforming numbers into stories. In this comprehensive guide, we’ll explore the power of ggplot2 to create stunning, publication-ready visualizations that not only convey information effectively but also captivate your audience with their aesthetic appeal.</p>
<section id="setup-and-custom-theme" class="level2">
<h2 class="anchored" data-anchor-id="setup-and-custom-theme">Setup and Custom Theme</h2>
<p>Let’s start by loading the necessary libraries and creating our custom theme that features a clean whitish background, no grid lines, and beautiful typography.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load required libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggtext)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(showtext)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Add Google Fonts</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">font_add_google</span>(<span class="st">"Playfair Display"</span>, <span class="st">"playfair"</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">font_add_google</span>(<span class="st">"Source Sans Pro"</span>, <span class="st">"source"</span>)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">font_add_google</span>(<span class="st">"Fira Code"</span>, <span class="st">"fira"</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">showtext_auto</span>()</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternative fonts for Windows compatibility</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (.Platform<span class="sc">$</span>OS.type <span class="sc">==</span> <span class="st">"windows"</span>) {</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">windowsFonts</span>(</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">playfair =</span> <span class="fu">windowsFont</span>(<span class="st">"Times New Roman"</span>),</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">source =</span> <span class="fu">windowsFont</span>(<span class="st">"Arial"</span>),</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">fira =</span> <span class="fu">windowsFont</span>(<span class="st">"Courier New"</span>)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Custom color palette (expanded to cover 12 months) - Dark &amp; Sophisticated</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>custom_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#16213E"</span>, <span class="st">"#0F3460"</span>, <span class="st">"#533A71"</span>, <span class="st">"#6A0572"</span>, <span class="st">"#AB0E86"</span>, </span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"#E91E63"</span>, <span class="st">"#FF5722"</span>, <span class="st">"#795548"</span>, <span class="st">"#607D8B"</span>, <span class="st">"#455A64"</span>, <span class="st">"#263238"</span>)</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternative dark color palettes for different uses</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>primary_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#16213E"</span>, <span class="st">"#0F3460"</span>, <span class="st">"#533A71"</span>)</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>accent_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#6A0572"</span>, <span class="st">"#AB0E86"</span>, <span class="st">"#E91E63"</span>, <span class="st">"#FF5722"</span>)</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>dark_gradient <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#263238"</span>, <span class="st">"#37474F"</span>, <span class="st">"#455A64"</span>, <span class="st">"#546E7A"</span>, <span class="st">"#607D8B"</span>, <span class="st">"#78909C"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create our custom theme</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>theme_elegant <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">base_size =</span> <span class="dv">14</span>, <span class="at">base_family =</span> <span class="st">"source"</span>) {</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Use fallback fonts on Windows</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  title_family <span class="ot">&lt;-</span> <span class="cf">if</span> (.Platform<span class="sc">$</span>OS.type <span class="sc">==</span> <span class="st">"windows"</span>) <span class="st">"Times New Roman"</span> <span class="cf">else</span> <span class="st">"playfair"</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  body_family <span class="ot">&lt;-</span> <span class="cf">if</span> (.Platform<span class="sc">$</span>OS.type <span class="sc">==</span> <span class="st">"windows"</span>) <span class="st">"Arial"</span> <span class="cf">else</span> <span class="st">"source"</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> base_size, <span class="at">base_family =</span> body_family) <span class="sc">+</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Background</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#FEFEFE"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#FEFEFE"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Remove grid lines</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Axes</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">size =</span> <span class="fl">0.5</span>),</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">0.9</span>)),</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.1</span>), <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Title and subtitle</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">family =</span> title_family, </span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.6</span>), </span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">face =</span> <span class="st">"bold"</span>, </span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"#2C3E50"</span>,</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">20</span>)</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">family =</span> body_family, </span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.1</span>), </span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"#7F8C8D"</span>,</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>        <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">25</span>)</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_text</span>(</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>        <span class="at">family =</span> body_family, </span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">0.8</span>), </span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"#95A5A6"</span>,</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>        <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>        <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">15</span>)</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Legend</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">0.9</span>)),</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="dv">1</span>), <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">"right"</span>,</span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Facets</span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>      <span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#ECF0F1"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>      <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="dv">1</span>)),</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Margins</span></span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>)</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Set as default theme</span></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_elegant</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="sample-data-generation" class="level2">
<h2 class="anchored" data-anchor-id="sample-data-generation">Sample Data Generation</h2>
<p>Let’s create diverse datasets to showcase different types of visualizations:</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Dataset 1: Sales data</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>sales_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">month =</span> <span class="fu">factor</span>(month.abb, <span class="at">levels =</span> month.abb),</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">revenue =</span> <span class="fu">c</span>(<span class="dv">45000</span>, <span class="dv">52000</span>, <span class="dv">48000</span>, <span class="dv">61000</span>, <span class="dv">55000</span>, <span class="dv">67000</span>, </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>              <span class="dv">72000</span>, <span class="dv">69000</span>, <span class="dv">58000</span>, <span class="dv">63000</span>, <span class="dv">71000</span>, <span class="dv">78000</span>),</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">profit =</span> <span class="fu">c</span>(<span class="dv">12000</span>, <span class="dv">15600</span>, <span class="dv">14400</span>, <span class="dv">18300</span>, <span class="dv">16500</span>, <span class="dv">20100</span>,</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>             <span class="dv">21600</span>, <span class="dv">20700</span>, <span class="dv">17400</span>, <span class="dv">18900</span>, <span class="dv">21300</span>, <span class="dv">23400</span>),</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">region =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"North"</span>, <span class="st">"South"</span>, <span class="st">"East"</span>, <span class="st">"West"</span>), <span class="dv">3</span>)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Dataset 2: Customer demographics</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>customer_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">age =</span> <span class="fu">rnorm</span>(<span class="dv">500</span>, <span class="dv">35</span>, <span class="dv">12</span>),</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">income =</span> <span class="fu">rnorm</span>(<span class="dv">500</span>, <span class="dv">50000</span>, <span class="dv">15000</span>),</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">satisfaction =</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">500</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">category =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"Premium"</span>, <span class="st">"Standard"</span>, <span class="st">"Basic"</span>), <span class="dv">500</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.3</span>, <span class="fl">0.5</span>, <span class="fl">0.2</span>)),</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">gender =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"Male"</span>, <span class="st">"Female"</span>, <span class="st">"Other"</span>), <span class="dv">500</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.45</span>, <span class="fl">0.5</span>, <span class="fl">0.05</span>))</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Dataset 3: Time series data</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>time_series_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">date =</span> <span class="fu">seq</span>(<span class="fu">as.Date</span>(<span class="st">"2020-01-01"</span>), <span class="fu">as.Date</span>(<span class="st">"2024-12-31"</span>), <span class="at">by =</span> <span class="st">"month"</span>),</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">cumsum</span>(<span class="fu">rnorm</span>(<span class="dv">60</span>, <span class="dv">5</span>, <span class="dv">15</span>)) <span class="sc">+</span> <span class="dv">100</span>,</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">trend =</span> <span class="fu">seq</span>(<span class="dv">100</span>, <span class="dv">400</span>, <span class="at">length.out =</span> <span class="dv">60</span>),</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">category =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>), <span class="dv">20</span>)</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Dataset 4: Correlation matrix data</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>correlation_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">rnorm</span>(<span class="dv">200</span>),</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">rnorm</span>(<span class="dv">200</span>),</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">z =</span> <span class="fu">rnorm</span>(<span class="dv">200</span>)</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>correlation_data<span class="sc">$</span>y <span class="ot">&lt;-</span> correlation_data<span class="sc">$</span>x <span class="sc">*</span> <span class="fl">0.7</span> <span class="sc">+</span> correlation_data<span class="sc">$</span>y <span class="sc">*</span> <span class="fl">0.3</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>correlation_data<span class="sc">$</span>z <span class="ot">&lt;-</span> correlation_data<span class="sc">$</span>x <span class="sc">*</span> <span class="sc">-</span><span class="fl">0.5</span> <span class="sc">+</span> correlation_data<span class="sc">$</span>z <span class="sc">*</span> <span class="fl">0.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="bar-charts-and-column-charts" class="level2">
<h2 class="anchored" data-anchor-id="bar-charts-and-column-charts">1. Bar Charts and Column Charts</h2>
<p>Bar charts are perfect for comparing categories and showing distributions.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple bar chart with custom colors</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sales_data, <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> revenue, <span class="at">fill =</span> month)) <span class="sc">+</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="fl">0.7</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> custom_colors) <span class="sc">+</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>(<span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">suffix =</span> <span class="st">"K"</span>)) <span class="sc">+</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Monthly Revenue Performance"</span>,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Consistent growth throughout the year"</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Month"</span>,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Revenue (in thousands)"</span>,</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Data: Company Sales Report 2024"</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternative approach using viridis colors for months</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>p1_alt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sales_data, <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> revenue, <span class="at">fill =</span> month)) <span class="sc">+</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="fl">0.7</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>(<span class="at">option =</span> <span class="st">"plasma"</span>) <span class="sc">+</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>(<span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">suffix =</span> <span class="st">"K"</span>)) <span class="sc">+</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Monthly Revenue Performance (Viridis Palette)"</span>,</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Perceptually uniform color progression"</span>,</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Month"</span>,</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Revenue (in thousands)"</span>,</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Data: Company Sales Report 2024"</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Grouped bar chart</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> sales_data <span class="sc">%&gt;%</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(month, revenue, profit) <span class="sc">%&gt;%</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(revenue, profit), <span class="at">names_to =</span> <span class="st">"metric"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> value, <span class="at">fill =</span> metric)) <span class="sc">+</span></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">width =</span> <span class="fl">0.7</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"revenue"</span> <span class="ot">=</span> <span class="st">"#1A1A2E"</span>, <span class="st">"profit"</span> <span class="ot">=</span> <span class="st">"#533A71"</span>),</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Profit"</span>, <span class="st">"Revenue"</span>)</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>(<span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">suffix =</span> <span class="st">"K"</span>)) <span class="sc">+</span></span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Revenue vs Profit Analysis"</span>,</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Monthly comparison of key financial metrics"</span>,</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Month"</span>,</span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Amount (in thousands)"</span>,</span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Metric"</span></span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/bar_charts-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p1_alt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/bar_charts-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/bar_charts-3.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="line-charts-and-time-series" class="level2">
<h2 class="anchored" data-anchor-id="line-charts-and-time-series">2. Line Charts and Time Series</h2>
<p>Line charts excel at showing trends over time and continuous relationships.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple time series plot</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(time_series_data, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"#1A1A2E"</span>, <span class="at">size =</span> <span class="fl">1.2</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>, <span class="at">color =</span> <span class="st">"#533A71"</span>, <span class="at">fill =</span> <span class="st">"#533A71"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_labels =</span> <span class="st">"%Y"</span>, <span class="at">date_breaks =</span> <span class="st">"1 year"</span>) <span class="sc">+</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>()) <span class="sc">+</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Business Growth Trajectory"</span>,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"5-year performance with trend analysis"</span>,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Performance Index"</span>,</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Includes LOESS smoothing with 95% confidence interval"</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiple line chart</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>p4 <span class="ot">&lt;-</span> time_series_data <span class="sc">%&gt;%</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(category, <span class="at">year =</span> lubridate<span class="sc">::</span><span class="fu">year</span>(date)) <span class="sc">%&gt;%</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_value =</span> <span class="fu">mean</span>(value), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> avg_value, <span class="at">color =</span> category)) <span class="sc">+</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">2020</span><span class="sc">:</span><span class="dv">2024</span>) <span class="sc">+</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Category Performance Comparison"</span>,</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Annual trends across different business segments"</span>,</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average Performance"</span>,</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Category"</span></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/line_charts-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/line_charts-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="scatter-plots-and-correlation-analysis" class="level2">
<h2 class="anchored" data-anchor-id="scatter-plots-and-correlation-analysis">3. Scatter Plots and Correlation Analysis</h2>
<p>Scatter plots reveal relationships between continuous variables.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic scatter plot with regression line</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>p5 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(customer_data, <span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> income)) <span class="sc">+</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> category), <span class="at">size =</span> <span class="fl">2.5</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">fill =</span> <span class="st">"#95A5A6"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Income vs Age Relationship"</span>,</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Customer segmentation analysis with linear trend"</span>,</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Age (years)"</span>,</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Annual Income"</span>,</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Customer Category"</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Bubble chart</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>p6 <span class="ot">&lt;-</span> customer_data <span class="sc">%&gt;%</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(category, gender) <span class="sc">%&gt;%</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_age =</span> <span class="fu">mean</span>(age),</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_income =</span> <span class="fu">mean</span>(income),</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> avg_age, <span class="at">y =</span> avg_income, <span class="at">size =</span> count, <span class="at">color =</span> category)) <span class="sc">+</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">20</span>), <span class="at">guide =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">"Count"</span>)) <span class="sc">+</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>gender) <span class="sc">+</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Customer Demographics Bubble Chart"</span>,</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Age, income, and count by category and gender"</span>,</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Average Age"</span>,</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average Income"</span>,</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Category"</span>,</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="st">"Customer Count"</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/scatter_plots-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p6)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/scatter_plots-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="histograms-and-density-plots" class="level2">
<h2 class="anchored" data-anchor-id="histograms-and-density-plots">4. Histograms and Density Plots</h2>
<p>These plots show distributions and frequency patterns in your data.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Histogram with density overlay</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>p7 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(customer_data, <span class="fu">aes</span>(<span class="at">x =</span> income)) <span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">bins =</span> <span class="dv">30</span>, <span class="at">fill =</span> <span class="st">"#1A1A2E"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">color =</span> <span class="st">"#533A71"</span>, <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Income Distribution Analysis"</span>,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Histogram with overlaid density curve"</span>,</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Annual Income"</span>,</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Density"</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Faceted density plots</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>p8 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(customer_data, <span class="fu">aes</span>(<span class="at">x =</span> income, <span class="at">fill =</span> category)) <span class="sc">+</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>category, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Income Distribution by Customer Category"</span>,</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Density plots revealing different spending patterns"</span>,</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Annual Income"</span>,</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Density"</span>,</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Category"</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p7)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/histograms_density-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p8)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/histograms_density-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="box-plots-and-violin-plots" class="level2">
<h2 class="anchored" data-anchor-id="box-plots-and-violin-plots">5. Box Plots and Violin Plots</h2>
<p>These plots show distributions, quartiles, and outliers effectively.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Enhanced box plot</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>p9 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(customer_data, <span class="fu">aes</span>(<span class="at">x =</span> category, <span class="at">y =</span> satisfaction, <span class="at">fill =</span> category)) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">width =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> <span class="fl">0.3</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">outlier.shape =</span> <span class="dv">21</span>, <span class="at">outlier.size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Customer Satisfaction Distribution"</span>,</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Violin plots with box plots and individual data points"</span>,</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Customer Category"</span>,</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Satisfaction Score (1-10)"</span>,</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Category"</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Grouped box plot</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>p10 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(customer_data, <span class="fu">aes</span>(<span class="at">x =</span> category, <span class="at">y =</span> income, <span class="at">fill =</span> gender)) <span class="sc">+</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">outlier.shape =</span> <span class="dv">21</span>) <span class="sc">+</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#6A0572"</span>)) <span class="sc">+</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Income Distribution by Category and Gender"</span>,</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Grouped box plots revealing demographic patterns"</span>,</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Customer Category"</span>,</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Annual Income"</span>,</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Gender"</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p9)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/box_violin_plots-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p10)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/box_violin_plots-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="heatmaps-and-correlation-matrices" class="level2">
<h2 class="anchored" data-anchor-id="heatmaps-and-correlation-matrices">6. Heatmaps and Correlation Matrices</h2>
<p>Heatmaps are excellent for showing relationships and patterns in matrix data.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correlation heatmap</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>cor_matrix <span class="ot">&lt;-</span> <span class="fu">cor</span>(correlation_data)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>cor_df <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">Var1 =</span> <span class="fu">rownames</span>(cor_matrix), <span class="at">Var2 =</span> <span class="fu">colnames</span>(cor_matrix))</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>cor_df<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(cor_matrix)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>p11 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(cor_df, <span class="fu">aes</span>(<span class="at">x =</span> Var1, <span class="at">y =</span> Var2, <span class="at">fill =</span> value)) <span class="sc">+</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(value, <span class="dv">2</span>)), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">family =</span> <span class="st">"fira"</span>) <span class="sc">+</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"#1A1A2E"</span>, </span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid =</span> <span class="st">"white"</span>, </span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"#533A71"</span>, </span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">midpoint =</span> <span class="dv">0</span>,</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Correlation"</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Correlation Matrix Heatmap"</span>,</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Relationships between variables"</span>,</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">""</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">size =</span> <span class="dv">1</span>)</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Monthly sales heatmap</span></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>monthly_matrix <span class="ot">&lt;-</span> sales_data <span class="sc">%&gt;%</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(month, revenue, profit) <span class="sc">%&gt;%</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(revenue, profit), <span class="at">names_to =</span> <span class="st">"metric"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">value_scaled =</span> <span class="fu">scale</span>(value)[,<span class="dv">1</span>])</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>p12 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(monthly_matrix, <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> metric, <span class="at">fill =</span> value_scaled)) <span class="sc">+</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(</span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"#1A1A2E"</span>, </span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid =</span> <span class="st">"white"</span>, </span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"#533A71"</span>,</span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Scaled</span><span class="sc">\n</span><span class="st">Value"</span></span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Monthly Performance Heatmap"</span>,</span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Standardized revenue and profit metrics"</span>,</span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Month"</span>, <span class="at">y =</span> <span class="st">"Metric"</span></span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p11)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/heatmaps-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p12)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/heatmaps-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="pie-charts-and-donut-charts" class="level2">
<h2 class="anchored" data-anchor-id="pie-charts-and-donut-charts">7. Pie Charts and Donut Charts</h2>
<p>While sometimes criticized, pie charts can be effective for showing parts of a whole.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Enhanced pie chart</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>category_counts <span class="ot">&lt;-</span> customer_data <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(category) <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">percentage =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste0</span>(category, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, <span class="fu">round</span>(percentage, <span class="dv">1</span>), <span class="st">"%"</span>)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>p13 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(category_counts, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> n, <span class="at">fill =</span> category)) <span class="sc">+</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> label), </span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"white"</span>, </span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">4</span>, </span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">family =</span> <span class="st">"source"</span>,</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Customer Category Distribution"</span>,</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Market segmentation overview"</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"playfair"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.6</span>), <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>),</span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"source"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.1</span>), <span class="at">color =</span> <span class="st">"#7F8C8D"</span>),</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Donut chart</span></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>p14 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(category_counts, <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">2</span>, <span class="at">y =</span> n, <span class="at">fill =</span> category)) <span class="sc">+</span></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="fl">0.5</span>, <span class="fl">2.5</span>) <span class="sc">+</span></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Customer Segments - Donut View"</span>,</span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Clean modern representation"</span>,</span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Category"</span></span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"playfair"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.6</span>), <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>),</span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"source"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.1</span>), <span class="at">color =</span> <span class="st">"#7F8C8D"</span>)</span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p13)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/pie_donut_charts-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p14)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/pie_donut_charts-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="advanced-plots-ridgeline-and-waterfall" class="level2">
<h2 class="anchored" data-anchor-id="advanced-plots-ridgeline-and-waterfall">8. Advanced Plots: Ridgeline and Waterfall</h2>
<p>Let’s explore some advanced visualization techniques.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ridgeline plot (requires ggridges)</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggridges)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>p15 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(customer_data, <span class="fu">aes</span>(<span class="at">x =</span> income, <span class="at">y =</span> category, <span class="at">fill =</span> category)) <span class="sc">+</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges</span>(<span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">scale =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Income Distribution Ridgeline Plot"</span>,</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Elegant way to compare distributions across categories"</span>,</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Annual Income"</span>,</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Customer Category"</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Waterfall chart simulation</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>waterfall_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">category =</span> <span class="fu">c</span>(<span class="st">"Starting"</span>, <span class="st">"Q1 Growth"</span>, <span class="st">"Q2 Growth"</span>, <span class="st">"Q3 Decline"</span>, <span class="st">"Q4 Growth"</span>, <span class="st">"Ending"</span>),</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">25</span>, <span class="dv">30</span>, <span class="sc">-</span><span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">160</span>),</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="fu">c</span>(<span class="st">"start"</span>, <span class="st">"increase"</span>, <span class="st">"increase"</span>, <span class="st">"decrease"</span>, <span class="st">"increase"</span>, <span class="st">"end"</span>)</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>waterfall_data<span class="sc">$</span>cumulative <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(waterfall_data<span class="sc">$</span>value)</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>waterfall_data<span class="sc">$</span>xmin <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(waterfall_data) <span class="sc">-</span> <span class="fl">0.4</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>waterfall_data<span class="sc">$</span>xmax <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(waterfall_data) <span class="sc">+</span> <span class="fl">0.4</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>waterfall_data<span class="sc">$</span>ymin <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">head</span>(waterfall_data<span class="sc">$</span>cumulative, <span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>waterfall_data<span class="sc">$</span>ymax <span class="ot">&lt;-</span> waterfall_data<span class="sc">$</span>cumulative</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>p16 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(waterfall_data) <span class="sc">+</span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> xmin, <span class="at">xmax =</span> xmax, <span class="at">ymin =</span> ymin, <span class="at">ymax =</span> ymax, <span class="at">fill =</span> type), </span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(waterfall_data), <span class="at">y =</span> ymax <span class="sc">+</span> <span class="dv">5</span>, <span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">"+"</span>, value)), </span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>            <span class="at">family =</span> <span class="st">"source"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>) <span class="sc">+</span></span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"start"</span> <span class="ot">=</span> <span class="st">"#455A64"</span>, <span class="st">"increase"</span> <span class="ot">=</span> <span class="st">"#533A71"</span>, </span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"decrease"</span> <span class="ot">=</span> <span class="st">"#6A0572"</span>, <span class="st">"end"</span> <span class="ot">=</span> <span class="st">"#1A1A2E"</span>)) <span class="sc">+</span></span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">labels =</span> waterfall_data<span class="sc">$</span>category) <span class="sc">+</span></span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Business Performance Waterfall Chart"</span>,</span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Quarterly progression breakdown"</span>,</span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">"Performance Value"</span>,</span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Type"</span></span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p15)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/advanced_plots-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p16)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/advanced_plots-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="faceting-and-small-multiples" class="level2">
<h2 class="anchored" data-anchor-id="faceting-and-small-multiples">9. Faceting and Small Multiples</h2>
<p>Faceting allows you to create multiple plots based on grouping variables.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Facet wrap example</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>p17 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(customer_data, <span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> income, <span class="at">color =</span> satisfaction)) <span class="sc">+</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>) <span class="sc">+</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_c</span>(<span class="at">option =</span> <span class="st">"plasma"</span>) <span class="sc">+</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>category, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Age-Income Relationship Across Customer Categories"</span>,</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Satisfaction levels shown by color intensity"</span>,</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Age"</span>, <span class="at">y =</span> <span class="st">"Income"</span>, <span class="at">color =</span> <span class="st">"Satisfaction"</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Facet grid example</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>time_analysis <span class="ot">&lt;-</span> time_series_data <span class="sc">%&gt;%</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> lubridate<span class="sc">::</span><span class="fu">year</span>(date),</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">quarter =</span> <span class="fu">paste0</span>(<span class="st">"Q"</span>, lubridate<span class="sc">::</span><span class="fu">quarter</span>(date))</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="dv">2022</span><span class="sc">:</span><span class="dv">2024</span>)</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>p18 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(time_analysis, <span class="fu">aes</span>(<span class="at">x =</span> quarter, <span class="at">y =</span> value, <span class="at">fill =</span> category)) <span class="sc">+</span></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(year <span class="sc">~</span> ., <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Quarterly Performance by Category and Year"</span>,</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Faceted analysis showing temporal patterns"</span>,</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Quarter"</span>, <span class="at">y =</span> <span class="st">"Performance Value"</span>, <span class="at">fill =</span> <span class="st">"Category"</span></span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p17)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/faceting_plots-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p18)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/faceting_plots-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="interactive-elements-and-annotations" class="level2">
<h2 class="anchored" data-anchor-id="interactive-elements-and-annotations">10. Interactive Elements and Annotations</h2>
<p>Adding annotations and highlights to make your plots more informative.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot with annotations</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>best_month <span class="ot">&lt;-</span> sales_data[<span class="fu">which.max</span>(sales_data<span class="sc">$</span>revenue), ]</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>p19 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sales_data, <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> revenue)) <span class="sc">+</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> month <span class="sc">==</span> best_month<span class="sc">$</span>month), <span class="at">width =</span> <span class="fl">0.7</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"FALSE"</span> <span class="ot">=</span> <span class="st">"#455A64"</span>, <span class="st">"TRUE"</span> <span class="ot">=</span> <span class="st">"#1A1A2E"</span>), <span class="at">guide =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>(<span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">suffix =</span> <span class="st">"K"</span>)) <span class="sc">+</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, </span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> <span class="fu">which</span>(sales_data<span class="sc">$</span>month <span class="sc">==</span> best_month<span class="sc">$</span>month), </span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> best_month<span class="sc">$</span>revenue <span class="sc">+</span> <span class="dv">2000</span>,</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"Peak Month</span><span class="sc">\n</span><span class="st">$"</span>, scales<span class="sc">::</span><span class="fu">comma</span>(best_month<span class="sc">$</span>revenue)),</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>           <span class="at">family =</span> <span class="st">"source"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>,</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>           <span class="at">hjust =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"curve"</span>, </span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> <span class="fu">which</span>(sales_data<span class="sc">$</span>month <span class="sc">==</span> best_month<span class="sc">$</span>month) <span class="sc">+</span> <span class="fl">0.5</span>, </span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> best_month<span class="sc">$</span>revenue <span class="sc">+</span> <span class="dv">1000</span>,</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>           <span class="at">xend =</span> <span class="fu">which</span>(sales_data<span class="sc">$</span>month <span class="sc">==</span> best_month<span class="sc">$</span>month) <span class="sc">+</span> <span class="fl">0.1</span>, </span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>           <span class="at">yend =</span> best_month<span class="sc">$</span>revenue <span class="sc">+</span> <span class="dv">500</span>,</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>           <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">0.2</span>, <span class="st">"cm"</span>)), </span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">"#533A71"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Revenue Performance with Peak Highlight"</span>,</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Annotations draw attention to key insights"</span>,</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Month"</span>, <span class="at">y =</span> <span class="st">"Revenue (in thousands)"</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Multi-layer plot with trend analysis</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>p20 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(time_series_data, <span class="fu">aes</span>(<span class="at">x =</span> date)) <span class="sc">+</span></span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Background ribbon for trend</span></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> trend <span class="sc">-</span> <span class="dv">50</span>, <span class="at">ymax =</span> trend <span class="sc">+</span> <span class="dv">50</span>), </span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>              <span class="at">fill =</span> <span class="st">"#533A71"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Actual values</span></span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> value), <span class="at">color =</span> <span class="st">"#1A1A2E"</span>, <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Trend line</span></span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> trend), <span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Highlight recent period</span></span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> <span class="fu">as.Date</span>(<span class="st">"2024-01-01"</span>), <span class="at">xmax =</span> <span class="fu">as.Date</span>(<span class="st">"2024-12-31"</span>),</span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a>                <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true" tabindex="-1"></a>            <span class="at">fill =</span> <span class="st">"#6A0572"</span>, <span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_labels =</span> <span class="st">"%Y"</span>, <span class="at">date_breaks =</span> <span class="st">"1 year"</span>) <span class="sc">+</span></span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Performance Analysis with Trend Confidence Interval"</span>,</span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Recent period highlighted in yellow, trend shown with confidence band"</span>,</span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Date"</span>, <span class="at">y =</span> <span class="st">"Performance Value"</span>,</span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Dashed line shows underlying trend, ribbon shows ±50 confidence band"</span></span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-49"><a href="#cb23-49" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p19)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/annotations_highlights-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p20)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/annotations_highlights-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="area-charts-and-stacked-plots" class="level2">
<h2 class="anchored" data-anchor-id="area-charts-and-stacked-plots">11. Area Charts and Stacked Plots</h2>
<p>Area charts are excellent for showing cumulative values and trends over time.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple area chart</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>p21 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(time_series_data, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_area</span>(<span class="at">fill =</span> <span class="st">"#1A1A2E"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"#533A71"</span>, <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_labels =</span> <span class="st">"%Y"</span>, <span class="at">date_breaks =</span> <span class="st">"1 year"</span>) <span class="sc">+</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>()) <span class="sc">+</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Performance Area Chart"</span>,</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Cumulative performance visualization over time"</span>,</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Performance Value"</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Stacked area chart</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>area_data <span class="ot">&lt;-</span> time_series_data <span class="sc">%&gt;%</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date) <span class="sc">%&gt;%</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">category_value =</span> <span class="fu">case_when</span>(</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>      category <span class="sc">==</span> <span class="st">"A"</span> <span class="sc">~</span> value <span class="sc">*</span> <span class="fl">0.4</span>,</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>      category <span class="sc">==</span> <span class="st">"B"</span> <span class="sc">~</span> value <span class="sc">*</span> <span class="fl">0.35</span>,</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>      category <span class="sc">==</span> <span class="st">"C"</span> <span class="sc">~</span> value <span class="sc">*</span> <span class="fl">0.25</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>p22 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(area_data, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> category_value, <span class="at">fill =</span> category)) <span class="sc">+</span></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_area</span>(<span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span></span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_labels =</span> <span class="st">"%Y"</span>, <span class="at">date_breaks =</span> <span class="st">"1 year"</span>) <span class="sc">+</span></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>()) <span class="sc">+</span></span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Stacked Area Chart by Category"</span>,</span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Component contribution to total performance"</span>,</span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Performance Value"</span>,</span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Category"</span></span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p21)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/area_charts-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p22)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/area_charts-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="polar-and-radar-charts" class="level2">
<h2 class="anchored" data-anchor-id="polar-and-radar-charts">12. Polar and Radar Charts</h2>
<p>Polar coordinates can create unique and effective visualizations.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Polar bar chart (rose chart)</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>monthly_summary <span class="ot">&lt;-</span> sales_data <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month_num =</span> <span class="fu">as.numeric</span>(month))</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>p23 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(monthly_summary, <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> revenue, <span class="at">fill =</span> month)) <span class="sc">+</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="fl">0.8</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> custom_colors) <span class="sc">+</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">start =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>(<span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">suffix =</span> <span class="st">"K"</span>)) <span class="sc">+</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Circular Revenue Chart"</span>,</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Monthly performance in polar coordinates"</span>,</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Revenue (thousands)"</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">0.8</span>))</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Radar chart simulation</span></span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>radar_data <span class="ot">&lt;-</span> customer_data <span class="sc">%&gt;%</span></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(category) <span class="sc">%&gt;%</span></span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_age =</span> <span class="fu">mean</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_income =</span> <span class="fu">mean</span>(income, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">/</span> <span class="dv">1000</span>,  <span class="co"># Scale down</span></span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_satisfaction =</span> <span class="fu">mean</span>(satisfaction, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">count =</span> <span class="fu">n</span>() <span class="sc">/</span> <span class="dv">10</span>,  <span class="co"># Scale down</span></span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>category, <span class="at">names_to =</span> <span class="st">"metric"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Normalize values to 0-10 scale</span></span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_norm =</span> scales<span class="sc">::</span><span class="fu">rescale</span>(value, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">10</span>))</span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a>p24 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(radar_data, <span class="fu">aes</span>(<span class="at">x =</span> metric, <span class="at">y =</span> value_norm, <span class="at">fill =</span> category)) <span class="sc">+</span></span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">width =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb27-38"><a href="#cb27-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb27-39"><a href="#cb27-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>() <span class="sc">+</span></span>
<span id="cb27-40"><a href="#cb27-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>category) <span class="sc">+</span></span>
<span id="cb27-41"><a href="#cb27-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb27-42"><a href="#cb27-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Customer Profile Radar Charts"</span>,</span>
<span id="cb27-43"><a href="#cb27-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Multi-dimensional comparison across categories"</span>,</span>
<span id="cb27-44"><a href="#cb27-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Normalized Score"</span></span>
<span id="cb27-45"><a href="#cb27-45" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb27-46"><a href="#cb27-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb27-47"><a href="#cb27-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb27-48"><a href="#cb27-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">0.7</span>))</span>
<span id="cb27-49"><a href="#cb27-49" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb27-50"><a href="#cb27-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-51"><a href="#cb27-51" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p23)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/polar_charts-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p24)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/polar_charts-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="statistical-plots" class="level2">
<h2 class="anchored" data-anchor-id="statistical-plots">13. Statistical Plots</h2>
<p>Advanced statistical visualizations for deeper analysis.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Q-Q plot for normality testing</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>p25 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(customer_data, <span class="fu">aes</span>(<span class="at">sample =</span> income)) <span class="sc">+</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_qq</span>(<span class="at">color =</span> <span class="st">"#1A1A2E"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_qq_line</span>(<span class="at">color =</span> <span class="st">"#533A71"</span>, <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>category) <span class="sc">+</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Q-Q Plots for Income Distribution"</span>,</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Testing normality assumption by customer category"</span>,</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Theoretical Quantiles"</span>,</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Sample Quantiles"</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Error bars and confidence intervals</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>error_data <span class="ot">&lt;-</span> customer_data <span class="sc">%&gt;%</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(category, gender) <span class="sc">%&gt;%</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_income =</span> <span class="fu">mean</span>(income, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_income =</span> <span class="fu">sd</span>(income, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">se_income =</span> sd_income <span class="sc">/</span> <span class="fu">sqrt</span>(n),</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">ci_lower =</span> mean_income <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> se_income,</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">ci_upper =</span> mean_income <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> se_income,</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>p26 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(error_data, <span class="fu">aes</span>(<span class="at">x =</span> category, <span class="at">y =</span> mean_income, <span class="at">fill =</span> gender)) <span class="sc">+</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">ymin =</span> ci_lower, <span class="at">ymax =</span> ci_upper),</span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.9</span>),</span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="fl">0.2</span>,</span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"#2C3E50"</span>,</span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">0.8</span></span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#6A0572"</span>)) <span class="sc">+</span></span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Mean Income with 95% Confidence Intervals"</span>,</span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Statistical significance testing across groups"</span>,</span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Customer Category"</span>,</span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Mean Annual Income"</span>,</span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Gender"</span></span>
<span id="cb29-43"><a href="#cb29-43" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-44"><a href="#cb29-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-45"><a href="#cb29-45" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p25)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/statistical_plots-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p26)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/statistical_plots-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="network-and-flow-diagrams" class="level2">
<h2 class="anchored" data-anchor-id="network-and-flow-diagrams">14. Network and Flow Diagrams</h2>
<p>Visualizing relationships and flows between entities.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Alluvial/Sankey-style plot</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>flow_data <span class="ot">&lt;-</span> customer_data <span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(category, gender, satisfaction <span class="sc">&gt;</span> <span class="dv">7</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">high_satisfaction =</span> <span class="st">`</span><span class="at">satisfaction &gt; 7</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">satisfaction_level =</span> <span class="fu">ifelse</span>(high_satisfaction, <span class="st">"High"</span>, <span class="st">"Low"</span>),</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">flow_id =</span> <span class="fu">row_number</span>()</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create flow visualization using area plots</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>p27 <span class="ot">&lt;-</span> flow_data <span class="sc">%&gt;%</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">x1 =</span> <span class="dv">1</span>, <span class="at">x2 =</span> <span class="dv">2</span>, <span class="at">x3 =</span> <span class="dv">3</span>,</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">category_y =</span> <span class="fu">as.numeric</span>(<span class="fu">as.factor</span>(category)),</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">gender_y =</span> <span class="fu">as.numeric</span>(<span class="fu">as.factor</span>(gender)) <span class="sc">+</span> <span class="dv">3</span>,</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">satisfaction_y =</span> <span class="fu">as.numeric</span>(<span class="fu">as.factor</span>(satisfaction_level)) <span class="sc">+</span> <span class="dv">6</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Category to Gender flows</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> x1, <span class="at">y =</span> category_y, <span class="at">xend =</span> x2, <span class="at">yend =</span> gender_y, <span class="at">size =</span> n),</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">"#1A1A2E"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Gender to Satisfaction flows  </span></span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> x2, <span class="at">y =</span> gender_y, <span class="at">xend =</span> x3, <span class="at">yend =</span> satisfaction_y, <span class="at">size =</span> n),</span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">"#533A71"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add points for nodes</span></span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> x1, <span class="at">y =</span> category_y), <span class="at">size =</span> <span class="dv">8</span>, <span class="at">color =</span> <span class="st">"#1A1A2E"</span>) <span class="sc">+</span></span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> x2, <span class="at">y =</span> gender_y), <span class="at">size =</span> <span class="dv">8</span>, <span class="at">color =</span> <span class="st">"#533A71"</span>) <span class="sc">+</span></span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> x3, <span class="at">y =</span> satisfaction_y), <span class="at">size =</span> <span class="dv">8</span>, <span class="at">color =</span> <span class="st">"#0F3460"</span>) <span class="sc">+</span></span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">10</span>), <span class="at">guide =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Category"</span>, <span class="st">"Gender"</span>, <span class="st">"Satisfaction"</span>)) <span class="sc">+</span></span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Customer Flow Diagram"</span>,</span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Relationships between category, gender, and satisfaction"</span>,</span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">""</span></span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-41"><a href="#cb31-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Chord diagram simulation using polar coordinates</span></span>
<span id="cb31-42"><a href="#cb31-42" aria-hidden="true" tabindex="-1"></a>chord_data <span class="ot">&lt;-</span> customer_data <span class="sc">%&gt;%</span></span>
<span id="cb31-43"><a href="#cb31-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(category, gender) <span class="sc">%&gt;%</span></span>
<span id="cb31-44"><a href="#cb31-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb31-45"><a href="#cb31-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">angle =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">2</span><span class="sc">*</span>pi, <span class="at">length.out =</span> <span class="fu">n</span>()),</span>
<span id="cb31-46"><a href="#cb31-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">radius =</span> scales<span class="sc">::</span><span class="fu">rescale</span>(n, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>))</span>
<span id="cb31-47"><a href="#cb31-47" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb31-48"><a href="#cb31-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-49"><a href="#cb31-49" aria-hidden="true" tabindex="-1"></a>p28 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(chord_data, <span class="fu">aes</span>(<span class="at">x =</span> angle, <span class="at">y =</span> radius)) <span class="sc">+</span></span>
<span id="cb31-50"><a href="#cb31-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> category), <span class="at">width =</span> <span class="fl">0.3</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb31-51"><a href="#cb31-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb31-52"><a href="#cb31-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">start =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb31-53"><a href="#cb31-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb31-54"><a href="#cb31-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Circular Relationship Plot"</span>,</span>
<span id="cb31-55"><a href="#cb31-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Category-Gender distribution in polar coordinates"</span>,</span>
<span id="cb31-56"><a href="#cb31-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Category"</span></span>
<span id="cb31-57"><a href="#cb31-57" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb31-58"><a href="#cb31-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb31-59"><a href="#cb31-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-60"><a href="#cb31-60" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p27)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/network_flow_plots-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p28)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/network_flow_plots-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="advanced-distribution-plots" class="level2">
<h2 class="anchored" data-anchor-id="advanced-distribution-plots">15. Advanced Distribution Plots</h2>
<p>Sophisticated ways to visualize and compare distributions.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Strip charts with jitter</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>p29 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(customer_data, <span class="fu">aes</span>(<span class="at">x =</span> category, <span class="at">y =</span> income, <span class="at">color =</span> category)) <span class="sc">+</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">width =</span> <span class="fl">0.3</span>, <span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> median, <span class="at">geom =</span> <span class="st">"crossbar"</span>, <span class="at">width =</span> <span class="fl">0.5</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Income Distribution Strip Chart"</span>,</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Individual data points with median crossbars"</span>,</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Customer Category"</span>,</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Annual Income"</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Slope graph</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>slope_data <span class="ot">&lt;-</span> sales_data <span class="sc">%&gt;%</span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(month, revenue, profit) <span class="sc">%&gt;%</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Jan"</span>, <span class="st">"Jun"</span>, <span class="st">"Dec"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(revenue, profit), <span class="at">names_to =</span> <span class="st">"metric"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> <span class="fu">factor</span>(month, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Jan"</span>, <span class="st">"Jun"</span>, <span class="st">"Dec"</span>)))</span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>p30 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(slope_data, <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> value, <span class="at">group =</span> metric, <span class="at">color =</span> metric)) <span class="sc">+</span></span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> scales<span class="sc">::</span><span class="fu">dollar</span>(value, <span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">suffix =</span> <span class="st">"K"</span>)), </span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a>            <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>, <span class="at">family =</span> <span class="st">"source"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"profit"</span> <span class="ot">=</span> <span class="st">"#1A1A2E"</span>, <span class="st">"revenue"</span> <span class="ot">=</span> <span class="st">"#533A71"</span>)) <span class="sc">+</span></span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>(<span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">suffix =</span> <span class="st">"K"</span>)) <span class="sc">+</span></span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Revenue vs Profit Slope Graph"</span>,</span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Performance progression across key months"</span>,</span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Month"</span>,</span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Amount (thousands)"</span>,</span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Metric"</span></span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-37"><a href="#cb33-37" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p29)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/advanced_distributions-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p30)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/advanced_distributions-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="specialized-business-plots" class="level2">
<h2 class="anchored" data-anchor-id="specialized-business-plots">16. Specialized Business Plots</h2>
<p>Industry-specific and business-focused visualizations.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Bullet chart simulation</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>target_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric =</span> <span class="fu">c</span>(<span class="st">"Revenue"</span>, <span class="st">"Profit"</span>, <span class="st">"Customers"</span>, <span class="st">"Satisfaction"</span>),</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">actual =</span> <span class="fu">c</span>(<span class="dv">78000</span>, <span class="dv">23400</span>, <span class="dv">500</span>, <span class="fl">7.2</span>),</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">target =</span> <span class="fu">c</span>(<span class="dv">80000</span>, <span class="dv">25000</span>, <span class="dv">600</span>, <span class="fl">8.0</span>),</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">poor =</span> <span class="fu">c</span>(<span class="dv">60000</span>, <span class="dv">15000</span>, <span class="dv">300</span>, <span class="fl">5.0</span>),</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">good =</span> <span class="fu">c</span>(<span class="dv">75000</span>, <span class="dv">22000</span>, <span class="dv">500</span>, <span class="fl">7.5</span>)</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>p31 <span class="ot">&lt;-</span> target_data <span class="sc">%&gt;%</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(poor, good, target), <span class="at">names_to =</span> <span class="st">"benchmark"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> metric)) <span class="sc">+</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y =</span> value, <span class="at">fill =</span> benchmark), </span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>           <span class="at">position =</span> <span class="st">"identity"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">width =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> actual), <span class="at">size =</span> <span class="dv">4</span>, <span class="at">color =</span> <span class="st">"#1A1A2E"</span>) <span class="sc">+</span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">y =</span> actual, <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">comma</span>(actual)), </span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.2</span>, <span class="at">family =</span> <span class="st">"source"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"poor"</span> <span class="ot">=</span> <span class="st">"#6A0572"</span>, <span class="st">"good"</span> <span class="ot">=</span> <span class="st">"#533A71"</span>, <span class="st">"target"</span> <span class="ot">=</span> <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Performance Bullet Chart"</span>,</span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Actual vs target performance with benchmark ranges"</span>,</span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Metrics"</span>,</span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Value"</span>,</span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Benchmark"</span></span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Funnel chart</span></span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a>funnel_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">stage =</span> <span class="fu">c</span>(<span class="st">"Leads"</span>, <span class="st">"Qualified"</span>, <span class="st">"Proposals"</span>, <span class="st">"Negotiations"</span>, <span class="st">"Closed"</span>),</span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">count =</span> <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">750</span>, <span class="dv">400</span>, <span class="dv">200</span>, <span class="dv">120</span>),</span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">order =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb35-34"><a href="#cb35-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb35-35"><a href="#cb35-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">percentage =</span> count <span class="sc">/</span> <span class="fu">max</span>(count) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb35-36"><a href="#cb35-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">stage =</span> <span class="fu">factor</span>(stage, <span class="at">levels =</span> stage)</span>
<span id="cb35-37"><a href="#cb35-37" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb35-38"><a href="#cb35-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-39"><a href="#cb35-39" aria-hidden="true" tabindex="-1"></a>p32 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(funnel_data, <span class="fu">aes</span>(<span class="at">x =</span> order, <span class="at">y =</span> count, <span class="at">fill =</span> stage)) <span class="sc">+</span></span>
<span id="cb35-40"><a href="#cb35-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="fl">0.8</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb35-41"><a href="#cb35-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(count, <span class="st">"</span><span class="sc">\n</span><span class="st">("</span>, <span class="fu">round</span>(percentage, <span class="dv">1</span>), <span class="st">"%)"</span>)), </span>
<span id="cb35-42"><a href="#cb35-42" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">family =</span> <span class="st">"source"</span>) <span class="sc">+</span></span>
<span id="cb35-43"><a href="#cb35-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> custom_colors[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]) <span class="sc">+</span></span>
<span id="cb35-44"><a href="#cb35-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">labels =</span> funnel_data<span class="sc">$</span>stage) <span class="sc">+</span></span>
<span id="cb35-45"><a href="#cb35-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>()) <span class="sc">+</span></span>
<span id="cb35-46"><a href="#cb35-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb35-47"><a href="#cb35-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Sales Funnel Analysis"</span>,</span>
<span id="cb35-48"><a href="#cb35-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Conversion rates through sales pipeline"</span>,</span>
<span id="cb35-49"><a href="#cb35-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Sales Stage"</span>,</span>
<span id="cb35-50"><a href="#cb35-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Count"</span>,</span>
<span id="cb35-51"><a href="#cb35-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Stage"</span></span>
<span id="cb35-52"><a href="#cb35-52" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb35-53"><a href="#cb35-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb35-54"><a href="#cb35-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-55"><a href="#cb35-55" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p31)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/business_plots-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p32)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/business_plots-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="tree-maps-and-hierarchical-plots" class="level2">
<h2 class="anchored" data-anchor-id="tree-maps-and-hierarchical-plots">17. Tree Maps and Hierarchical Plots</h2>
<p>Visualizing hierarchical data and proportional relationships.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Treemap simulation using rectangles</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>treemap_data <span class="ot">&lt;-</span> customer_data <span class="sc">%&gt;%</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(category, gender) <span class="sc">%&gt;%</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(category) <span class="sc">%&gt;%</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">category_total =</span> <span class="fu">sum</span>(n),</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">prop_in_category =</span> n <span class="sc">/</span> category_total,</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">category_prop =</span> category_total <span class="sc">/</span> <span class="fu">sum</span>(customer_data <span class="sc">%&gt;%</span> <span class="fu">count</span>(category) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(n))</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(category_total), <span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate rectangle positions</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">id =</span> <span class="fu">row_number</span>(),</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">xmin =</span> <span class="fu">case_when</span>(</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>      category <span class="sc">==</span> <span class="st">"Standard"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>      category <span class="sc">==</span> <span class="st">"Premium"</span> <span class="sc">~</span> <span class="fl">0.5</span>,</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>      category <span class="sc">==</span> <span class="st">"Basic"</span> <span class="sc">~</span> <span class="fl">0.75</span></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">xmax =</span> <span class="fu">case_when</span>(</span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>      category <span class="sc">==</span> <span class="st">"Standard"</span> <span class="sc">~</span> <span class="fl">0.5</span>,</span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>      category <span class="sc">==</span> <span class="st">"Premium"</span> <span class="sc">~</span> <span class="fl">0.75</span>,</span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>      category <span class="sc">==</span> <span class="st">"Basic"</span> <span class="sc">~</span> <span class="dv">1</span></span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">ymin =</span> <span class="fu">case_when</span>(</span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a>      gender <span class="sc">==</span> <span class="st">"Female"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a>      gender <span class="sc">==</span> <span class="st">"Male"</span> <span class="sc">~</span> <span class="fl">0.5</span>,</span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a>      gender <span class="sc">==</span> <span class="st">"Other"</span> <span class="sc">~</span> <span class="fl">0.8</span></span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">ymax =</span> <span class="fu">case_when</span>(</span>
<span id="cb37-31"><a href="#cb37-31" aria-hidden="true" tabindex="-1"></a>      gender <span class="sc">==</span> <span class="st">"Female"</span> <span class="sc">~</span> <span class="fl">0.5</span>,</span>
<span id="cb37-32"><a href="#cb37-32" aria-hidden="true" tabindex="-1"></a>      gender <span class="sc">==</span> <span class="st">"Male"</span> <span class="sc">~</span> <span class="fl">0.8</span>,</span>
<span id="cb37-33"><a href="#cb37-33" aria-hidden="true" tabindex="-1"></a>      gender <span class="sc">==</span> <span class="st">"Other"</span> <span class="sc">~</span> <span class="dv">1</span></span>
<span id="cb37-34"><a href="#cb37-34" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb37-35"><a href="#cb37-35" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb37-36"><a href="#cb37-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-37"><a href="#cb37-37" aria-hidden="true" tabindex="-1"></a>p33 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(treemap_data) <span class="sc">+</span></span>
<span id="cb37-38"><a href="#cb37-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> xmin, <span class="at">xmax =</span> xmax, <span class="at">ymin =</span> ymin, <span class="at">ymax =</span> ymax, </span>
<span id="cb37-39"><a href="#cb37-39" aria-hidden="true" tabindex="-1"></a>                <span class="at">fill =</span> category), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb37-40"><a href="#cb37-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x =</span> (xmin <span class="sc">+</span> xmax)<span class="sc">/</span><span class="dv">2</span>, <span class="at">y =</span> (ymin <span class="sc">+</span> ymax)<span class="sc">/</span><span class="dv">2</span>, </span>
<span id="cb37-41"><a href="#cb37-41" aria-hidden="true" tabindex="-1"></a>                <span class="at">label =</span> <span class="fu">paste0</span>(category, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, gender, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, n)), </span>
<span id="cb37-42"><a href="#cb37-42" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">family =</span> <span class="st">"source"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb37-43"><a href="#cb37-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb37-44"><a href="#cb37-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb37-45"><a href="#cb37-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Customer Segment Treemap"</span>,</span>
<span id="cb37-46"><a href="#cb37-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Hierarchical view of category and gender distribution"</span></span>
<span id="cb37-47"><a href="#cb37-47" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb37-48"><a href="#cb37-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb37-49"><a href="#cb37-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb37-50"><a href="#cb37-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb37-51"><a href="#cb37-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"playfair"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.6</span>), <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>),</span>
<span id="cb37-52"><a href="#cb37-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"source"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.1</span>), <span class="at">color =</span> <span class="st">"#7F8C8D"</span>)</span>
<span id="cb37-53"><a href="#cb37-53" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb37-54"><a href="#cb37-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-55"><a href="#cb37-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Sunburst chart simulation</span></span>
<span id="cb37-56"><a href="#cb37-56" aria-hidden="true" tabindex="-1"></a>sunburst_data <span class="ot">&lt;-</span> customer_data <span class="sc">%&gt;%</span></span>
<span id="cb37-57"><a href="#cb37-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">satisfaction_group =</span> <span class="fu">ifelse</span>(satisfaction <span class="sc">&gt;</span> <span class="dv">7</span>, <span class="st">"High"</span>, <span class="st">"Low"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb37-58"><a href="#cb37-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(category, gender, satisfaction_group) <span class="sc">%&gt;%</span></span>
<span id="cb37-59"><a href="#cb37-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb37-60"><a href="#cb37-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">angle_start =</span> <span class="fu">cumsum</span>(<span class="fu">lag</span>(n, <span class="at">default =</span> <span class="dv">0</span>)) <span class="sc">/</span> <span class="fu">sum</span>(n) <span class="sc">*</span> <span class="dv">2</span> <span class="sc">*</span> pi,</span>
<span id="cb37-61"><a href="#cb37-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">angle_end =</span> <span class="fu">cumsum</span>(n) <span class="sc">/</span> <span class="fu">sum</span>(n) <span class="sc">*</span> <span class="dv">2</span> <span class="sc">*</span> pi,</span>
<span id="cb37-62"><a href="#cb37-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">angle_mid =</span> (angle_start <span class="sc">+</span> angle_end) <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb37-63"><a href="#cb37-63" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb37-64"><a href="#cb37-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-65"><a href="#cb37-65" aria-hidden="true" tabindex="-1"></a>p34 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sunburst_data) <span class="sc">+</span></span>
<span id="cb37-66"><a href="#cb37-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> <span class="dv">1</span>, <span class="at">xmax =</span> <span class="dv">2</span>, </span>
<span id="cb37-67"><a href="#cb37-67" aria-hidden="true" tabindex="-1"></a>                <span class="at">ymin =</span> angle_start, <span class="at">ymax =</span> angle_end, </span>
<span id="cb37-68"><a href="#cb37-68" aria-hidden="true" tabindex="-1"></a>                <span class="at">fill =</span> category), <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb37-69"><a href="#cb37-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> <span class="dv">2</span>, <span class="at">xmax =</span> <span class="dv">3</span>,</span>
<span id="cb37-70"><a href="#cb37-70" aria-hidden="true" tabindex="-1"></a>                <span class="at">ymin =</span> angle_start, <span class="at">ymax =</span> angle_end,</span>
<span id="cb37-71"><a href="#cb37-71" aria-hidden="true" tabindex="-1"></a>                <span class="at">fill =</span> gender), <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb37-72"><a href="#cb37-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>, <span class="st">"#6A0572"</span>, <span class="st">"#AB0E86"</span>, <span class="st">"#263238"</span>)) <span class="sc">+</span></span>
<span id="cb37-73"><a href="#cb37-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb37-74"><a href="#cb37-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb37-75"><a href="#cb37-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb37-76"><a href="#cb37-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Customer Hierarchy Sunburst"</span>,</span>
<span id="cb37-77"><a href="#cb37-77" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Multi-level categorical breakdown"</span></span>
<span id="cb37-78"><a href="#cb37-78" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb37-79"><a href="#cb37-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb37-80"><a href="#cb37-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb37-81"><a href="#cb37-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-82"><a href="#cb37-82" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p33)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/treemap_hierarchical-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p34)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/treemap_hierarchical-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="time-series-decomposition-and-calendar-plots" class="level2">
<h2 class="anchored" data-anchor-id="time-series-decomposition-and-calendar-plots">18. Time Series Decomposition and Calendar Plots</h2>
<p>Advanced time-based visualizations.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calendar heatmap simulation</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>calendar_data <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">week =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">52</span>,</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">weekday =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">date =</span> <span class="fu">as.Date</span>(<span class="st">"2024-01-01"</span>) <span class="sc">+</span> (week <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">*</span> <span class="dv">7</span> <span class="sc">+</span> (weekday <span class="sc">-</span> <span class="dv">1</span>),</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">sin</span>(week <span class="sc">*</span> <span class="fl">0.1</span>) <span class="sc">*</span> <span class="dv">100</span> <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="fu">n</span>(), <span class="dv">0</span>, <span class="dv">20</span>) <span class="sc">+</span> <span class="dv">500</span>,</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">month =</span> <span class="fu">format</span>(date, <span class="st">"%b"</span>)</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(date <span class="sc">&lt;=</span> <span class="fu">as.Date</span>(<span class="st">"2024-12-31"</span>))</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>p35 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(calendar_data, <span class="fu">aes</span>(<span class="at">x =</span> weekday, <span class="at">y =</span> week, <span class="at">fill =</span> value)) <span class="sc">+</span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(</span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"#1A1A2E"</span>, </span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid =</span> <span class="st">"#533A71"</span>, </span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"#AB0E86"</span>,</span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">midpoint =</span> <span class="dv">500</span>,</span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Activity"</span></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Mon"</span>, <span class="st">"Tue"</span>, <span class="st">"Wed"</span>, <span class="st">"Thu"</span>, <span class="st">"Fri"</span>, <span class="st">"Sat"</span>, <span class="st">"Sun"</span>)) <span class="sc">+</span></span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_reverse</span>() <span class="sc">+</span></span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Annual Activity Calendar Heatmap"</span>,</span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Daily activity levels throughout 2024"</span>,</span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Day of Week"</span>,</span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Week of Year"</span></span>
<span id="cb39-29"><a href="#cb39-29" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb39-30"><a href="#cb39-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb39-31"><a href="#cb39-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb39-32"><a href="#cb39-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb39-33"><a href="#cb39-33" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb39-34"><a href="#cb39-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-35"><a href="#cb39-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Time series decomposition plot</span></span>
<span id="cb39-36"><a href="#cb39-36" aria-hidden="true" tabindex="-1"></a>decomp_data <span class="ot">&lt;-</span> time_series_data <span class="sc">%&gt;%</span></span>
<span id="cb39-37"><a href="#cb39-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb39-38"><a href="#cb39-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">seasonal =</span> <span class="dv">50</span> <span class="sc">*</span> <span class="fu">sin</span>(<span class="dv">2</span> <span class="sc">*</span> pi <span class="sc">*</span> <span class="fu">as.numeric</span>(date <span class="sc">-</span> <span class="fu">min</span>(date)) <span class="sc">/</span> <span class="fl">365.25</span>),</span>
<span id="cb39-39"><a href="#cb39-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">trend_component =</span> trend,</span>
<span id="cb39-40"><a href="#cb39-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">noise =</span> value <span class="sc">-</span> trend <span class="sc">-</span> seasonal,</span>
<span id="cb39-41"><a href="#cb39-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">reconstructed =</span> trend_component <span class="sc">+</span> seasonal <span class="sc">+</span> noise</span>
<span id="cb39-42"><a href="#cb39-42" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb39-43"><a href="#cb39-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(date, value, trend_component, seasonal, noise) <span class="sc">%&gt;%</span></span>
<span id="cb39-44"><a href="#cb39-44" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>date, <span class="at">names_to =</span> <span class="st">"component"</span>, <span class="at">values_to =</span> <span class="st">"val"</span>)</span>
<span id="cb39-45"><a href="#cb39-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-46"><a href="#cb39-46" aria-hidden="true" tabindex="-1"></a>p36 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(decomp_data, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> val)) <span class="sc">+</span></span>
<span id="cb39-47"><a href="#cb39-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"#1A1A2E"</span>, <span class="at">size =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb39-48"><a href="#cb39-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>component, <span class="at">scales =</span> <span class="st">"free_y"</span>, <span class="at">ncol =</span> <span class="dv">1</span>, </span>
<span id="cb39-49"><a href="#cb39-49" aria-hidden="true" tabindex="-1"></a>             <span class="at">labeller =</span> <span class="fu">labeller</span>(<span class="at">component =</span> <span class="fu">c</span>(</span>
<span id="cb39-50"><a href="#cb39-50" aria-hidden="true" tabindex="-1"></a>               <span class="st">"value"</span> <span class="ot">=</span> <span class="st">"Original Series"</span>,</span>
<span id="cb39-51"><a href="#cb39-51" aria-hidden="true" tabindex="-1"></a>               <span class="st">"trend_component"</span> <span class="ot">=</span> <span class="st">"Trend"</span>,</span>
<span id="cb39-52"><a href="#cb39-52" aria-hidden="true" tabindex="-1"></a>               <span class="st">"seasonal"</span> <span class="ot">=</span> <span class="st">"Seasonal"</span>,</span>
<span id="cb39-53"><a href="#cb39-53" aria-hidden="true" tabindex="-1"></a>               <span class="st">"noise"</span> <span class="ot">=</span> <span class="st">"Residuals"</span></span>
<span id="cb39-54"><a href="#cb39-54" aria-hidden="true" tabindex="-1"></a>             ))) <span class="sc">+</span></span>
<span id="cb39-55"><a href="#cb39-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_labels =</span> <span class="st">"%Y"</span>, <span class="at">date_breaks =</span> <span class="st">"1 year"</span>) <span class="sc">+</span></span>
<span id="cb39-56"><a href="#cb39-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb39-57"><a href="#cb39-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Time Series Decomposition"</span>,</span>
<span id="cb39-58"><a href="#cb39-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Breaking down the signal into components"</span>,</span>
<span id="cb39-59"><a href="#cb39-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb39-60"><a href="#cb39-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Value"</span></span>
<span id="cb39-61"><a href="#cb39-61" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb39-62"><a href="#cb39-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>))</span>
<span id="cb39-63"><a href="#cb39-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-64"><a href="#cb39-64" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p35)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/time_series_advanced-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p36)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/time_series_advanced-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="d-style-and-perspective-plots" class="level2">
<h2 class="anchored" data-anchor-id="d-style-and-perspective-plots">19. 3D-Style and Perspective Plots</h2>
<p>Creating depth and dimension in 2D visualizations.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3D-style surface plot using contours and fills</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>surface_data <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">3</span>, <span class="dv">3</span>, <span class="fl">0.2</span>),</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">3</span>, <span class="dv">3</span>, <span class="fl">0.2</span>)</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">z =</span> <span class="fu">sin</span>(<span class="fu">sqrt</span>(x<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> y<span class="sc">^</span><span class="dv">2</span>)) <span class="sc">*</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fu">sqrt</span>(x<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> y<span class="sc">^</span><span class="dv">2</span>)<span class="sc">/</span><span class="dv">3</span>),</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">z_group =</span> <span class="fu">cut</span>(z, <span class="at">breaks =</span> <span class="dv">10</span>)</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>p37 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(surface_data, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> z)) <span class="sc">+</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_contour</span>(<span class="fu">aes</span>(<span class="at">z =</span> z), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(</span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"#1A1A2E"</span>, </span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid =</span> <span class="st">"#533A71"</span>, </span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"#AB0E86"</span>,</span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Elevation"</span></span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"3D Surface Visualization"</span>,</span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Simulated topographic map with contour lines"</span>,</span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"X Coordinate"</span>,</span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Y Coordinate"</span></span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>()</span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Isometric-style plot</span></span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true" tabindex="-1"></a>iso_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb41-30"><a href="#cb41-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">each =</span> <span class="dv">10</span>),</span>
<span id="cb41-31"><a href="#cb41-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">10</span>),</span>
<span id="cb41-32"><a href="#cb41-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">height =</span> <span class="fu">rpois</span>(<span class="dv">100</span>, <span class="at">lambda =</span> <span class="dv">5</span>)</span>
<span id="cb41-33"><a href="#cb41-33" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb41-34"><a href="#cb41-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb41-35"><a href="#cb41-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create isometric transformation</span></span>
<span id="cb41-36"><a href="#cb41-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">iso_x =</span> x <span class="sc">+</span> y <span class="sc">*</span> <span class="fl">0.5</span>,</span>
<span id="cb41-37"><a href="#cb41-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">iso_y =</span> y <span class="sc">*</span> <span class="fl">0.866</span> <span class="sc">+</span> height <span class="sc">*</span> <span class="fl">0.5</span>,</span>
<span id="cb41-38"><a href="#cb41-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">height_group =</span> <span class="fu">cut</span>(height, <span class="at">breaks =</span> <span class="dv">5</span>)</span>
<span id="cb41-39"><a href="#cb41-39" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb41-40"><a href="#cb41-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-41"><a href="#cb41-41" aria-hidden="true" tabindex="-1"></a>p38 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(iso_data, <span class="fu">aes</span>(<span class="at">x =</span> iso_x, <span class="at">y =</span> iso_y)) <span class="sc">+</span></span>
<span id="cb41-42"><a href="#cb41-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> height, <span class="at">size =</span> height), <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb41-43"><a href="#cb41-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">xend =</span> iso_x, <span class="at">yend =</span> iso_y <span class="sc">-</span> height <span class="sc">*</span> <span class="fl">0.5</span>), </span>
<span id="cb41-44"><a href="#cb41-44" aria-hidden="true" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb41-45"><a href="#cb41-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient2</span>(</span>
<span id="cb41-46"><a href="#cb41-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"#1A1A2E"</span>, </span>
<span id="cb41-47"><a href="#cb41-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid =</span> <span class="st">"#533A71"</span>, </span>
<span id="cb41-48"><a href="#cb41-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"#AB0E86"</span>,</span>
<span id="cb41-49"><a href="#cb41-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Height"</span></span>
<span id="cb41-50"><a href="#cb41-50" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb41-51"><a href="#cb41-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">8</span>), <span class="at">guide =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb41-52"><a href="#cb41-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb41-53"><a href="#cb41-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Isometric Data Visualization"</span>,</span>
<span id="cb41-54"><a href="#cb41-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"3D perspective of categorical data points"</span>,</span>
<span id="cb41-55"><a href="#cb41-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Isometric X"</span>,</span>
<span id="cb41-56"><a href="#cb41-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Isometric Y"</span></span>
<span id="cb41-57"><a href="#cb41-57" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb41-58"><a href="#cb41-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb41-59"><a href="#cb41-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb41-60"><a href="#cb41-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>()</span>
<span id="cb41-61"><a href="#cb41-61" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb41-62"><a href="#cb41-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-63"><a href="#cb41-63" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p37)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/perspective_3d-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p38)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/perspective_3d-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="animated-style-and-motion-plots" class="level2">
<h2 class="anchored" data-anchor-id="animated-style-and-motion-plots">20. Animated-Style and Motion Plots</h2>
<p>Visualizations that suggest movement and change over time.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Comet plot (showing trajectory with fading trail)</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>trajectory_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">time =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>,</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">cumsum</span>(<span class="fu">rnorm</span>(<span class="dv">50</span>, <span class="dv">0</span>, <span class="dv">1</span>)),</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">cumsum</span>(<span class="fu">rnorm</span>(<span class="dv">50</span>, <span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha_trail =</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fl">0.2</span> <span class="sc">*</span> (<span class="fu">max</span>(time) <span class="sc">-</span> time)),</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">size_trail =</span> <span class="fu">pmax</span>(<span class="dv">1</span>, <span class="dv">10</span> <span class="sc">*</span> alpha_trail)</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>p39 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(trajectory_data, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y)) <span class="sc">+</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">color =</span> <span class="st">"#533A71"</span>, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">alpha =</span> alpha_trail, <span class="at">size =</span> size_trail), </span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"#1A1A2E"</span>) <span class="sc">+</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> trajectory_data[<span class="fu">nrow</span>(trajectory_data), ], </span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"#AB0E86"</span>, <span class="at">size =</span> <span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_alpha_identity</span>() <span class="sc">+</span></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_identity</span>() <span class="sc">+</span></span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Trajectory Comet Plot"</span>,</span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Path visualization with fading trail effect"</span>,</span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"X Position"</span>,</span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Y Position"</span></span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>()</span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Wind rose / directional plot</span></span>
<span id="cb43-29"><a href="#cb43-29" aria-hidden="true" tabindex="-1"></a>wind_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb43-30"><a href="#cb43-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">direction =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">359</span>, <span class="at">by =</span> <span class="dv">10</span>),</span>
<span id="cb43-31"><a href="#cb43-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">speed =</span> <span class="fu">abs</span>(<span class="fu">rnorm</span>(<span class="dv">36</span>, <span class="dv">15</span>, <span class="dv">5</span>)),</span>
<span id="cb43-32"><a href="#cb43-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">category =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"Light"</span>, <span class="st">"Moderate"</span>, <span class="st">"Strong"</span>), <span class="dv">36</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb43-33"><a href="#cb43-33" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb43-34"><a href="#cb43-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb43-35"><a href="#cb43-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">direction_rad =</span> direction <span class="sc">*</span> pi <span class="sc">/</span> <span class="dv">180</span>,</span>
<span id="cb43-36"><a href="#cb43-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> speed <span class="sc">*</span> <span class="fu">cos</span>(direction_rad),</span>
<span id="cb43-37"><a href="#cb43-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> speed <span class="sc">*</span> <span class="fu">sin</span>(direction_rad)</span>
<span id="cb43-38"><a href="#cb43-38" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb43-39"><a href="#cb43-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-40"><a href="#cb43-40" aria-hidden="true" tabindex="-1"></a>p40 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(wind_data, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y)) <span class="sc">+</span></span>
<span id="cb43-41"><a href="#cb43-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_spoke</span>(<span class="fu">aes</span>(<span class="at">angle =</span> direction_rad, <span class="at">radius =</span> speed, <span class="at">color =</span> category), </span>
<span id="cb43-42"><a href="#cb43-42" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb43-43"><a href="#cb43-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> category, <span class="at">size =</span> speed), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb43-44"><a href="#cb43-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#AB0E86"</span>)) <span class="sc">+</span></span>
<span id="cb43-45"><a href="#cb43-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">6</span>), <span class="at">guide =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb43-46"><a href="#cb43-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span></span>
<span id="cb43-47"><a href="#cb43-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb43-48"><a href="#cb43-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Wind Rose Directional Plot"</span>,</span>
<span id="cb43-49"><a href="#cb43-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Direction and magnitude visualization"</span>,</span>
<span id="cb43-50"><a href="#cb43-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"East-West Component"</span>,</span>
<span id="cb43-51"><a href="#cb43-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"North-South Component"</span>,</span>
<span id="cb43-52"><a href="#cb43-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Wind Category"</span></span>
<span id="cb43-53"><a href="#cb43-53" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb43-54"><a href="#cb43-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb43-55"><a href="#cb43-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb43-56"><a href="#cb43-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>()</span>
<span id="cb43-57"><a href="#cb43-57" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb43-58"><a href="#cb43-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-59"><a href="#cb43-59" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p39)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/motion_plots-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p40)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/motion_plots-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="mathematical-and-scientific-plots" class="level2">
<h2 class="anchored" data-anchor-id="mathematical-and-scientific-plots">21. Mathematical and Scientific Plots</h2>
<p>Specialized visualizations for mathematical and scientific data.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Phase space plot</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>phase_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">t =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">4</span><span class="sc">*</span>pi, <span class="fl">0.1</span>)</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">sin</span>(t) <span class="sc">+</span> <span class="fl">0.1</span> <span class="sc">*</span> <span class="fu">sin</span>(<span class="dv">10</span><span class="sc">*</span>t),</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">cos</span>(t) <span class="sc">+</span> <span class="fl">0.1</span> <span class="sc">*</span> <span class="fu">cos</span>(<span class="dv">10</span><span class="sc">*</span>t),</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">velocity_x =</span> <span class="fu">lead</span>(x) <span class="sc">-</span> x,</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">velocity_y =</span> <span class="fu">lead</span>(y) <span class="sc">-</span> y,</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">speed =</span> <span class="fu">sqrt</span>(velocity_x<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> velocity_y<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(speed))</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>p41 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(phase_data, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y)) <span class="sc">+</span></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="fu">aes</span>(<span class="at">color =</span> speed), <span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> phase_data[<span class="dv">1</span>, ], <span class="at">color =</span> <span class="st">"#1A1A2E"</span>, <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> phase_data[<span class="fu">nrow</span>(phase_data), ], <span class="at">color =</span> <span class="st">"#AB0E86"</span>, <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient2</span>(</span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"#1A1A2E"</span>, </span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid =</span> <span class="st">"#533A71"</span>, </span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"#AB0E86"</span>,</span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Speed"</span></span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Phase Space Trajectory"</span>,</span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Position vs velocity in state space"</span>,</span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Position X"</span>,</span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Position Y"</span></span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb45-30"><a href="#cb45-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>()</span>
<span id="cb45-31"><a href="#cb45-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-32"><a href="#cb45-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Mandelbrot-style fractal visualization</span></span>
<span id="cb45-33"><a href="#cb45-33" aria-hidden="true" tabindex="-1"></a>fractal_data <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb45-34"><a href="#cb45-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>, <span class="fl">0.05</span>),</span>
<span id="cb45-35"><a href="#cb45-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>, <span class="fl">0.05</span>)</span>
<span id="cb45-36"><a href="#cb45-36" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb45-37"><a href="#cb45-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb45-38"><a href="#cb45-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Simplified fractal calculation</span></span>
<span id="cb45-39"><a href="#cb45-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">c_real =</span> x,</span>
<span id="cb45-40"><a href="#cb45-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">c_imag =</span> y,</span>
<span id="cb45-41"><a href="#cb45-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">iterations =</span> <span class="fu">pmin</span>(<span class="dv">20</span>, <span class="fu">abs</span>(x<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> y<span class="sc">^</span><span class="dv">2</span>) <span class="sc">*</span> <span class="dv">10</span>),</span>
<span id="cb45-42"><a href="#cb45-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">fractal_value =</span> iterations <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="fu">n</span>(), <span class="dv">0</span>, <span class="fl">0.5</span>)</span>
<span id="cb45-43"><a href="#cb45-43" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-44"><a href="#cb45-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-45"><a href="#cb45-45" aria-hidden="true" tabindex="-1"></a>p42 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(fractal_data, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> fractal_value)) <span class="sc">+</span></span>
<span id="cb45-46"><a href="#cb45-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb45-47"><a href="#cb45-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(</span>
<span id="cb45-48"><a href="#cb45-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"#1A1A2E"</span>, </span>
<span id="cb45-49"><a href="#cb45-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid =</span> <span class="st">"#533A71"</span>, </span>
<span id="cb45-50"><a href="#cb45-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"#AB0E86"</span>,</span>
<span id="cb45-51"><a href="#cb45-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Iterations"</span></span>
<span id="cb45-52"><a href="#cb45-52" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb45-53"><a href="#cb45-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb45-54"><a href="#cb45-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Fractal-Style Visualization"</span>,</span>
<span id="cb45-55"><a href="#cb45-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Mathematical pattern visualization"</span>,</span>
<span id="cb45-56"><a href="#cb45-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Real Component"</span>,</span>
<span id="cb45-57"><a href="#cb45-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Imaginary Component"</span></span>
<span id="cb45-58"><a href="#cb45-58" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb45-59"><a href="#cb45-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span></span>
<span id="cb45-60"><a href="#cb45-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb45-61"><a href="#cb45-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb45-62"><a href="#cb45-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>()</span>
<span id="cb45-63"><a href="#cb45-63" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb45-64"><a href="#cb45-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-65"><a href="#cb45-65" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p41)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/mathematical_plots-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p42)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/mathematical_plots-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="geographic-and-spatial-plots" class="level2">
<h2 class="anchored" data-anchor-id="geographic-and-spatial-plots">22. Geographic and Spatial Plots</h2>
<p>Advanced spatial visualization techniques.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Hexagonal binning for spatial data</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>spatial_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">longitude =</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="sc">-</span><span class="dv">74</span>, <span class="fl">0.1</span>),</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">latitude =</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="fl">40.7</span>, <span class="fl">0.1</span>),</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">rpois</span>(<span class="dv">1000</span>, <span class="dv">5</span>)</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>p43 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(spatial_data, <span class="fu">aes</span>(<span class="at">x =</span> longitude, <span class="at">y =</span> latitude)) <span class="sc">+</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hex</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">after_stat</span>(count)), <span class="at">bins =</span> <span class="dv">20</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"#1A1A2E"</span>, </span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid =</span> <span class="st">"#533A71"</span>, </span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"#AB0E86"</span>,</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Density"</span></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Hexagonal Spatial Binning"</span>,</span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Geographic density visualization"</span>,</span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Longitude"</span>,</span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Latitude"</span></span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>()</span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Voronoi diagram simulation</span></span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a>voronoi_seeds <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">runif</span>(<span class="dv">15</span>, <span class="dv">0</span>, <span class="dv">10</span>),</span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">runif</span>(<span class="dv">15</span>, <span class="dv">0</span>, <span class="dv">10</span>),</span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">category =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>), <span class="dv">15</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb47-30"><a href="#cb47-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-31"><a href="#cb47-31" aria-hidden="true" tabindex="-1"></a>voronoi_grid <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb47-32"><a href="#cb47-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="fl">0.2</span>),</span>
<span id="cb47-33"><a href="#cb47-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="fl">0.2</span>)</span>
<span id="cb47-34"><a href="#cb47-34" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb47-35"><a href="#cb47-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb47-36"><a href="#cb47-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb47-37"><a href="#cb47-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">distances =</span> <span class="fu">list</span>(<span class="fu">sqrt</span>((x <span class="sc">-</span> voronoi_seeds<span class="sc">$</span>x)<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> (y <span class="sc">-</span> voronoi_seeds<span class="sc">$</span>y)<span class="sc">^</span><span class="dv">2</span>)),</span>
<span id="cb47-38"><a href="#cb47-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">nearest_seed =</span> <span class="fu">which.min</span>(<span class="fu">unlist</span>(distances)),</span>
<span id="cb47-39"><a href="#cb47-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">category =</span> voronoi_seeds<span class="sc">$</span>category[nearest_seed]</span>
<span id="cb47-40"><a href="#cb47-40" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb47-41"><a href="#cb47-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb47-42"><a href="#cb47-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-43"><a href="#cb47-43" aria-hidden="true" tabindex="-1"></a>p44 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(voronoi_grid, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> category)) <span class="sc">+</span></span>
<span id="cb47-44"><a href="#cb47-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb47-45"><a href="#cb47-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> voronoi_seeds, <span class="fu">aes</span>(<span class="at">color =</span> category), </span>
<span id="cb47-46"><a href="#cb47-46" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">4</span>, <span class="at">shape =</span> <span class="dv">21</span>, <span class="at">fill =</span> <span class="st">"white"</span>, <span class="at">stroke =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb47-47"><a href="#cb47-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb47-48"><a href="#cb47-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb47-49"><a href="#cb47-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb47-50"><a href="#cb47-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Voronoi Diagram Visualization"</span>,</span>
<span id="cb47-51"><a href="#cb47-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Spatial territory and influence mapping"</span>,</span>
<span id="cb47-52"><a href="#cb47-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"X Coordinate"</span>,</span>
<span id="cb47-53"><a href="#cb47-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Y Coordinate"</span>,</span>
<span id="cb47-54"><a href="#cb47-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Territory"</span>,</span>
<span id="cb47-55"><a href="#cb47-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Seed Points"</span></span>
<span id="cb47-56"><a href="#cb47-56" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb47-57"><a href="#cb47-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span></span>
<span id="cb47-58"><a href="#cb47-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb47-59"><a href="#cb47-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-60"><a href="#cb47-60" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p43)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/spatial_plots-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p44)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/spatial_plots-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="advanced-statistical-and-ml-plots" class="level2">
<h2 class="anchored" data-anchor-id="advanced-statistical-and-ml-plots">23. Advanced Statistical and ML Plots</h2>
<p>Machine learning and advanced statistical visualizations.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Decision boundary visualization</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>ml_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">x1 =</span> <span class="fu">rnorm</span>(<span class="dv">200</span>),</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">x2 =</span> <span class="fu">rnorm</span>(<span class="dv">200</span>)</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">ifelse</span>(x1<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> x2<span class="sc">^</span><span class="dv">2</span> <span class="sc">&gt;</span> <span class="fl">1.5</span>, <span class="st">"Class_A"</span>, <span class="st">"Class_B"</span>),</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">predicted =</span> <span class="fu">ifelse</span>(x1<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> x2<span class="sc">^</span><span class="dv">2</span> <span class="sc">&gt;</span> <span class="fl">1.3</span>, <span class="st">"Class_A"</span>, <span class="st">"Class_B"</span>),</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">correct =</span> y <span class="sc">==</span> predicted</span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Create decision boundary grid</span></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>boundary_grid <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">x1 =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">3</span>, <span class="dv">3</span>, <span class="fl">0.1</span>),</span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">x2 =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">3</span>, <span class="dv">3</span>, <span class="fl">0.1</span>)</span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">boundary_value =</span> x1<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> x2<span class="sc">^</span><span class="dv">2</span>,</span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">decision =</span> <span class="fu">ifelse</span>(boundary_value <span class="sc">&gt;</span> <span class="fl">1.3</span>, <span class="st">"Class_A"</span>, <span class="st">"Class_B"</span>)</span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a>p45 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb49-24"><a href="#cb49-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">data =</span> boundary_grid, <span class="fu">aes</span>(<span class="at">x =</span> x1, <span class="at">y =</span> x2, <span class="at">fill =</span> decision), <span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb49-25"><a href="#cb49-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> ml_data, <span class="fu">aes</span>(<span class="at">x =</span> x1, <span class="at">y =</span> x2, <span class="at">color =</span> y, <span class="at">shape =</span> correct), </span>
<span id="cb49-26"><a href="#cb49-26" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb49-27"><a href="#cb49-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_contour</span>(<span class="at">data =</span> boundary_grid, <span class="fu">aes</span>(<span class="at">x =</span> x1, <span class="at">y =</span> x2, <span class="at">z =</span> boundary_value), </span>
<span id="cb49-28"><a href="#cb49-28" aria-hidden="true" tabindex="-1"></a>               <span class="at">breaks =</span> <span class="fl">1.3</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb49-29"><a href="#cb49-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Class_A"</span> <span class="ot">=</span> <span class="st">"#1A1A2E"</span>, <span class="st">"Class_B"</span> <span class="ot">=</span> <span class="st">"#533A71"</span>)) <span class="sc">+</span></span>
<span id="cb49-30"><a href="#cb49-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Class_A"</span> <span class="ot">=</span> <span class="st">"#1A1A2E"</span>, <span class="st">"Class_B"</span> <span class="ot">=</span> <span class="st">"#533A71"</span>)) <span class="sc">+</span></span>
<span id="cb49-31"><a href="#cb49-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_shape_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"TRUE"</span> <span class="ot">=</span> <span class="dv">16</span>, <span class="st">"FALSE"</span> <span class="ot">=</span> <span class="dv">4</span>)) <span class="sc">+</span></span>
<span id="cb49-32"><a href="#cb49-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb49-33"><a href="#cb49-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Machine Learning Decision Boundary"</span>,</span>
<span id="cb49-34"><a href="#cb49-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Classification visualization with prediction accuracy"</span>,</span>
<span id="cb49-35"><a href="#cb49-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Feature 1"</span>,</span>
<span id="cb49-36"><a href="#cb49-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Feature 2"</span>,</span>
<span id="cb49-37"><a href="#cb49-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"True Class"</span>,</span>
<span id="cb49-38"><a href="#cb49-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Predicted Region"</span>,</span>
<span id="cb49-39"><a href="#cb49-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">shape =</span> <span class="st">"Correct Prediction"</span></span>
<span id="cb49-40"><a href="#cb49-40" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb49-41"><a href="#cb49-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>()</span>
<span id="cb49-42"><a href="#cb49-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-43"><a href="#cb49-43" aria-hidden="true" tabindex="-1"></a><span class="co"># ROC Curve simulation</span></span>
<span id="cb49-44"><a href="#cb49-44" aria-hidden="true" tabindex="-1"></a>roc_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb49-45"><a href="#cb49-45" aria-hidden="true" tabindex="-1"></a>  <span class="at">threshold =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.01</span>)</span>
<span id="cb49-46"><a href="#cb49-46" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb49-47"><a href="#cb49-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb49-48"><a href="#cb49-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">tpr =</span> <span class="dv">1</span> <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fu">qnorm</span>(<span class="dv">1</span> <span class="sc">-</span> threshold) <span class="sc">-</span> <span class="dv">1</span>),  <span class="co"># True Positive Rate</span></span>
<span id="cb49-49"><a href="#cb49-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">fpr =</span> <span class="dv">1</span> <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fu">qnorm</span>(<span class="dv">1</span> <span class="sc">-</span> threshold)),      <span class="co"># False Positive Rate</span></span>
<span id="cb49-50"><a href="#cb49-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">model =</span> <span class="st">"Model A"</span></span>
<span id="cb49-51"><a href="#cb49-51" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb49-52"><a href="#cb49-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(</span>
<span id="cb49-53"><a href="#cb49-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data.frame</span>(</span>
<span id="cb49-54"><a href="#cb49-54" aria-hidden="true" tabindex="-1"></a>      <span class="at">threshold =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.01</span>)</span>
<span id="cb49-55"><a href="#cb49-55" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb49-56"><a href="#cb49-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb49-57"><a href="#cb49-57" aria-hidden="true" tabindex="-1"></a>      <span class="at">tpr =</span> <span class="dv">1</span> <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fu">qnorm</span>(<span class="dv">1</span> <span class="sc">-</span> threshold) <span class="sc">-</span> <span class="fl">0.5</span>),</span>
<span id="cb49-58"><a href="#cb49-58" aria-hidden="true" tabindex="-1"></a>      <span class="at">fpr =</span> <span class="dv">1</span> <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fu">qnorm</span>(<span class="dv">1</span> <span class="sc">-</span> threshold) <span class="sc">+</span> <span class="fl">0.5</span>),</span>
<span id="cb49-59"><a href="#cb49-59" aria-hidden="true" tabindex="-1"></a>      <span class="at">model =</span> <span class="st">"Model B"</span></span>
<span id="cb49-60"><a href="#cb49-60" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb49-61"><a href="#cb49-61" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-62"><a href="#cb49-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-63"><a href="#cb49-63" aria-hidden="true" tabindex="-1"></a>p46 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(roc_data, <span class="fu">aes</span>(<span class="at">x =</span> fpr, <span class="at">y =</span> tpr, <span class="at">color =</span> model)) <span class="sc">+</span></span>
<span id="cb49-64"><a href="#cb49-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb49-65"><a href="#cb49-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, </span>
<span id="cb49-66"><a href="#cb49-66" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">"#95A5A6"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb49-67"><a href="#cb49-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> fpr, <span class="at">ymax =</span> tpr, <span class="at">fill =</span> model), <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb49-68"><a href="#cb49-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>)) <span class="sc">+</span></span>
<span id="cb49-69"><a href="#cb49-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>)) <span class="sc">+</span></span>
<span id="cb49-70"><a href="#cb49-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb49-71"><a href="#cb49-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb49-72"><a href="#cb49-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb49-73"><a href="#cb49-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"ROC Curve Comparison"</span>,</span>
<span id="cb49-74"><a href="#cb49-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Model performance visualization"</span>,</span>
<span id="cb49-75"><a href="#cb49-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"False Positive Rate"</span>,</span>
<span id="cb49-76"><a href="#cb49-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"True Positive Rate"</span>,</span>
<span id="cb49-77"><a href="#cb49-77" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Model"</span>,</span>
<span id="cb49-78"><a href="#cb49-78" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"AUC Area"</span></span>
<span id="cb49-79"><a href="#cb49-79" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb49-80"><a href="#cb49-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>()</span>
<span id="cb49-81"><a href="#cb49-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-82"><a href="#cb49-82" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p45)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/ml_statistical_plots-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p46)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/ml_statistical_plots-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="financial-and-economic-plots" class="level2">
<h2 class="anchored" data-anchor-id="financial-and-economic-plots">24. Financial and Economic Plots</h2>
<p>Specialized visualizations for financial and economic data.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Candlestick chart simulation</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>candlestick_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">date =</span> <span class="fu">seq</span>(<span class="fu">as.Date</span>(<span class="st">"2024-01-01"</span>), <span class="at">by =</span> <span class="st">"day"</span>, <span class="at">length.out =</span> <span class="dv">30</span>)</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">open =</span> <span class="dv">100</span> <span class="sc">+</span> <span class="fu">cumsum</span>(<span class="fu">rnorm</span>(<span class="dv">30</span>, <span class="dv">0</span>, <span class="dv">1</span>)),</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">close =</span> open <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">30</span>, <span class="fl">0.5</span>, <span class="dv">2</span>),</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="fu">pmax</span>(open, close) <span class="sc">+</span> <span class="fu">abs</span>(<span class="fu">rnorm</span>(<span class="dv">30</span>, <span class="dv">0</span>, <span class="dv">1</span>)),</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="fu">pmin</span>(open, close) <span class="sc">-</span> <span class="fu">abs</span>(<span class="fu">rnorm</span>(<span class="dv">30</span>, <span class="dv">0</span>, <span class="dv">1</span>)),</span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">direction =</span> <span class="fu">ifelse</span>(close <span class="sc">&gt;</span> open, <span class="st">"Up"</span>, <span class="st">"Down"</span>)</span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>p47 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(candlestick_data, <span class="fu">aes</span>(<span class="at">x =</span> date)) <span class="sc">+</span></span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">y =</span> low, <span class="at">yend =</span> high), <span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">y =</span> open, <span class="at">yend =</span> close, <span class="at">color =</span> direction), <span class="at">size =</span> <span class="dv">4</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Up"</span> <span class="ot">=</span> <span class="st">"#533A71"</span>, <span class="st">"Down"</span> <span class="ot">=</span> <span class="st">"#6A0572"</span>)) <span class="sc">+</span></span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_labels =</span> <span class="st">"%b %d"</span>, <span class="at">date_breaks =</span> <span class="st">"5 days"</span>) <span class="sc">+</span></span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Financial Candlestick Chart"</span>,</span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"OHLC price visualization"</span>,</span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Price"</span>,</span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Direction"</span></span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-27"><a href="#cb51-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Economic bubble chart</span></span>
<span id="cb51-28"><a href="#cb51-28" aria-hidden="true" tabindex="-1"></a>economic_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb51-29"><a href="#cb51-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">country =</span> <span class="fu">paste</span>(<span class="st">"Country"</span>, LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]),</span>
<span id="cb51-30"><a href="#cb51-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">gdp_per_capita =</span> <span class="fu">exp</span>(<span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">10</span>, <span class="fl">0.5</span>)),</span>
<span id="cb51-31"><a href="#cb51-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">life_expectancy =</span> <span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">75</span>, <span class="dv">8</span>),</span>
<span id="cb51-32"><a href="#cb51-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">population =</span> <span class="fu">exp</span>(<span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">15</span>, <span class="dv">1</span>)),</span>
<span id="cb51-33"><a href="#cb51-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">region =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"Asia"</span>, <span class="st">"Europe"</span>, <span class="st">"Americas"</span>, <span class="st">"Africa"</span>), <span class="dv">20</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-34"><a href="#cb51-34" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-35"><a href="#cb51-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-36"><a href="#cb51-36" aria-hidden="true" tabindex="-1"></a>p48 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(economic_data, <span class="fu">aes</span>(<span class="at">x =</span> gdp_per_capita, <span class="at">y =</span> life_expectancy)) <span class="sc">+</span></span>
<span id="cb51-37"><a href="#cb51-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> population, <span class="at">color =</span> region), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb51-38"><a href="#cb51-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">fill =</span> <span class="st">"#95A5A6"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb51-39"><a href="#cb51-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb51-40"><a href="#cb51-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">15</span>), <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">scale =</span> <span class="fl">1e-6</span>, <span class="at">suffix =</span> <span class="st">"M"</span>)) <span class="sc">+</span></span>
<span id="cb51-41"><a href="#cb51-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>, <span class="st">"#6A0572"</span>)) <span class="sc">+</span></span>
<span id="cb51-42"><a href="#cb51-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb51-43"><a href="#cb51-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Economic Development Bubble Chart"</span>,</span>
<span id="cb51-44"><a href="#cb51-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"GDP per capita vs life expectancy by population"</span>,</span>
<span id="cb51-45"><a href="#cb51-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"GDP per Capita (log scale)"</span>,</span>
<span id="cb51-46"><a href="#cb51-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Life Expectancy (years)"</span>,</span>
<span id="cb51-47"><a href="#cb51-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="st">"Population"</span>,</span>
<span id="cb51-48"><a href="#cb51-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Region"</span></span>
<span id="cb51-49"><a href="#cb51-49" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-50"><a href="#cb51-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-51"><a href="#cb51-51" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p47)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/financial_plots-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p48)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/financial_plots-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="artistic-and-creative-visualizations" class="level2">
<h2 class="anchored" data-anchor-id="artistic-and-creative-visualizations">25. Artistic and Creative Visualizations</h2>
<p>Pushing the boundaries of data art and creative expression.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Spirograph-style data art</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>spiral_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">t =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">20</span><span class="sc">*</span>pi, <span class="fl">0.1</span>)</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> (<span class="dv">10</span> <span class="sc">+</span> <span class="dv">3</span> <span class="sc">*</span> <span class="fu">cos</span>(<span class="dv">5</span><span class="sc">*</span>t)) <span class="sc">*</span> <span class="fu">cos</span>(t),</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> (<span class="dv">10</span> <span class="sc">+</span> <span class="dv">3</span> <span class="sc">*</span> <span class="fu">cos</span>(<span class="dv">5</span><span class="sc">*</span>t)) <span class="sc">*</span> <span class="fu">sin</span>(t),</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">color_val =</span> <span class="fu">sin</span>(t) <span class="sc">+</span> <span class="fu">cos</span>(<span class="dv">5</span><span class="sc">*</span>t),</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha_val =</span> (<span class="fu">sin</span>(t<span class="sc">/</span><span class="dv">2</span>) <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>p49 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(spiral_data, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y)) <span class="sc">+</span></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="fu">aes</span>(<span class="at">color =</span> color_val, <span class="at">alpha =</span> alpha_val), <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> color_val, <span class="at">alpha =</span> alpha_val), <span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient2</span>(</span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"#1A1A2E"</span>, </span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid =</span> <span class="st">"#533A71"</span>, </span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"#AB0E86"</span>,</span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">guide =</span> <span class="st">"none"</span></span>
<span id="cb53-20"><a href="#cb53-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb53-21"><a href="#cb53-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_alpha_identity</span>() <span class="sc">+</span></span>
<span id="cb53-22"><a href="#cb53-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb53-23"><a href="#cb53-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Data Spirograph Art"</span>,</span>
<span id="cb53-24"><a href="#cb53-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Mathematical beauty in data visualization"</span></span>
<span id="cb53-25"><a href="#cb53-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb53-26"><a href="#cb53-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span></span>
<span id="cb53-27"><a href="#cb53-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb53-28"><a href="#cb53-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb53-29"><a href="#cb53-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#0A0A0A"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb53-30"><a href="#cb53-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"white"</span>),</span>
<span id="cb53-31"><a href="#cb53-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"white"</span>)</span>
<span id="cb53-32"><a href="#cb53-32" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb53-33"><a href="#cb53-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-34"><a href="#cb53-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Word cloud simulation using text positioning</span></span>
<span id="cb53-35"><a href="#cb53-35" aria-hidden="true" tabindex="-1"></a>word_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb53-36"><a href="#cb53-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">word =</span> <span class="fu">c</span>(<span class="st">"ggplot2"</span>, <span class="st">"visualization"</span>, <span class="st">"data"</span>, <span class="st">"science"</span>, <span class="st">"R"</span>, <span class="st">"beautiful"</span>, </span>
<span id="cb53-37"><a href="#cb53-37" aria-hidden="true" tabindex="-1"></a>           <span class="st">"insights"</span>, <span class="st">"analytics"</span>, <span class="st">"charts"</span>, <span class="st">"graphs"</span>, <span class="st">"statistical"</span>, <span class="st">"modern"</span>),</span>
<span id="cb53-38"><a href="#cb53-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">frequency =</span> <span class="fu">c</span>(<span class="dv">50</span>, <span class="dv">45</span>, <span class="dv">40</span>, <span class="dv">35</span>, <span class="dv">30</span>, <span class="dv">25</span>, <span class="dv">20</span>, <span class="dv">18</span>, <span class="dv">15</span>, <span class="dv">12</span>, <span class="dv">10</span>, <span class="dv">8</span>),</span>
<span id="cb53-39"><a href="#cb53-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">runif</span>(<span class="dv">12</span>, <span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>),</span>
<span id="cb53-40"><a href="#cb53-40" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">runif</span>(<span class="dv">12</span>, <span class="sc">-</span><span class="dv">3</span>, <span class="dv">3</span>),</span>
<span id="cb53-41"><a href="#cb53-41" aria-hidden="true" tabindex="-1"></a>  <span class="at">angle =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">45</span>, <span class="dv">90</span>), <span class="dv">12</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb53-42"><a href="#cb53-42" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb53-43"><a href="#cb53-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-44"><a href="#cb53-44" aria-hidden="true" tabindex="-1"></a>p50 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(word_data, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y)) <span class="sc">+</span></span>
<span id="cb53-45"><a href="#cb53-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> word, <span class="at">size =</span> frequency, <span class="at">color =</span> frequency, <span class="at">angle =</span> angle),</span>
<span id="cb53-46"><a href="#cb53-46" aria-hidden="true" tabindex="-1"></a>            <span class="at">family =</span> <span class="st">"playfair"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb53-47"><a href="#cb53-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">12</span>), <span class="at">guide =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb53-48"><a href="#cb53-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient2</span>(</span>
<span id="cb53-49"><a href="#cb53-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"#1A1A2E"</span>, </span>
<span id="cb53-50"><a href="#cb53-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid =</span> <span class="st">"#533A71"</span>, </span>
<span id="cb53-51"><a href="#cb53-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"#AB0E86"</span>,</span>
<span id="cb53-52"><a href="#cb53-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">guide =</span> <span class="st">"none"</span></span>
<span id="cb53-53"><a href="#cb53-53" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb53-54"><a href="#cb53-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb53-55"><a href="#cb53-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Data Visualization Word Cloud"</span>,</span>
<span id="cb53-56"><a href="#cb53-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Key concepts in beautiful typography"</span></span>
<span id="cb53-57"><a href="#cb53-57" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb53-58"><a href="#cb53-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">6</span>, <span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb53-59"><a href="#cb53-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="sc">-</span><span class="dv">4</span>, <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb53-60"><a href="#cb53-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb53-61"><a href="#cb53-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-62"><a href="#cb53-62" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p49)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/artistic_plots-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p50)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/artistic_plots-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="interactive-style-and-dashboard-elements" class="level2">
<h2 class="anchored" data-anchor-id="interactive-style-and-dashboard-elements">26. Interactive-Style and Dashboard Elements</h2>
<p>Creating dashboard-like visualizations with multiple panels.</p>
<div class="cell">
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># KPI dashboard style</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>kpi_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric =</span> <span class="fu">c</span>(<span class="st">"Revenue"</span>, <span class="st">"Customers"</span>, <span class="st">"Conversion"</span>, <span class="st">"Satisfaction"</span>),</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">current =</span> <span class="fu">c</span>(<span class="dv">78000</span>, <span class="dv">1250</span>, <span class="fl">12.5</span>, <span class="fl">8.2</span>),</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">target =</span> <span class="fu">c</span>(<span class="dv">80000</span>, <span class="dv">1200</span>, <span class="fl">15.0</span>, <span class="fl">8.5</span>),</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">previous =</span> <span class="fu">c</span>(<span class="dv">72000</span>, <span class="dv">1100</span>, <span class="fl">10.2</span>, <span class="fl">7.8</span>)</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">vs_target =</span> (current <span class="sc">-</span> target) <span class="sc">/</span> target <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">vs_previous =</span> (current <span class="sc">-</span> previous) <span class="sc">/</span> previous <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">status =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>      vs_target <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"Above Target"</span>,</span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>      vs_target <span class="sc">&gt;</span> <span class="sc">-</span><span class="dv">5</span> <span class="sc">~</span> <span class="st">"Near Target"</span>, </span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Below Target"</span></span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a>p51 <span class="ot">&lt;-</span> kpi_data <span class="sc">%&gt;%</span></span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(current, target, previous), </span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a>                      <span class="at">names_to =</span> <span class="st">"period"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb55-21"><a href="#cb55-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> metric, <span class="at">y =</span> value, <span class="at">fill =</span> period)) <span class="sc">+</span></span>
<span id="cb55-22"><a href="#cb55-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">width =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb55-23"><a href="#cb55-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> scales<span class="sc">::</span><span class="fu">comma</span>(value, <span class="at">accuracy =</span> <span class="fl">0.1</span>)), </span>
<span id="cb55-24"><a href="#cb55-24" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.7</span>), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.3</span>,</span>
<span id="cb55-25"><a href="#cb55-25" aria-hidden="true" tabindex="-1"></a>            <span class="at">family =</span> <span class="st">"source"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb55-26"><a href="#cb55-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"current"</span> <span class="ot">=</span> <span class="st">"#1A1A2E"</span>, <span class="st">"target"</span> <span class="ot">=</span> <span class="st">"#533A71"</span>, <span class="st">"previous"</span> <span class="ot">=</span> <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb55-27"><a href="#cb55-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>metric, <span class="at">scales =</span> <span class="st">"free"</span>, <span class="at">nrow =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb55-28"><a href="#cb55-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb55-29"><a href="#cb55-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Executive Dashboard - Key Performance Indicators"</span>,</span>
<span id="cb55-30"><a href="#cb55-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Current performance vs targets and historical comparison"</span>,</span>
<span id="cb55-31"><a href="#cb55-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb55-32"><a href="#cb55-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Value"</span>,</span>
<span id="cb55-33"><a href="#cb55-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Period"</span></span>
<span id="cb55-34"><a href="#cb55-34" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb55-35"><a href="#cb55-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb55-36"><a href="#cb55-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb55-37"><a href="#cb55-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb55-38"><a href="#cb55-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.1</span>), <span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb55-39"><a href="#cb55-39" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb55-40"><a href="#cb55-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-41"><a href="#cb55-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Gauge chart simulation</span></span>
<span id="cb55-42"><a href="#cb55-42" aria-hidden="true" tabindex="-1"></a>gauge_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb55-43"><a href="#cb55-43" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric =</span> <span class="st">"Performance Score"</span>,</span>
<span id="cb55-44"><a href="#cb55-44" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="dv">75</span>,</span>
<span id="cb55-45"><a href="#cb55-45" aria-hidden="true" tabindex="-1"></a>  <span class="at">min_val =</span> <span class="dv">0</span>,</span>
<span id="cb55-46"><a href="#cb55-46" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_val =</span> <span class="dv">100</span></span>
<span id="cb55-47"><a href="#cb55-47" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb55-48"><a href="#cb55-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb55-49"><a href="#cb55-49" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create gauge segments</span></span>
<span id="cb55-50"><a href="#cb55-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">angle_start =</span> pi,</span>
<span id="cb55-51"><a href="#cb55-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">angle_end =</span> <span class="dv">0</span>,</span>
<span id="cb55-52"><a href="#cb55-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_angle =</span> angle_start <span class="sc">+</span> (value <span class="sc">/</span> max_val) <span class="sc">*</span> (angle_end <span class="sc">-</span> angle_start)</span>
<span id="cb55-53"><a href="#cb55-53" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb55-54"><a href="#cb55-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-55"><a href="#cb55-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Create tick marks separately</span></span>
<span id="cb55-56"><a href="#cb55-56" aria-hidden="true" tabindex="-1"></a>gauge_ticks <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb55-57"><a href="#cb55-57" aria-hidden="true" tabindex="-1"></a>  <span class="at">tick_angles =</span> <span class="fu">seq</span>(pi, <span class="dv">0</span>, <span class="at">length.out =</span> <span class="dv">11</span>),</span>
<span id="cb55-58"><a href="#cb55-58" aria-hidden="true" tabindex="-1"></a>  <span class="at">tick_values =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">10</span>)</span>
<span id="cb55-59"><a href="#cb55-59" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb55-60"><a href="#cb55-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-61"><a href="#cb55-61" aria-hidden="true" tabindex="-1"></a>gauge_segments <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb55-62"><a href="#cb55-62" aria-hidden="true" tabindex="-1"></a>  <span class="at">start_angle =</span> <span class="fu">seq</span>(pi, <span class="dv">0</span>, <span class="at">length.out =</span> <span class="dv">101</span>)[<span class="sc">-</span><span class="dv">101</span>],</span>
<span id="cb55-63"><a href="#cb55-63" aria-hidden="true" tabindex="-1"></a>  <span class="at">end_angle =</span> <span class="fu">seq</span>(pi, <span class="dv">0</span>, <span class="at">length.out =</span> <span class="dv">101</span>)[<span class="sc">-</span><span class="dv">1</span>],</span>
<span id="cb55-64"><a href="#cb55-64" aria-hidden="true" tabindex="-1"></a>  <span class="at">segment_value =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">99</span></span>
<span id="cb55-65"><a href="#cb55-65" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb55-66"><a href="#cb55-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb55-67"><a href="#cb55-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">color_zone =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-68"><a href="#cb55-68" aria-hidden="true" tabindex="-1"></a>      segment_value <span class="sc">&lt;</span> <span class="dv">30</span> <span class="sc">~</span> <span class="st">"Low"</span>,</span>
<span id="cb55-69"><a href="#cb55-69" aria-hidden="true" tabindex="-1"></a>      segment_value <span class="sc">&lt;</span> <span class="dv">70</span> <span class="sc">~</span> <span class="st">"Medium"</span>,</span>
<span id="cb55-70"><a href="#cb55-70" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"High"</span></span>
<span id="cb55-71"><a href="#cb55-71" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-72"><a href="#cb55-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">x1 =</span> <span class="fl">0.8</span> <span class="sc">*</span> <span class="fu">cos</span>(start_angle),</span>
<span id="cb55-73"><a href="#cb55-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">y1 =</span> <span class="fl">0.8</span> <span class="sc">*</span> <span class="fu">sin</span>(start_angle),</span>
<span id="cb55-74"><a href="#cb55-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">x2 =</span> <span class="fu">cos</span>(start_angle),</span>
<span id="cb55-75"><a href="#cb55-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">y2 =</span> <span class="fu">sin</span>(start_angle)</span>
<span id="cb55-76"><a href="#cb55-76" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb55-77"><a href="#cb55-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-78"><a href="#cb55-78" aria-hidden="true" tabindex="-1"></a>p52 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb55-79"><a href="#cb55-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">data =</span> gauge_segments, </span>
<span id="cb55-80"><a href="#cb55-80" aria-hidden="true" tabindex="-1"></a>               <span class="fu">aes</span>(<span class="at">x =</span> x1, <span class="at">y =</span> y1, <span class="at">xend =</span> x2, <span class="at">yend =</span> y2, <span class="at">color =</span> color_zone),</span>
<span id="cb55-81"><a href="#cb55-81" aria-hidden="true" tabindex="-1"></a>               <span class="at">size =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb55-82"><a href="#cb55-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> <span class="dv">0</span>, </span>
<span id="cb55-83"><a href="#cb55-83" aria-hidden="true" tabindex="-1"></a>               <span class="at">xend =</span> <span class="fl">0.7</span> <span class="sc">*</span> <span class="fu">cos</span>(gauge_data<span class="sc">$</span>value_angle), </span>
<span id="cb55-84"><a href="#cb55-84" aria-hidden="true" tabindex="-1"></a>               <span class="at">yend =</span> <span class="fl">0.7</span> <span class="sc">*</span> <span class="fu">sin</span>(gauge_data<span class="sc">$</span>value_angle),</span>
<span id="cb55-85"><a href="#cb55-85" aria-hidden="true" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">size =</span> <span class="dv">3</span>, </span>
<span id="cb55-86"><a href="#cb55-86" aria-hidden="true" tabindex="-1"></a>               <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">0.3</span>, <span class="st">"cm"</span>))) <span class="sc">+</span></span>
<span id="cb55-87"><a href="#cb55-87" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>) <span class="sc">+</span></span>
<span id="cb55-88"><a href="#cb55-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Low"</span> <span class="ot">=</span> <span class="st">"#6A0572"</span>, <span class="st">"Medium"</span> <span class="ot">=</span> <span class="st">"#533A71"</span>, <span class="st">"High"</span> <span class="ot">=</span> <span class="st">"#1A1A2E"</span>)) <span class="sc">+</span></span>
<span id="cb55-89"><a href="#cb55-89" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.3</span>, <span class="at">label =</span> <span class="fu">paste</span>(gauge_data<span class="sc">$</span>value, <span class="st">"%"</span>), </span>
<span id="cb55-90"><a href="#cb55-90" aria-hidden="true" tabindex="-1"></a>           <span class="at">size =</span> <span class="dv">8</span>, <span class="at">family =</span> <span class="cf">if</span> (.Platform<span class="sc">$</span>OS.type <span class="sc">==</span> <span class="st">"windows"</span>) <span class="st">"Times New Roman"</span> <span class="cf">else</span> <span class="st">"playfair"</span>, </span>
<span id="cb55-91"><a href="#cb55-91" aria-hidden="true" tabindex="-1"></a>           <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>) <span class="sc">+</span></span>
<span id="cb55-92"><a href="#cb55-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb55-93"><a href="#cb55-93" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Performance Gauge Visualization"</span>,</span>
<span id="cb55-94"><a href="#cb55-94" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Real-time metric monitoring"</span>,</span>
<span id="cb55-95"><a href="#cb55-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Performance Zone"</span></span>
<span id="cb55-96"><a href="#cb55-96" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb55-97"><a href="#cb55-97" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span></span>
<span id="cb55-98"><a href="#cb55-98" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="fl">1.2</span>, <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb55-99"><a href="#cb55-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="sc">-</span><span class="fl">0.5</span>, <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb55-100"><a href="#cb55-100" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb55-101"><a href="#cb55-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-102"><a href="#cb55-102" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p51)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/dashboard_elements-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Show Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p52)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ggplot-visualization-guide_files/figure-html/dashboard_elements-2.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="conclusion-best-practices-for-beautiful-ggplot2-visualizations" class="level2">
<h2 class="anchored" data-anchor-id="conclusion-best-practices-for-beautiful-ggplot2-visualizations">Conclusion: Best Practices for Beautiful ggplot2 Visualizations</h2>
<section id="key-takeaways" class="level3">
<h3 class="anchored" data-anchor-id="key-takeaways">Key Takeaways:</h3>
<ol type="1">
<li><strong>Custom Themes</strong>: Creating a consistent, branded look across all your visualizations</li>
<li><strong>Color Psychology</strong>: Using colors that enhance readability and convey the right message</li>
<li><strong>Typography</strong>: Selecting appropriate fonts that match your visualization’s purpose</li>
<li><strong>White Space</strong>: Embracing clean, uncluttered designs with strategic use of white space</li>
<li><strong>Annotations</strong>: Adding context and highlighting key insights directly on the plot</li>
<li><strong>Layering</strong>: Combining multiple geoms to create rich, informative visualizations</li>
</ol>
</section>
<section id="advanced-tips" class="level3">
<h3 class="anchored" data-anchor-id="advanced-tips">Advanced Tips:</h3>
<ul>
<li>Use <code>scales</code> package for professional formatting of axes</li>
<li>Leverage <code>viridis</code> and <code>RColorBrewer</code> for scientifically-backed color palettes</li>
<li>Apply <code>patchwork</code> for combining multiple plots elegantly</li>
<li>Implement consistent spacing and alignment across plot elements</li>
<li>Consider your audience and the story you want to tell</li>
</ul>
<p>This comprehensive guide covers the essential plot types in ggplot2, each enhanced with our custom theme that prioritizes clean aesthetics, readability, and visual appeal. The combination of thoughtful color choices, beautiful typography, and strategic use of white space creates visualizations that not only inform but also inspire.</p>
<p>Remember: Great data visualization is not just about the data—it’s about creating a visual narrative that guides your audience to insights in an elegant and memorable way.</p>


<!-- -->

</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/IKSHRESTHA\.github\.io\/Actuarial-Reflections\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb57" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Complete ggplot2 Visualization Guide: Mastering Beautiful Data Plots"</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Krishna Kumar Shrestha"</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "2025-07-17"</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span><span class="co"> [data visualization, ggplot2, R, data science]</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> "A comprehensive guide to creating stunning visualizations with ggplot2, featuring custom themes, advanced techniques, and all major plot types with beautiful aesthetics."</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-depth: 3</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a><span class="co">    code-summary: "Show Code"</span></span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a><span class="co">    df-print: paged</span></span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a><span class="co">    fig-width: 10</span></span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a><span class="co">    fig-height: 6</span></span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span></span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a><span class="co">  warning: false</span></span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a><span class="co">  message: false</span></span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true" tabindex="-1"></a><span class="co">  cache: true</span></span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb57-22"><a href="#cb57-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-23"><a href="#cb57-23" aria-hidden="true" tabindex="-1"></a><span class="fu"># Complete ggplot2 Visualization Guide: Mastering Beautiful Data Plots</span></span>
<span id="cb57-24"><a href="#cb57-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-25"><a href="#cb57-25" aria-hidden="true" tabindex="-1"></a>Data visualization is the art of transforming numbers into stories. In this comprehensive guide, we'll explore the power of ggplot2 to create stunning, publication-ready visualizations that not only convey information effectively but also captivate your audience with their aesthetic appeal.</span>
<span id="cb57-26"><a href="#cb57-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-27"><a href="#cb57-27" aria-hidden="true" tabindex="-1"></a><span class="fu">## Setup and Custom Theme</span></span>
<span id="cb57-28"><a href="#cb57-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-29"><a href="#cb57-29" aria-hidden="true" tabindex="-1"></a>Let's start by loading the necessary libraries and creating our custom theme that features a clean whitish background, no grid lines, and beautiful typography.</span>
<span id="cb57-30"><a href="#cb57-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-31"><a href="#cb57-31" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup}</span></span>
<span id="cb57-32"><a href="#cb57-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Load required libraries</span></span>
<span id="cb57-33"><a href="#cb57-33" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb57-34"><a href="#cb57-34" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb57-35"><a href="#cb57-35" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb57-36"><a href="#cb57-36" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb57-37"><a href="#cb57-37" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb57-38"><a href="#cb57-38" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb57-39"><a href="#cb57-39" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggtext)</span>
<span id="cb57-40"><a href="#cb57-40" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(showtext)</span>
<span id="cb57-41"><a href="#cb57-41" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb57-42"><a href="#cb57-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-43"><a href="#cb57-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Add Google Fonts</span></span>
<span id="cb57-44"><a href="#cb57-44" aria-hidden="true" tabindex="-1"></a><span class="fu">font_add_google</span>(<span class="st">"Playfair Display"</span>, <span class="st">"playfair"</span>)</span>
<span id="cb57-45"><a href="#cb57-45" aria-hidden="true" tabindex="-1"></a><span class="fu">font_add_google</span>(<span class="st">"Source Sans Pro"</span>, <span class="st">"source"</span>)</span>
<span id="cb57-46"><a href="#cb57-46" aria-hidden="true" tabindex="-1"></a><span class="fu">font_add_google</span>(<span class="st">"Fira Code"</span>, <span class="st">"fira"</span>)</span>
<span id="cb57-47"><a href="#cb57-47" aria-hidden="true" tabindex="-1"></a><span class="fu">showtext_auto</span>()</span>
<span id="cb57-48"><a href="#cb57-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-49"><a href="#cb57-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternative fonts for Windows compatibility</span></span>
<span id="cb57-50"><a href="#cb57-50" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (.Platform<span class="sc">$</span>OS.type <span class="sc">==</span> <span class="st">"windows"</span>) {</span>
<span id="cb57-51"><a href="#cb57-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">windowsFonts</span>(</span>
<span id="cb57-52"><a href="#cb57-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">playfair =</span> <span class="fu">windowsFont</span>(<span class="st">"Times New Roman"</span>),</span>
<span id="cb57-53"><a href="#cb57-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">source =</span> <span class="fu">windowsFont</span>(<span class="st">"Arial"</span>),</span>
<span id="cb57-54"><a href="#cb57-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">fira =</span> <span class="fu">windowsFont</span>(<span class="st">"Courier New"</span>)</span>
<span id="cb57-55"><a href="#cb57-55" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-56"><a href="#cb57-56" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb57-57"><a href="#cb57-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-58"><a href="#cb57-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-59"><a href="#cb57-59" aria-hidden="true" tabindex="-1"></a><span class="co"># Custom color palette (expanded to cover 12 months) - Dark &amp; Sophisticated</span></span>
<span id="cb57-60"><a href="#cb57-60" aria-hidden="true" tabindex="-1"></a>custom_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#16213E"</span>, <span class="st">"#0F3460"</span>, <span class="st">"#533A71"</span>, <span class="st">"#6A0572"</span>, <span class="st">"#AB0E86"</span>, </span>
<span id="cb57-61"><a href="#cb57-61" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"#E91E63"</span>, <span class="st">"#FF5722"</span>, <span class="st">"#795548"</span>, <span class="st">"#607D8B"</span>, <span class="st">"#455A64"</span>, <span class="st">"#263238"</span>)</span>
<span id="cb57-62"><a href="#cb57-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-63"><a href="#cb57-63" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternative dark color palettes for different uses</span></span>
<span id="cb57-64"><a href="#cb57-64" aria-hidden="true" tabindex="-1"></a>primary_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#16213E"</span>, <span class="st">"#0F3460"</span>, <span class="st">"#533A71"</span>)</span>
<span id="cb57-65"><a href="#cb57-65" aria-hidden="true" tabindex="-1"></a>accent_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#6A0572"</span>, <span class="st">"#AB0E86"</span>, <span class="st">"#E91E63"</span>, <span class="st">"#FF5722"</span>)</span>
<span id="cb57-66"><a href="#cb57-66" aria-hidden="true" tabindex="-1"></a>dark_gradient <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#263238"</span>, <span class="st">"#37474F"</span>, <span class="st">"#455A64"</span>, <span class="st">"#546E7A"</span>, <span class="st">"#607D8B"</span>, <span class="st">"#78909C"</span>)</span>
<span id="cb57-67"><a href="#cb57-67" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-68"><a href="#cb57-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-69"><a href="#cb57-69" aria-hidden="true" tabindex="-1"></a><span class="in">```{r custom_theme}</span></span>
<span id="cb57-70"><a href="#cb57-70" aria-hidden="true" tabindex="-1"></a><span class="co"># Create our custom theme</span></span>
<span id="cb57-71"><a href="#cb57-71" aria-hidden="true" tabindex="-1"></a>theme_elegant <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">base_size =</span> <span class="dv">14</span>, <span class="at">base_family =</span> <span class="st">"source"</span>) {</span>
<span id="cb57-72"><a href="#cb57-72" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Use fallback fonts on Windows</span></span>
<span id="cb57-73"><a href="#cb57-73" aria-hidden="true" tabindex="-1"></a>  title_family <span class="ot">&lt;-</span> <span class="cf">if</span> (.Platform<span class="sc">$</span>OS.type <span class="sc">==</span> <span class="st">"windows"</span>) <span class="st">"Times New Roman"</span> <span class="cf">else</span> <span class="st">"playfair"</span></span>
<span id="cb57-74"><a href="#cb57-74" aria-hidden="true" tabindex="-1"></a>  body_family <span class="ot">&lt;-</span> <span class="cf">if</span> (.Platform<span class="sc">$</span>OS.type <span class="sc">==</span> <span class="st">"windows"</span>) <span class="st">"Arial"</span> <span class="cf">else</span> <span class="st">"source"</span></span>
<span id="cb57-75"><a href="#cb57-75" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb57-76"><a href="#cb57-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> base_size, <span class="at">base_family =</span> body_family) <span class="sc">+</span></span>
<span id="cb57-77"><a href="#cb57-77" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb57-78"><a href="#cb57-78" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Background</span></span>
<span id="cb57-79"><a href="#cb57-79" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#FEFEFE"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb57-80"><a href="#cb57-80" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#FEFEFE"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb57-81"><a href="#cb57-81" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb57-82"><a href="#cb57-82" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Remove grid lines</span></span>
<span id="cb57-83"><a href="#cb57-83" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb57-84"><a href="#cb57-84" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb57-85"><a href="#cb57-85" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb57-86"><a href="#cb57-86" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb57-87"><a href="#cb57-87" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Axes</span></span>
<span id="cb57-88"><a href="#cb57-88" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">size =</span> <span class="fl">0.5</span>),</span>
<span id="cb57-89"><a href="#cb57-89" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">0.9</span>)),</span>
<span id="cb57-90"><a href="#cb57-90" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.1</span>), <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb57-91"><a href="#cb57-91" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb57-92"><a href="#cb57-92" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Title and subtitle</span></span>
<span id="cb57-93"><a href="#cb57-93" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.title =</span> <span class="fu">element_text</span>(</span>
<span id="cb57-94"><a href="#cb57-94" aria-hidden="true" tabindex="-1"></a>        <span class="at">family =</span> title_family, </span>
<span id="cb57-95"><a href="#cb57-95" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.6</span>), </span>
<span id="cb57-96"><a href="#cb57-96" aria-hidden="true" tabindex="-1"></a>        <span class="at">face =</span> <span class="st">"bold"</span>, </span>
<span id="cb57-97"><a href="#cb57-97" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"#2C3E50"</span>,</span>
<span id="cb57-98"><a href="#cb57-98" aria-hidden="true" tabindex="-1"></a>        <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">20</span>)</span>
<span id="cb57-99"><a href="#cb57-99" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb57-100"><a href="#cb57-100" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(</span>
<span id="cb57-101"><a href="#cb57-101" aria-hidden="true" tabindex="-1"></a>        <span class="at">family =</span> body_family, </span>
<span id="cb57-102"><a href="#cb57-102" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.1</span>), </span>
<span id="cb57-103"><a href="#cb57-103" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"#7F8C8D"</span>,</span>
<span id="cb57-104"><a href="#cb57-104" aria-hidden="true" tabindex="-1"></a>        <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">25</span>)</span>
<span id="cb57-105"><a href="#cb57-105" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb57-106"><a href="#cb57-106" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.caption =</span> <span class="fu">element_text</span>(</span>
<span id="cb57-107"><a href="#cb57-107" aria-hidden="true" tabindex="-1"></a>        <span class="at">family =</span> body_family, </span>
<span id="cb57-108"><a href="#cb57-108" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">0.8</span>), </span>
<span id="cb57-109"><a href="#cb57-109" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"#95A5A6"</span>,</span>
<span id="cb57-110"><a href="#cb57-110" aria-hidden="true" tabindex="-1"></a>        <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb57-111"><a href="#cb57-111" aria-hidden="true" tabindex="-1"></a>        <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">15</span>)</span>
<span id="cb57-112"><a href="#cb57-112" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb57-113"><a href="#cb57-113" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb57-114"><a href="#cb57-114" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Legend</span></span>
<span id="cb57-115"><a href="#cb57-115" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb57-116"><a href="#cb57-116" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb57-117"><a href="#cb57-117" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">0.9</span>)),</span>
<span id="cb57-118"><a href="#cb57-118" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="dv">1</span>), <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb57-119"><a href="#cb57-119" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">"right"</span>,</span>
<span id="cb57-120"><a href="#cb57-120" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb57-121"><a href="#cb57-121" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Facets</span></span>
<span id="cb57-122"><a href="#cb57-122" aria-hidden="true" tabindex="-1"></a>      <span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#ECF0F1"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb57-123"><a href="#cb57-123" aria-hidden="true" tabindex="-1"></a>      <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="dv">1</span>)),</span>
<span id="cb57-124"><a href="#cb57-124" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb57-125"><a href="#cb57-125" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Margins</span></span>
<span id="cb57-126"><a href="#cb57-126" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">20</span>)</span>
<span id="cb57-127"><a href="#cb57-127" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb57-128"><a href="#cb57-128" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb57-129"><a href="#cb57-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-130"><a href="#cb57-130" aria-hidden="true" tabindex="-1"></a><span class="co"># Set as default theme</span></span>
<span id="cb57-131"><a href="#cb57-131" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_elegant</span>())</span>
<span id="cb57-132"><a href="#cb57-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-133"><a href="#cb57-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-134"><a href="#cb57-134" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-135"><a href="#cb57-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-136"><a href="#cb57-136" aria-hidden="true" tabindex="-1"></a><span class="fu">## Sample Data Generation</span></span>
<span id="cb57-137"><a href="#cb57-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-138"><a href="#cb57-138" aria-hidden="true" tabindex="-1"></a>Let's create diverse datasets to showcase different types of visualizations:</span>
<span id="cb57-139"><a href="#cb57-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-140"><a href="#cb57-140" aria-hidden="true" tabindex="-1"></a><span class="in">```{r data_generation}</span></span>
<span id="cb57-141"><a href="#cb57-141" aria-hidden="true" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb57-142"><a href="#cb57-142" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb57-143"><a href="#cb57-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-144"><a href="#cb57-144" aria-hidden="true" tabindex="-1"></a><span class="co"># Dataset 1: Sales data</span></span>
<span id="cb57-145"><a href="#cb57-145" aria-hidden="true" tabindex="-1"></a>sales_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-146"><a href="#cb57-146" aria-hidden="true" tabindex="-1"></a>  <span class="at">month =</span> <span class="fu">factor</span>(month.abb, <span class="at">levels =</span> month.abb),</span>
<span id="cb57-147"><a href="#cb57-147" aria-hidden="true" tabindex="-1"></a>  <span class="at">revenue =</span> <span class="fu">c</span>(<span class="dv">45000</span>, <span class="dv">52000</span>, <span class="dv">48000</span>, <span class="dv">61000</span>, <span class="dv">55000</span>, <span class="dv">67000</span>, </span>
<span id="cb57-148"><a href="#cb57-148" aria-hidden="true" tabindex="-1"></a>              <span class="dv">72000</span>, <span class="dv">69000</span>, <span class="dv">58000</span>, <span class="dv">63000</span>, <span class="dv">71000</span>, <span class="dv">78000</span>),</span>
<span id="cb57-149"><a href="#cb57-149" aria-hidden="true" tabindex="-1"></a>  <span class="at">profit =</span> <span class="fu">c</span>(<span class="dv">12000</span>, <span class="dv">15600</span>, <span class="dv">14400</span>, <span class="dv">18300</span>, <span class="dv">16500</span>, <span class="dv">20100</span>,</span>
<span id="cb57-150"><a href="#cb57-150" aria-hidden="true" tabindex="-1"></a>             <span class="dv">21600</span>, <span class="dv">20700</span>, <span class="dv">17400</span>, <span class="dv">18900</span>, <span class="dv">21300</span>, <span class="dv">23400</span>),</span>
<span id="cb57-151"><a href="#cb57-151" aria-hidden="true" tabindex="-1"></a>  <span class="at">region =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"North"</span>, <span class="st">"South"</span>, <span class="st">"East"</span>, <span class="st">"West"</span>), <span class="dv">3</span>)</span>
<span id="cb57-152"><a href="#cb57-152" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb57-153"><a href="#cb57-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-154"><a href="#cb57-154" aria-hidden="true" tabindex="-1"></a><span class="co"># Dataset 2: Customer demographics</span></span>
<span id="cb57-155"><a href="#cb57-155" aria-hidden="true" tabindex="-1"></a>customer_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-156"><a href="#cb57-156" aria-hidden="true" tabindex="-1"></a>  <span class="at">age =</span> <span class="fu">rnorm</span>(<span class="dv">500</span>, <span class="dv">35</span>, <span class="dv">12</span>),</span>
<span id="cb57-157"><a href="#cb57-157" aria-hidden="true" tabindex="-1"></a>  <span class="at">income =</span> <span class="fu">rnorm</span>(<span class="dv">500</span>, <span class="dv">50000</span>, <span class="dv">15000</span>),</span>
<span id="cb57-158"><a href="#cb57-158" aria-hidden="true" tabindex="-1"></a>  <span class="at">satisfaction =</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">500</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb57-159"><a href="#cb57-159" aria-hidden="true" tabindex="-1"></a>  <span class="at">category =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"Premium"</span>, <span class="st">"Standard"</span>, <span class="st">"Basic"</span>), <span class="dv">500</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.3</span>, <span class="fl">0.5</span>, <span class="fl">0.2</span>)),</span>
<span id="cb57-160"><a href="#cb57-160" aria-hidden="true" tabindex="-1"></a>  <span class="at">gender =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"Male"</span>, <span class="st">"Female"</span>, <span class="st">"Other"</span>), <span class="dv">500</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.45</span>, <span class="fl">0.5</span>, <span class="fl">0.05</span>))</span>
<span id="cb57-161"><a href="#cb57-161" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb57-162"><a href="#cb57-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-163"><a href="#cb57-163" aria-hidden="true" tabindex="-1"></a><span class="co"># Dataset 3: Time series data</span></span>
<span id="cb57-164"><a href="#cb57-164" aria-hidden="true" tabindex="-1"></a>time_series_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-165"><a href="#cb57-165" aria-hidden="true" tabindex="-1"></a>  <span class="at">date =</span> <span class="fu">seq</span>(<span class="fu">as.Date</span>(<span class="st">"2020-01-01"</span>), <span class="fu">as.Date</span>(<span class="st">"2024-12-31"</span>), <span class="at">by =</span> <span class="st">"month"</span>),</span>
<span id="cb57-166"><a href="#cb57-166" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">cumsum</span>(<span class="fu">rnorm</span>(<span class="dv">60</span>, <span class="dv">5</span>, <span class="dv">15</span>)) <span class="sc">+</span> <span class="dv">100</span>,</span>
<span id="cb57-167"><a href="#cb57-167" aria-hidden="true" tabindex="-1"></a>  <span class="at">trend =</span> <span class="fu">seq</span>(<span class="dv">100</span>, <span class="dv">400</span>, <span class="at">length.out =</span> <span class="dv">60</span>),</span>
<span id="cb57-168"><a href="#cb57-168" aria-hidden="true" tabindex="-1"></a>  <span class="at">category =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>), <span class="dv">20</span>)</span>
<span id="cb57-169"><a href="#cb57-169" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb57-170"><a href="#cb57-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-171"><a href="#cb57-171" aria-hidden="true" tabindex="-1"></a><span class="co"># Dataset 4: Correlation matrix data</span></span>
<span id="cb57-172"><a href="#cb57-172" aria-hidden="true" tabindex="-1"></a>correlation_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-173"><a href="#cb57-173" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">rnorm</span>(<span class="dv">200</span>),</span>
<span id="cb57-174"><a href="#cb57-174" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">rnorm</span>(<span class="dv">200</span>),</span>
<span id="cb57-175"><a href="#cb57-175" aria-hidden="true" tabindex="-1"></a>  <span class="at">z =</span> <span class="fu">rnorm</span>(<span class="dv">200</span>)</span>
<span id="cb57-176"><a href="#cb57-176" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb57-177"><a href="#cb57-177" aria-hidden="true" tabindex="-1"></a>correlation_data<span class="sc">$</span>y <span class="ot">&lt;-</span> correlation_data<span class="sc">$</span>x <span class="sc">*</span> <span class="fl">0.7</span> <span class="sc">+</span> correlation_data<span class="sc">$</span>y <span class="sc">*</span> <span class="fl">0.3</span></span>
<span id="cb57-178"><a href="#cb57-178" aria-hidden="true" tabindex="-1"></a>correlation_data<span class="sc">$</span>z <span class="ot">&lt;-</span> correlation_data<span class="sc">$</span>x <span class="sc">*</span> <span class="sc">-</span><span class="fl">0.5</span> <span class="sc">+</span> correlation_data<span class="sc">$</span>z <span class="sc">*</span> <span class="fl">0.5</span></span>
<span id="cb57-179"><a href="#cb57-179" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-180"><a href="#cb57-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-181"><a href="#cb57-181" aria-hidden="true" tabindex="-1"></a><span class="fu">## 1. Bar Charts and Column Charts</span></span>
<span id="cb57-182"><a href="#cb57-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-183"><a href="#cb57-183" aria-hidden="true" tabindex="-1"></a>Bar charts are perfect for comparing categories and showing distributions.</span>
<span id="cb57-184"><a href="#cb57-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-185"><a href="#cb57-185" aria-hidden="true" tabindex="-1"></a><span class="in">```{r bar_charts}</span></span>
<span id="cb57-186"><a href="#cb57-186" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple bar chart with custom colors</span></span>
<span id="cb57-187"><a href="#cb57-187" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sales_data, <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> revenue, <span class="at">fill =</span> month)) <span class="sc">+</span></span>
<span id="cb57-188"><a href="#cb57-188" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="fl">0.7</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb57-189"><a href="#cb57-189" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> custom_colors) <span class="sc">+</span></span>
<span id="cb57-190"><a href="#cb57-190" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>(<span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">suffix =</span> <span class="st">"K"</span>)) <span class="sc">+</span></span>
<span id="cb57-191"><a href="#cb57-191" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-192"><a href="#cb57-192" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Monthly Revenue Performance"</span>,</span>
<span id="cb57-193"><a href="#cb57-193" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Consistent growth throughout the year"</span>,</span>
<span id="cb57-194"><a href="#cb57-194" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Month"</span>,</span>
<span id="cb57-195"><a href="#cb57-195" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Revenue (in thousands)"</span>,</span>
<span id="cb57-196"><a href="#cb57-196" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Data: Company Sales Report 2024"</span></span>
<span id="cb57-197"><a href="#cb57-197" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-198"><a href="#cb57-198" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb57-199"><a href="#cb57-199" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb57-200"><a href="#cb57-200" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb57-201"><a href="#cb57-201" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-202"><a href="#cb57-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-203"><a href="#cb57-203" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternative approach using viridis colors for months</span></span>
<span id="cb57-204"><a href="#cb57-204" aria-hidden="true" tabindex="-1"></a>p1_alt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sales_data, <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> revenue, <span class="at">fill =</span> month)) <span class="sc">+</span></span>
<span id="cb57-205"><a href="#cb57-205" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="fl">0.7</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb57-206"><a href="#cb57-206" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>(<span class="at">option =</span> <span class="st">"plasma"</span>) <span class="sc">+</span></span>
<span id="cb57-207"><a href="#cb57-207" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>(<span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">suffix =</span> <span class="st">"K"</span>)) <span class="sc">+</span></span>
<span id="cb57-208"><a href="#cb57-208" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-209"><a href="#cb57-209" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Monthly Revenue Performance (Viridis Palette)"</span>,</span>
<span id="cb57-210"><a href="#cb57-210" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Perceptually uniform color progression"</span>,</span>
<span id="cb57-211"><a href="#cb57-211" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Month"</span>,</span>
<span id="cb57-212"><a href="#cb57-212" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Revenue (in thousands)"</span>,</span>
<span id="cb57-213"><a href="#cb57-213" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Data: Company Sales Report 2024"</span></span>
<span id="cb57-214"><a href="#cb57-214" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-215"><a href="#cb57-215" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb57-216"><a href="#cb57-216" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb57-217"><a href="#cb57-217" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb57-218"><a href="#cb57-218" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-219"><a href="#cb57-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-220"><a href="#cb57-220" aria-hidden="true" tabindex="-1"></a><span class="co"># Grouped bar chart</span></span>
<span id="cb57-221"><a href="#cb57-221" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> sales_data <span class="sc">%&gt;%</span></span>
<span id="cb57-222"><a href="#cb57-222" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(month, revenue, profit) <span class="sc">%&gt;%</span></span>
<span id="cb57-223"><a href="#cb57-223" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(revenue, profit), <span class="at">names_to =</span> <span class="st">"metric"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb57-224"><a href="#cb57-224" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> value, <span class="at">fill =</span> metric)) <span class="sc">+</span></span>
<span id="cb57-225"><a href="#cb57-225" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">width =</span> <span class="fl">0.7</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-226"><a href="#cb57-226" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb57-227"><a href="#cb57-227" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"revenue"</span> <span class="ot">=</span> <span class="st">"#1A1A2E"</span>, <span class="st">"profit"</span> <span class="ot">=</span> <span class="st">"#533A71"</span>),</span>
<span id="cb57-228"><a href="#cb57-228" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Profit"</span>, <span class="st">"Revenue"</span>)</span>
<span id="cb57-229"><a href="#cb57-229" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-230"><a href="#cb57-230" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>(<span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">suffix =</span> <span class="st">"K"</span>)) <span class="sc">+</span></span>
<span id="cb57-231"><a href="#cb57-231" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-232"><a href="#cb57-232" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Revenue vs Profit Analysis"</span>,</span>
<span id="cb57-233"><a href="#cb57-233" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Monthly comparison of key financial metrics"</span>,</span>
<span id="cb57-234"><a href="#cb57-234" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Month"</span>,</span>
<span id="cb57-235"><a href="#cb57-235" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Amount (in thousands)"</span>,</span>
<span id="cb57-236"><a href="#cb57-236" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Metric"</span></span>
<span id="cb57-237"><a href="#cb57-237" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-238"><a href="#cb57-238" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb57-239"><a href="#cb57-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-240"><a href="#cb57-240" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p1)</span>
<span id="cb57-241"><a href="#cb57-241" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p1_alt)</span>
<span id="cb57-242"><a href="#cb57-242" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p2)</span>
<span id="cb57-243"><a href="#cb57-243" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-244"><a href="#cb57-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-245"><a href="#cb57-245" aria-hidden="true" tabindex="-1"></a><span class="fu">## 2. Line Charts and Time Series</span></span>
<span id="cb57-246"><a href="#cb57-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-247"><a href="#cb57-247" aria-hidden="true" tabindex="-1"></a>Line charts excel at showing trends over time and continuous relationships.</span>
<span id="cb57-248"><a href="#cb57-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-249"><a href="#cb57-249" aria-hidden="true" tabindex="-1"></a><span class="in">```{r line_charts}</span></span>
<span id="cb57-250"><a href="#cb57-250" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple time series plot</span></span>
<span id="cb57-251"><a href="#cb57-251" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(time_series_data, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb57-252"><a href="#cb57-252" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"#1A1A2E"</span>, <span class="at">size =</span> <span class="fl">1.2</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-253"><a href="#cb57-253" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>, <span class="at">color =</span> <span class="st">"#533A71"</span>, <span class="at">fill =</span> <span class="st">"#533A71"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb57-254"><a href="#cb57-254" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_labels =</span> <span class="st">"%Y"</span>, <span class="at">date_breaks =</span> <span class="st">"1 year"</span>) <span class="sc">+</span></span>
<span id="cb57-255"><a href="#cb57-255" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>()) <span class="sc">+</span></span>
<span id="cb57-256"><a href="#cb57-256" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-257"><a href="#cb57-257" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Business Growth Trajectory"</span>,</span>
<span id="cb57-258"><a href="#cb57-258" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"5-year performance with trend analysis"</span>,</span>
<span id="cb57-259"><a href="#cb57-259" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb57-260"><a href="#cb57-260" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Performance Index"</span>,</span>
<span id="cb57-261"><a href="#cb57-261" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Includes LOESS smoothing with 95% confidence interval"</span></span>
<span id="cb57-262"><a href="#cb57-262" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-263"><a href="#cb57-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-264"><a href="#cb57-264" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiple line chart</span></span>
<span id="cb57-265"><a href="#cb57-265" aria-hidden="true" tabindex="-1"></a>p4 <span class="ot">&lt;-</span> time_series_data <span class="sc">%&gt;%</span></span>
<span id="cb57-266"><a href="#cb57-266" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(category, <span class="at">year =</span> lubridate<span class="sc">::</span><span class="fu">year</span>(date)) <span class="sc">%&gt;%</span></span>
<span id="cb57-267"><a href="#cb57-267" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_value =</span> <span class="fu">mean</span>(value), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb57-268"><a href="#cb57-268" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> avg_value, <span class="at">color =</span> category)) <span class="sc">+</span></span>
<span id="cb57-269"><a href="#cb57-269" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb57-270"><a href="#cb57-270" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-271"><a href="#cb57-271" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb57-272"><a href="#cb57-272" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">2020</span><span class="sc">:</span><span class="dv">2024</span>) <span class="sc">+</span></span>
<span id="cb57-273"><a href="#cb57-273" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-274"><a href="#cb57-274" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Category Performance Comparison"</span>,</span>
<span id="cb57-275"><a href="#cb57-275" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Annual trends across different business segments"</span>,</span>
<span id="cb57-276"><a href="#cb57-276" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb57-277"><a href="#cb57-277" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average Performance"</span>,</span>
<span id="cb57-278"><a href="#cb57-278" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Category"</span></span>
<span id="cb57-279"><a href="#cb57-279" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-280"><a href="#cb57-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-281"><a href="#cb57-281" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p3)</span>
<span id="cb57-282"><a href="#cb57-282" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p4)</span>
<span id="cb57-283"><a href="#cb57-283" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-284"><a href="#cb57-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-285"><a href="#cb57-285" aria-hidden="true" tabindex="-1"></a><span class="fu">## 3. Scatter Plots and Correlation Analysis</span></span>
<span id="cb57-286"><a href="#cb57-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-287"><a href="#cb57-287" aria-hidden="true" tabindex="-1"></a>Scatter plots reveal relationships between continuous variables.</span>
<span id="cb57-288"><a href="#cb57-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-289"><a href="#cb57-289" aria-hidden="true" tabindex="-1"></a><span class="in">```{r scatter_plots}</span></span>
<span id="cb57-290"><a href="#cb57-290" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic scatter plot with regression line</span></span>
<span id="cb57-291"><a href="#cb57-291" aria-hidden="true" tabindex="-1"></a>p5 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(customer_data, <span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> income)) <span class="sc">+</span></span>
<span id="cb57-292"><a href="#cb57-292" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> category), <span class="at">size =</span> <span class="fl">2.5</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb57-293"><a href="#cb57-293" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">fill =</span> <span class="st">"#95A5A6"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb57-294"><a href="#cb57-294" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb57-295"><a href="#cb57-295" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb57-296"><a href="#cb57-296" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-297"><a href="#cb57-297" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Income vs Age Relationship"</span>,</span>
<span id="cb57-298"><a href="#cb57-298" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Customer segmentation analysis with linear trend"</span>,</span>
<span id="cb57-299"><a href="#cb57-299" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Age (years)"</span>,</span>
<span id="cb57-300"><a href="#cb57-300" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Annual Income"</span>,</span>
<span id="cb57-301"><a href="#cb57-301" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Customer Category"</span></span>
<span id="cb57-302"><a href="#cb57-302" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-303"><a href="#cb57-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-304"><a href="#cb57-304" aria-hidden="true" tabindex="-1"></a><span class="co"># Bubble chart</span></span>
<span id="cb57-305"><a href="#cb57-305" aria-hidden="true" tabindex="-1"></a>p6 <span class="ot">&lt;-</span> customer_data <span class="sc">%&gt;%</span></span>
<span id="cb57-306"><a href="#cb57-306" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(category, gender) <span class="sc">%&gt;%</span></span>
<span id="cb57-307"><a href="#cb57-307" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb57-308"><a href="#cb57-308" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_age =</span> <span class="fu">mean</span>(age),</span>
<span id="cb57-309"><a href="#cb57-309" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_income =</span> <span class="fu">mean</span>(income),</span>
<span id="cb57-310"><a href="#cb57-310" aria-hidden="true" tabindex="-1"></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb57-311"><a href="#cb57-311" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb57-312"><a href="#cb57-312" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb57-313"><a href="#cb57-313" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> avg_age, <span class="at">y =</span> avg_income, <span class="at">size =</span> count, <span class="at">color =</span> category)) <span class="sc">+</span></span>
<span id="cb57-314"><a href="#cb57-314" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-315"><a href="#cb57-315" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">20</span>), <span class="at">guide =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">"Count"</span>)) <span class="sc">+</span></span>
<span id="cb57-316"><a href="#cb57-316" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb57-317"><a href="#cb57-317" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb57-318"><a href="#cb57-318" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>gender) <span class="sc">+</span></span>
<span id="cb57-319"><a href="#cb57-319" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-320"><a href="#cb57-320" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Customer Demographics Bubble Chart"</span>,</span>
<span id="cb57-321"><a href="#cb57-321" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Age, income, and count by category and gender"</span>,</span>
<span id="cb57-322"><a href="#cb57-322" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Average Age"</span>,</span>
<span id="cb57-323"><a href="#cb57-323" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average Income"</span>,</span>
<span id="cb57-324"><a href="#cb57-324" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Category"</span>,</span>
<span id="cb57-325"><a href="#cb57-325" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="st">"Customer Count"</span></span>
<span id="cb57-326"><a href="#cb57-326" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-327"><a href="#cb57-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-328"><a href="#cb57-328" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p5)</span>
<span id="cb57-329"><a href="#cb57-329" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p6)</span>
<span id="cb57-330"><a href="#cb57-330" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-331"><a href="#cb57-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-332"><a href="#cb57-332" aria-hidden="true" tabindex="-1"></a><span class="fu">## 4. Histograms and Density Plots</span></span>
<span id="cb57-333"><a href="#cb57-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-334"><a href="#cb57-334" aria-hidden="true" tabindex="-1"></a>These plots show distributions and frequency patterns in your data.</span>
<span id="cb57-335"><a href="#cb57-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-336"><a href="#cb57-336" aria-hidden="true" tabindex="-1"></a><span class="in">```{r histograms_density}</span></span>
<span id="cb57-337"><a href="#cb57-337" aria-hidden="true" tabindex="-1"></a><span class="co"># Histogram with density overlay</span></span>
<span id="cb57-338"><a href="#cb57-338" aria-hidden="true" tabindex="-1"></a>p7 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(customer_data, <span class="fu">aes</span>(<span class="at">x =</span> income)) <span class="sc">+</span></span>
<span id="cb57-339"><a href="#cb57-339" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">bins =</span> <span class="dv">30</span>, <span class="at">fill =</span> <span class="st">"#1A1A2E"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb57-340"><a href="#cb57-340" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">color =</span> <span class="st">"#533A71"</span>, <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb57-341"><a href="#cb57-341" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb57-342"><a href="#cb57-342" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-343"><a href="#cb57-343" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Income Distribution Analysis"</span>,</span>
<span id="cb57-344"><a href="#cb57-344" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Histogram with overlaid density curve"</span>,</span>
<span id="cb57-345"><a href="#cb57-345" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Annual Income"</span>,</span>
<span id="cb57-346"><a href="#cb57-346" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Density"</span></span>
<span id="cb57-347"><a href="#cb57-347" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-348"><a href="#cb57-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-349"><a href="#cb57-349" aria-hidden="true" tabindex="-1"></a><span class="co"># Faceted density plots</span></span>
<span id="cb57-350"><a href="#cb57-350" aria-hidden="true" tabindex="-1"></a>p8 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(customer_data, <span class="fu">aes</span>(<span class="at">x =</span> income, <span class="at">fill =</span> category)) <span class="sc">+</span></span>
<span id="cb57-351"><a href="#cb57-351" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb57-352"><a href="#cb57-352" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb57-353"><a href="#cb57-353" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb57-354"><a href="#cb57-354" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>category, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb57-355"><a href="#cb57-355" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-356"><a href="#cb57-356" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Income Distribution by Customer Category"</span>,</span>
<span id="cb57-357"><a href="#cb57-357" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Density plots revealing different spending patterns"</span>,</span>
<span id="cb57-358"><a href="#cb57-358" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Annual Income"</span>,</span>
<span id="cb57-359"><a href="#cb57-359" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Density"</span>,</span>
<span id="cb57-360"><a href="#cb57-360" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Category"</span></span>
<span id="cb57-361"><a href="#cb57-361" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-362"><a href="#cb57-362" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb57-363"><a href="#cb57-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-364"><a href="#cb57-364" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p7)</span>
<span id="cb57-365"><a href="#cb57-365" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p8)</span>
<span id="cb57-366"><a href="#cb57-366" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-367"><a href="#cb57-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-368"><a href="#cb57-368" aria-hidden="true" tabindex="-1"></a><span class="fu">## 5. Box Plots and Violin Plots</span></span>
<span id="cb57-369"><a href="#cb57-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-370"><a href="#cb57-370" aria-hidden="true" tabindex="-1"></a>These plots show distributions, quartiles, and outliers effectively.</span>
<span id="cb57-371"><a href="#cb57-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-372"><a href="#cb57-372" aria-hidden="true" tabindex="-1"></a><span class="in">```{r box_violin_plots}</span></span>
<span id="cb57-373"><a href="#cb57-373" aria-hidden="true" tabindex="-1"></a><span class="co"># Enhanced box plot</span></span>
<span id="cb57-374"><a href="#cb57-374" aria-hidden="true" tabindex="-1"></a>p9 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(customer_data, <span class="fu">aes</span>(<span class="at">x =</span> category, <span class="at">y =</span> satisfaction, <span class="at">fill =</span> category)) <span class="sc">+</span></span>
<span id="cb57-375"><a href="#cb57-375" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">width =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-376"><a href="#cb57-376" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> <span class="fl">0.3</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">outlier.shape =</span> <span class="dv">21</span>, <span class="at">outlier.size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb57-377"><a href="#cb57-377" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb57-378"><a href="#cb57-378" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb57-379"><a href="#cb57-379" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb57-380"><a href="#cb57-380" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-381"><a href="#cb57-381" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Customer Satisfaction Distribution"</span>,</span>
<span id="cb57-382"><a href="#cb57-382" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Violin plots with box plots and individual data points"</span>,</span>
<span id="cb57-383"><a href="#cb57-383" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Customer Category"</span>,</span>
<span id="cb57-384"><a href="#cb57-384" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Satisfaction Score (1-10)"</span>,</span>
<span id="cb57-385"><a href="#cb57-385" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Category"</span></span>
<span id="cb57-386"><a href="#cb57-386" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-387"><a href="#cb57-387" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb57-388"><a href="#cb57-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-389"><a href="#cb57-389" aria-hidden="true" tabindex="-1"></a><span class="co"># Grouped box plot</span></span>
<span id="cb57-390"><a href="#cb57-390" aria-hidden="true" tabindex="-1"></a>p10 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(customer_data, <span class="fu">aes</span>(<span class="at">x =</span> category, <span class="at">y =</span> income, <span class="at">fill =</span> gender)) <span class="sc">+</span></span>
<span id="cb57-391"><a href="#cb57-391" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">outlier.shape =</span> <span class="dv">21</span>) <span class="sc">+</span></span>
<span id="cb57-392"><a href="#cb57-392" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#6A0572"</span>)) <span class="sc">+</span></span>
<span id="cb57-393"><a href="#cb57-393" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb57-394"><a href="#cb57-394" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-395"><a href="#cb57-395" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Income Distribution by Category and Gender"</span>,</span>
<span id="cb57-396"><a href="#cb57-396" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Grouped box plots revealing demographic patterns"</span>,</span>
<span id="cb57-397"><a href="#cb57-397" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Customer Category"</span>,</span>
<span id="cb57-398"><a href="#cb57-398" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Annual Income"</span>,</span>
<span id="cb57-399"><a href="#cb57-399" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Gender"</span></span>
<span id="cb57-400"><a href="#cb57-400" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-401"><a href="#cb57-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-402"><a href="#cb57-402" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p9)</span>
<span id="cb57-403"><a href="#cb57-403" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p10)</span>
<span id="cb57-404"><a href="#cb57-404" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-405"><a href="#cb57-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-406"><a href="#cb57-406" aria-hidden="true" tabindex="-1"></a><span class="fu">## 6. Heatmaps and Correlation Matrices</span></span>
<span id="cb57-407"><a href="#cb57-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-408"><a href="#cb57-408" aria-hidden="true" tabindex="-1"></a>Heatmaps are excellent for showing relationships and patterns in matrix data.</span>
<span id="cb57-409"><a href="#cb57-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-410"><a href="#cb57-410" aria-hidden="true" tabindex="-1"></a><span class="in">```{r heatmaps}</span></span>
<span id="cb57-411"><a href="#cb57-411" aria-hidden="true" tabindex="-1"></a><span class="co"># Correlation heatmap</span></span>
<span id="cb57-412"><a href="#cb57-412" aria-hidden="true" tabindex="-1"></a>cor_matrix <span class="ot">&lt;-</span> <span class="fu">cor</span>(correlation_data)</span>
<span id="cb57-413"><a href="#cb57-413" aria-hidden="true" tabindex="-1"></a>cor_df <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(<span class="at">Var1 =</span> <span class="fu">rownames</span>(cor_matrix), <span class="at">Var2 =</span> <span class="fu">colnames</span>(cor_matrix))</span>
<span id="cb57-414"><a href="#cb57-414" aria-hidden="true" tabindex="-1"></a>cor_df<span class="sc">$</span>value <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(cor_matrix)</span>
<span id="cb57-415"><a href="#cb57-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-416"><a href="#cb57-416" aria-hidden="true" tabindex="-1"></a>p11 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(cor_df, <span class="fu">aes</span>(<span class="at">x =</span> Var1, <span class="at">y =</span> Var2, <span class="at">fill =</span> value)) <span class="sc">+</span></span>
<span id="cb57-417"><a href="#cb57-417" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb57-418"><a href="#cb57-418" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">round</span>(value, <span class="dv">2</span>)), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">family =</span> <span class="st">"fira"</span>) <span class="sc">+</span></span>
<span id="cb57-419"><a href="#cb57-419" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(</span>
<span id="cb57-420"><a href="#cb57-420" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"#1A1A2E"</span>, </span>
<span id="cb57-421"><a href="#cb57-421" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid =</span> <span class="st">"white"</span>, </span>
<span id="cb57-422"><a href="#cb57-422" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"#533A71"</span>, </span>
<span id="cb57-423"><a href="#cb57-423" aria-hidden="true" tabindex="-1"></a>    <span class="at">midpoint =</span> <span class="dv">0</span>,</span>
<span id="cb57-424"><a href="#cb57-424" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Correlation"</span></span>
<span id="cb57-425"><a href="#cb57-425" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-426"><a href="#cb57-426" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-427"><a href="#cb57-427" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Correlation Matrix Heatmap"</span>,</span>
<span id="cb57-428"><a href="#cb57-428" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Relationships between variables"</span>,</span>
<span id="cb57-429"><a href="#cb57-429" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">""</span></span>
<span id="cb57-430"><a href="#cb57-430" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-431"><a href="#cb57-431" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb57-432"><a href="#cb57-432" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb57-433"><a href="#cb57-433" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">size =</span> <span class="dv">1</span>)</span>
<span id="cb57-434"><a href="#cb57-434" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-435"><a href="#cb57-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-436"><a href="#cb57-436" aria-hidden="true" tabindex="-1"></a><span class="co"># Monthly sales heatmap</span></span>
<span id="cb57-437"><a href="#cb57-437" aria-hidden="true" tabindex="-1"></a>monthly_matrix <span class="ot">&lt;-</span> sales_data <span class="sc">%&gt;%</span></span>
<span id="cb57-438"><a href="#cb57-438" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(month, revenue, profit) <span class="sc">%&gt;%</span></span>
<span id="cb57-439"><a href="#cb57-439" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(revenue, profit), <span class="at">names_to =</span> <span class="st">"metric"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb57-440"><a href="#cb57-440" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">value_scaled =</span> <span class="fu">scale</span>(value)[,<span class="dv">1</span>])</span>
<span id="cb57-441"><a href="#cb57-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-442"><a href="#cb57-442" aria-hidden="true" tabindex="-1"></a>p12 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(monthly_matrix, <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> metric, <span class="at">fill =</span> value_scaled)) <span class="sc">+</span></span>
<span id="cb57-443"><a href="#cb57-443" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb57-444"><a href="#cb57-444" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(</span>
<span id="cb57-445"><a href="#cb57-445" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"#1A1A2E"</span>, </span>
<span id="cb57-446"><a href="#cb57-446" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid =</span> <span class="st">"white"</span>, </span>
<span id="cb57-447"><a href="#cb57-447" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"#533A71"</span>,</span>
<span id="cb57-448"><a href="#cb57-448" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Scaled</span><span class="sc">\n</span><span class="st">Value"</span></span>
<span id="cb57-449"><a href="#cb57-449" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-450"><a href="#cb57-450" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-451"><a href="#cb57-451" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Monthly Performance Heatmap"</span>,</span>
<span id="cb57-452"><a href="#cb57-452" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Standardized revenue and profit metrics"</span>,</span>
<span id="cb57-453"><a href="#cb57-453" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Month"</span>, <span class="at">y =</span> <span class="st">"Metric"</span></span>
<span id="cb57-454"><a href="#cb57-454" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-455"><a href="#cb57-455" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb57-456"><a href="#cb57-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-457"><a href="#cb57-457" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p11)</span>
<span id="cb57-458"><a href="#cb57-458" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p12)</span>
<span id="cb57-459"><a href="#cb57-459" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-460"><a href="#cb57-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-461"><a href="#cb57-461" aria-hidden="true" tabindex="-1"></a><span class="fu">## 7. Pie Charts and Donut Charts</span></span>
<span id="cb57-462"><a href="#cb57-462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-463"><a href="#cb57-463" aria-hidden="true" tabindex="-1"></a>While sometimes criticized, pie charts can be effective for showing parts of a whole.</span>
<span id="cb57-464"><a href="#cb57-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-465"><a href="#cb57-465" aria-hidden="true" tabindex="-1"></a><span class="in">```{r pie_donut_charts}</span></span>
<span id="cb57-466"><a href="#cb57-466" aria-hidden="true" tabindex="-1"></a><span class="co"># Enhanced pie chart</span></span>
<span id="cb57-467"><a href="#cb57-467" aria-hidden="true" tabindex="-1"></a>category_counts <span class="ot">&lt;-</span> customer_data <span class="sc">%&gt;%</span></span>
<span id="cb57-468"><a href="#cb57-468" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(category) <span class="sc">%&gt;%</span></span>
<span id="cb57-469"><a href="#cb57-469" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-470"><a href="#cb57-470" aria-hidden="true" tabindex="-1"></a>    <span class="at">percentage =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb57-471"><a href="#cb57-471" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste0</span>(category, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, <span class="fu">round</span>(percentage, <span class="dv">1</span>), <span class="st">"%"</span>)</span>
<span id="cb57-472"><a href="#cb57-472" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-473"><a href="#cb57-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-474"><a href="#cb57-474" aria-hidden="true" tabindex="-1"></a>p13 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(category_counts, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> n, <span class="at">fill =</span> category)) <span class="sc">+</span></span>
<span id="cb57-475"><a href="#cb57-475" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-476"><a href="#cb57-476" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb57-477"><a href="#cb57-477" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb57-478"><a href="#cb57-478" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> label), </span>
<span id="cb57-479"><a href="#cb57-479" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb57-480"><a href="#cb57-480" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"white"</span>, </span>
<span id="cb57-481"><a href="#cb57-481" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">4</span>, </span>
<span id="cb57-482"><a href="#cb57-482" aria-hidden="true" tabindex="-1"></a>            <span class="at">family =</span> <span class="st">"source"</span>,</span>
<span id="cb57-483"><a href="#cb57-483" aria-hidden="true" tabindex="-1"></a>            <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb57-484"><a href="#cb57-484" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-485"><a href="#cb57-485" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Customer Category Distribution"</span>,</span>
<span id="cb57-486"><a href="#cb57-486" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Market segmentation overview"</span></span>
<span id="cb57-487"><a href="#cb57-487" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-488"><a href="#cb57-488" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb57-489"><a href="#cb57-489" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb57-490"><a href="#cb57-490" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"playfair"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.6</span>), <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>),</span>
<span id="cb57-491"><a href="#cb57-491" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"source"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.1</span>), <span class="at">color =</span> <span class="st">"#7F8C8D"</span>),</span>
<span id="cb57-492"><a href="#cb57-492" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span></span>
<span id="cb57-493"><a href="#cb57-493" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-494"><a href="#cb57-494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-495"><a href="#cb57-495" aria-hidden="true" tabindex="-1"></a><span class="co"># Donut chart</span></span>
<span id="cb57-496"><a href="#cb57-496" aria-hidden="true" tabindex="-1"></a>p14 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(category_counts, <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">2</span>, <span class="at">y =</span> n, <span class="at">fill =</span> category)) <span class="sc">+</span></span>
<span id="cb57-497"><a href="#cb57-497" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-498"><a href="#cb57-498" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb57-499"><a href="#cb57-499" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="fl">0.5</span>, <span class="fl">2.5</span>) <span class="sc">+</span></span>
<span id="cb57-500"><a href="#cb57-500" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb57-501"><a href="#cb57-501" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-502"><a href="#cb57-502" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Customer Segments - Donut View"</span>,</span>
<span id="cb57-503"><a href="#cb57-503" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Clean modern representation"</span>,</span>
<span id="cb57-504"><a href="#cb57-504" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Category"</span></span>
<span id="cb57-505"><a href="#cb57-505" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-506"><a href="#cb57-506" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb57-507"><a href="#cb57-507" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb57-508"><a href="#cb57-508" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"playfair"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.6</span>), <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>),</span>
<span id="cb57-509"><a href="#cb57-509" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"source"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.1</span>), <span class="at">color =</span> <span class="st">"#7F8C8D"</span>)</span>
<span id="cb57-510"><a href="#cb57-510" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-511"><a href="#cb57-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-512"><a href="#cb57-512" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p13)</span>
<span id="cb57-513"><a href="#cb57-513" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p14)</span>
<span id="cb57-514"><a href="#cb57-514" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-515"><a href="#cb57-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-516"><a href="#cb57-516" aria-hidden="true" tabindex="-1"></a><span class="fu">## 8. Advanced Plots: Ridgeline and Waterfall</span></span>
<span id="cb57-517"><a href="#cb57-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-518"><a href="#cb57-518" aria-hidden="true" tabindex="-1"></a>Let's explore some advanced visualization techniques.</span>
<span id="cb57-519"><a href="#cb57-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-520"><a href="#cb57-520" aria-hidden="true" tabindex="-1"></a><span class="in">```{r advanced_plots}</span></span>
<span id="cb57-521"><a href="#cb57-521" aria-hidden="true" tabindex="-1"></a><span class="co"># Ridgeline plot (requires ggridges)</span></span>
<span id="cb57-522"><a href="#cb57-522" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggridges)</span>
<span id="cb57-523"><a href="#cb57-523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-524"><a href="#cb57-524" aria-hidden="true" tabindex="-1"></a>p15 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(customer_data, <span class="fu">aes</span>(<span class="at">x =</span> income, <span class="at">y =</span> category, <span class="at">fill =</span> category)) <span class="sc">+</span></span>
<span id="cb57-525"><a href="#cb57-525" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges</span>(<span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">scale =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb57-526"><a href="#cb57-526" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb57-527"><a href="#cb57-527" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb57-528"><a href="#cb57-528" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-529"><a href="#cb57-529" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Income Distribution Ridgeline Plot"</span>,</span>
<span id="cb57-530"><a href="#cb57-530" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Elegant way to compare distributions across categories"</span>,</span>
<span id="cb57-531"><a href="#cb57-531" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Annual Income"</span>,</span>
<span id="cb57-532"><a href="#cb57-532" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Customer Category"</span></span>
<span id="cb57-533"><a href="#cb57-533" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-534"><a href="#cb57-534" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb57-535"><a href="#cb57-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-536"><a href="#cb57-536" aria-hidden="true" tabindex="-1"></a><span class="co"># Waterfall chart simulation</span></span>
<span id="cb57-537"><a href="#cb57-537" aria-hidden="true" tabindex="-1"></a>waterfall_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-538"><a href="#cb57-538" aria-hidden="true" tabindex="-1"></a>  <span class="at">category =</span> <span class="fu">c</span>(<span class="st">"Starting"</span>, <span class="st">"Q1 Growth"</span>, <span class="st">"Q2 Growth"</span>, <span class="st">"Q3 Decline"</span>, <span class="st">"Q4 Growth"</span>, <span class="st">"Ending"</span>),</span>
<span id="cb57-539"><a href="#cb57-539" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">25</span>, <span class="dv">30</span>, <span class="sc">-</span><span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">160</span>),</span>
<span id="cb57-540"><a href="#cb57-540" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="fu">c</span>(<span class="st">"start"</span>, <span class="st">"increase"</span>, <span class="st">"increase"</span>, <span class="st">"decrease"</span>, <span class="st">"increase"</span>, <span class="st">"end"</span>)</span>
<span id="cb57-541"><a href="#cb57-541" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb57-542"><a href="#cb57-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-543"><a href="#cb57-543" aria-hidden="true" tabindex="-1"></a>waterfall_data<span class="sc">$</span>cumulative <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(waterfall_data<span class="sc">$</span>value)</span>
<span id="cb57-544"><a href="#cb57-544" aria-hidden="true" tabindex="-1"></a>waterfall_data<span class="sc">$</span>xmin <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(waterfall_data) <span class="sc">-</span> <span class="fl">0.4</span></span>
<span id="cb57-545"><a href="#cb57-545" aria-hidden="true" tabindex="-1"></a>waterfall_data<span class="sc">$</span>xmax <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(waterfall_data) <span class="sc">+</span> <span class="fl">0.4</span></span>
<span id="cb57-546"><a href="#cb57-546" aria-hidden="true" tabindex="-1"></a>waterfall_data<span class="sc">$</span>ymin <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">head</span>(waterfall_data<span class="sc">$</span>cumulative, <span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb57-547"><a href="#cb57-547" aria-hidden="true" tabindex="-1"></a>waterfall_data<span class="sc">$</span>ymax <span class="ot">&lt;-</span> waterfall_data<span class="sc">$</span>cumulative</span>
<span id="cb57-548"><a href="#cb57-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-549"><a href="#cb57-549" aria-hidden="true" tabindex="-1"></a>p16 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(waterfall_data) <span class="sc">+</span></span>
<span id="cb57-550"><a href="#cb57-550" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> xmin, <span class="at">xmax =</span> xmax, <span class="at">ymin =</span> ymin, <span class="at">ymax =</span> ymax, <span class="at">fill =</span> type), </span>
<span id="cb57-551"><a href="#cb57-551" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb57-552"><a href="#cb57-552" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(waterfall_data), <span class="at">y =</span> ymax <span class="sc">+</span> <span class="dv">5</span>, <span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">"+"</span>, value)), </span>
<span id="cb57-553"><a href="#cb57-553" aria-hidden="true" tabindex="-1"></a>            <span class="at">family =</span> <span class="st">"source"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>) <span class="sc">+</span></span>
<span id="cb57-554"><a href="#cb57-554" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"start"</span> <span class="ot">=</span> <span class="st">"#455A64"</span>, <span class="st">"increase"</span> <span class="ot">=</span> <span class="st">"#533A71"</span>, </span>
<span id="cb57-555"><a href="#cb57-555" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"decrease"</span> <span class="ot">=</span> <span class="st">"#6A0572"</span>, <span class="st">"end"</span> <span class="ot">=</span> <span class="st">"#1A1A2E"</span>)) <span class="sc">+</span></span>
<span id="cb57-556"><a href="#cb57-556" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">labels =</span> waterfall_data<span class="sc">$</span>category) <span class="sc">+</span></span>
<span id="cb57-557"><a href="#cb57-557" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-558"><a href="#cb57-558" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Business Performance Waterfall Chart"</span>,</span>
<span id="cb57-559"><a href="#cb57-559" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Quarterly progression breakdown"</span>,</span>
<span id="cb57-560"><a href="#cb57-560" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">"Performance Value"</span>,</span>
<span id="cb57-561"><a href="#cb57-561" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Type"</span></span>
<span id="cb57-562"><a href="#cb57-562" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-563"><a href="#cb57-563" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb57-564"><a href="#cb57-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-565"><a href="#cb57-565" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p15)</span>
<span id="cb57-566"><a href="#cb57-566" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p16)</span>
<span id="cb57-567"><a href="#cb57-567" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-568"><a href="#cb57-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-569"><a href="#cb57-569" aria-hidden="true" tabindex="-1"></a><span class="fu">## 9. Faceting and Small Multiples</span></span>
<span id="cb57-570"><a href="#cb57-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-571"><a href="#cb57-571" aria-hidden="true" tabindex="-1"></a>Faceting allows you to create multiple plots based on grouping variables.</span>
<span id="cb57-572"><a href="#cb57-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-573"><a href="#cb57-573" aria-hidden="true" tabindex="-1"></a><span class="in">```{r faceting_plots}</span></span>
<span id="cb57-574"><a href="#cb57-574" aria-hidden="true" tabindex="-1"></a><span class="co"># Facet wrap example</span></span>
<span id="cb57-575"><a href="#cb57-575" aria-hidden="true" tabindex="-1"></a>p17 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(customer_data, <span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> income, <span class="at">color =</span> satisfaction)) <span class="sc">+</span></span>
<span id="cb57-576"><a href="#cb57-576" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb57-577"><a href="#cb57-577" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>) <span class="sc">+</span></span>
<span id="cb57-578"><a href="#cb57-578" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_c</span>(<span class="at">option =</span> <span class="st">"plasma"</span>) <span class="sc">+</span></span>
<span id="cb57-579"><a href="#cb57-579" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb57-580"><a href="#cb57-580" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>category, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb57-581"><a href="#cb57-581" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-582"><a href="#cb57-582" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Age-Income Relationship Across Customer Categories"</span>,</span>
<span id="cb57-583"><a href="#cb57-583" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Satisfaction levels shown by color intensity"</span>,</span>
<span id="cb57-584"><a href="#cb57-584" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Age"</span>, <span class="at">y =</span> <span class="st">"Income"</span>, <span class="at">color =</span> <span class="st">"Satisfaction"</span></span>
<span id="cb57-585"><a href="#cb57-585" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-586"><a href="#cb57-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-587"><a href="#cb57-587" aria-hidden="true" tabindex="-1"></a><span class="co"># Facet grid example</span></span>
<span id="cb57-588"><a href="#cb57-588" aria-hidden="true" tabindex="-1"></a>time_analysis <span class="ot">&lt;-</span> time_series_data <span class="sc">%&gt;%</span></span>
<span id="cb57-589"><a href="#cb57-589" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-590"><a href="#cb57-590" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> lubridate<span class="sc">::</span><span class="fu">year</span>(date),</span>
<span id="cb57-591"><a href="#cb57-591" aria-hidden="true" tabindex="-1"></a>    <span class="at">quarter =</span> <span class="fu">paste0</span>(<span class="st">"Q"</span>, lubridate<span class="sc">::</span><span class="fu">quarter</span>(date))</span>
<span id="cb57-592"><a href="#cb57-592" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb57-593"><a href="#cb57-593" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="dv">2022</span><span class="sc">:</span><span class="dv">2024</span>)</span>
<span id="cb57-594"><a href="#cb57-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-595"><a href="#cb57-595" aria-hidden="true" tabindex="-1"></a>p18 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(time_analysis, <span class="fu">aes</span>(<span class="at">x =</span> quarter, <span class="at">y =</span> value, <span class="at">fill =</span> category)) <span class="sc">+</span></span>
<span id="cb57-596"><a href="#cb57-596" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-597"><a href="#cb57-597" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb57-598"><a href="#cb57-598" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(year <span class="sc">~</span> ., <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb57-599"><a href="#cb57-599" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-600"><a href="#cb57-600" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Quarterly Performance by Category and Year"</span>,</span>
<span id="cb57-601"><a href="#cb57-601" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Faceted analysis showing temporal patterns"</span>,</span>
<span id="cb57-602"><a href="#cb57-602" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Quarter"</span>, <span class="at">y =</span> <span class="st">"Performance Value"</span>, <span class="at">fill =</span> <span class="st">"Category"</span></span>
<span id="cb57-603"><a href="#cb57-603" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-604"><a href="#cb57-604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-605"><a href="#cb57-605" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p17)</span>
<span id="cb57-606"><a href="#cb57-606" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p18)</span>
<span id="cb57-607"><a href="#cb57-607" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-608"><a href="#cb57-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-609"><a href="#cb57-609" aria-hidden="true" tabindex="-1"></a><span class="fu">## 10. Interactive Elements and Annotations</span></span>
<span id="cb57-610"><a href="#cb57-610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-611"><a href="#cb57-611" aria-hidden="true" tabindex="-1"></a>Adding annotations and highlights to make your plots more informative.</span>
<span id="cb57-612"><a href="#cb57-612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-613"><a href="#cb57-613" aria-hidden="true" tabindex="-1"></a><span class="in">```{r annotations_highlights}</span></span>
<span id="cb57-614"><a href="#cb57-614" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot with annotations</span></span>
<span id="cb57-615"><a href="#cb57-615" aria-hidden="true" tabindex="-1"></a>best_month <span class="ot">&lt;-</span> sales_data[<span class="fu">which.max</span>(sales_data<span class="sc">$</span>revenue), ]</span>
<span id="cb57-616"><a href="#cb57-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-617"><a href="#cb57-617" aria-hidden="true" tabindex="-1"></a>p19 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sales_data, <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> revenue)) <span class="sc">+</span></span>
<span id="cb57-618"><a href="#cb57-618" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> month <span class="sc">==</span> best_month<span class="sc">$</span>month), <span class="at">width =</span> <span class="fl">0.7</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-619"><a href="#cb57-619" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"FALSE"</span> <span class="ot">=</span> <span class="st">"#455A64"</span>, <span class="st">"TRUE"</span> <span class="ot">=</span> <span class="st">"#1A1A2E"</span>), <span class="at">guide =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb57-620"><a href="#cb57-620" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>(<span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">suffix =</span> <span class="st">"K"</span>)) <span class="sc">+</span></span>
<span id="cb57-621"><a href="#cb57-621" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, </span>
<span id="cb57-622"><a href="#cb57-622" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> <span class="fu">which</span>(sales_data<span class="sc">$</span>month <span class="sc">==</span> best_month<span class="sc">$</span>month), </span>
<span id="cb57-623"><a href="#cb57-623" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> best_month<span class="sc">$</span>revenue <span class="sc">+</span> <span class="dv">2000</span>,</span>
<span id="cb57-624"><a href="#cb57-624" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"Peak Month</span><span class="sc">\n</span><span class="st">$"</span>, scales<span class="sc">::</span><span class="fu">comma</span>(best_month<span class="sc">$</span>revenue)),</span>
<span id="cb57-625"><a href="#cb57-625" aria-hidden="true" tabindex="-1"></a>           <span class="at">family =</span> <span class="st">"source"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>,</span>
<span id="cb57-626"><a href="#cb57-626" aria-hidden="true" tabindex="-1"></a>           <span class="at">hjust =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb57-627"><a href="#cb57-627" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"curve"</span>, </span>
<span id="cb57-628"><a href="#cb57-628" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> <span class="fu">which</span>(sales_data<span class="sc">$</span>month <span class="sc">==</span> best_month<span class="sc">$</span>month) <span class="sc">+</span> <span class="fl">0.5</span>, </span>
<span id="cb57-629"><a href="#cb57-629" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> best_month<span class="sc">$</span>revenue <span class="sc">+</span> <span class="dv">1000</span>,</span>
<span id="cb57-630"><a href="#cb57-630" aria-hidden="true" tabindex="-1"></a>           <span class="at">xend =</span> <span class="fu">which</span>(sales_data<span class="sc">$</span>month <span class="sc">==</span> best_month<span class="sc">$</span>month) <span class="sc">+</span> <span class="fl">0.1</span>, </span>
<span id="cb57-631"><a href="#cb57-631" aria-hidden="true" tabindex="-1"></a>           <span class="at">yend =</span> best_month<span class="sc">$</span>revenue <span class="sc">+</span> <span class="dv">500</span>,</span>
<span id="cb57-632"><a href="#cb57-632" aria-hidden="true" tabindex="-1"></a>           <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">0.2</span>, <span class="st">"cm"</span>)), </span>
<span id="cb57-633"><a href="#cb57-633" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">"#533A71"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb57-634"><a href="#cb57-634" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-635"><a href="#cb57-635" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Revenue Performance with Peak Highlight"</span>,</span>
<span id="cb57-636"><a href="#cb57-636" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Annotations draw attention to key insights"</span>,</span>
<span id="cb57-637"><a href="#cb57-637" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Month"</span>, <span class="at">y =</span> <span class="st">"Revenue (in thousands)"</span></span>
<span id="cb57-638"><a href="#cb57-638" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-639"><a href="#cb57-639" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb57-640"><a href="#cb57-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-641"><a href="#cb57-641" aria-hidden="true" tabindex="-1"></a><span class="co"># Multi-layer plot with trend analysis</span></span>
<span id="cb57-642"><a href="#cb57-642" aria-hidden="true" tabindex="-1"></a>p20 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(time_series_data, <span class="fu">aes</span>(<span class="at">x =</span> date)) <span class="sc">+</span></span>
<span id="cb57-643"><a href="#cb57-643" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Background ribbon for trend</span></span>
<span id="cb57-644"><a href="#cb57-644" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> trend <span class="sc">-</span> <span class="dv">50</span>, <span class="at">ymax =</span> trend <span class="sc">+</span> <span class="dv">50</span>), </span>
<span id="cb57-645"><a href="#cb57-645" aria-hidden="true" tabindex="-1"></a>              <span class="at">fill =</span> <span class="st">"#533A71"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb57-646"><a href="#cb57-646" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Actual values</span></span>
<span id="cb57-647"><a href="#cb57-647" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> value), <span class="at">color =</span> <span class="st">"#1A1A2E"</span>, <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb57-648"><a href="#cb57-648" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Trend line</span></span>
<span id="cb57-649"><a href="#cb57-649" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> trend), <span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb57-650"><a href="#cb57-650" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Highlight recent period</span></span>
<span id="cb57-651"><a href="#cb57-651" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> <span class="fu">as.Date</span>(<span class="st">"2024-01-01"</span>), <span class="at">xmax =</span> <span class="fu">as.Date</span>(<span class="st">"2024-12-31"</span>),</span>
<span id="cb57-652"><a href="#cb57-652" aria-hidden="true" tabindex="-1"></a>                <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb57-653"><a href="#cb57-653" aria-hidden="true" tabindex="-1"></a>            <span class="at">fill =</span> <span class="st">"#6A0572"</span>, <span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb57-654"><a href="#cb57-654" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_labels =</span> <span class="st">"%Y"</span>, <span class="at">date_breaks =</span> <span class="st">"1 year"</span>) <span class="sc">+</span></span>
<span id="cb57-655"><a href="#cb57-655" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-656"><a href="#cb57-656" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Performance Analysis with Trend Confidence Interval"</span>,</span>
<span id="cb57-657"><a href="#cb57-657" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Recent period highlighted in yellow, trend shown with confidence band"</span>,</span>
<span id="cb57-658"><a href="#cb57-658" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Date"</span>, <span class="at">y =</span> <span class="st">"Performance Value"</span>,</span>
<span id="cb57-659"><a href="#cb57-659" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Dashed line shows underlying trend, ribbon shows ±50 confidence band"</span></span>
<span id="cb57-660"><a href="#cb57-660" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-661"><a href="#cb57-661" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-662"><a href="#cb57-662" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p19)</span>
<span id="cb57-663"><a href="#cb57-663" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p20)</span>
<span id="cb57-664"><a href="#cb57-664" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-665"><a href="#cb57-665" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-666"><a href="#cb57-666" aria-hidden="true" tabindex="-1"></a><span class="fu">## 11. Area Charts and Stacked Plots</span></span>
<span id="cb57-667"><a href="#cb57-667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-668"><a href="#cb57-668" aria-hidden="true" tabindex="-1"></a>Area charts are excellent for showing cumulative values and trends over time.</span>
<span id="cb57-669"><a href="#cb57-669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-670"><a href="#cb57-670" aria-hidden="true" tabindex="-1"></a><span class="in">```{r area_charts}</span></span>
<span id="cb57-671"><a href="#cb57-671" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple area chart</span></span>
<span id="cb57-672"><a href="#cb57-672" aria-hidden="true" tabindex="-1"></a>p21 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(time_series_data, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb57-673"><a href="#cb57-673" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_area</span>(<span class="at">fill =</span> <span class="st">"#1A1A2E"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb57-674"><a href="#cb57-674" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"#533A71"</span>, <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb57-675"><a href="#cb57-675" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_labels =</span> <span class="st">"%Y"</span>, <span class="at">date_breaks =</span> <span class="st">"1 year"</span>) <span class="sc">+</span></span>
<span id="cb57-676"><a href="#cb57-676" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>()) <span class="sc">+</span></span>
<span id="cb57-677"><a href="#cb57-677" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-678"><a href="#cb57-678" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Performance Area Chart"</span>,</span>
<span id="cb57-679"><a href="#cb57-679" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Cumulative performance visualization over time"</span>,</span>
<span id="cb57-680"><a href="#cb57-680" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb57-681"><a href="#cb57-681" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Performance Value"</span></span>
<span id="cb57-682"><a href="#cb57-682" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-683"><a href="#cb57-683" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-684"><a href="#cb57-684" aria-hidden="true" tabindex="-1"></a><span class="co"># Stacked area chart</span></span>
<span id="cb57-685"><a href="#cb57-685" aria-hidden="true" tabindex="-1"></a>area_data <span class="ot">&lt;-</span> time_series_data <span class="sc">%&gt;%</span></span>
<span id="cb57-686"><a href="#cb57-686" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date) <span class="sc">%&gt;%</span></span>
<span id="cb57-687"><a href="#cb57-687" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-688"><a href="#cb57-688" aria-hidden="true" tabindex="-1"></a>    <span class="at">category_value =</span> <span class="fu">case_when</span>(</span>
<span id="cb57-689"><a href="#cb57-689" aria-hidden="true" tabindex="-1"></a>      category <span class="sc">==</span> <span class="st">"A"</span> <span class="sc">~</span> value <span class="sc">*</span> <span class="fl">0.4</span>,</span>
<span id="cb57-690"><a href="#cb57-690" aria-hidden="true" tabindex="-1"></a>      category <span class="sc">==</span> <span class="st">"B"</span> <span class="sc">~</span> value <span class="sc">*</span> <span class="fl">0.35</span>,</span>
<span id="cb57-691"><a href="#cb57-691" aria-hidden="true" tabindex="-1"></a>      category <span class="sc">==</span> <span class="st">"C"</span> <span class="sc">~</span> value <span class="sc">*</span> <span class="fl">0.25</span></span>
<span id="cb57-692"><a href="#cb57-692" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb57-693"><a href="#cb57-693" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb57-694"><a href="#cb57-694" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb57-695"><a href="#cb57-695" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-696"><a href="#cb57-696" aria-hidden="true" tabindex="-1"></a>p22 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(area_data, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> category_value, <span class="at">fill =</span> category)) <span class="sc">+</span></span>
<span id="cb57-697"><a href="#cb57-697" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_area</span>(<span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span></span>
<span id="cb57-698"><a href="#cb57-698" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb57-699"><a href="#cb57-699" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_labels =</span> <span class="st">"%Y"</span>, <span class="at">date_breaks =</span> <span class="st">"1 year"</span>) <span class="sc">+</span></span>
<span id="cb57-700"><a href="#cb57-700" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>()) <span class="sc">+</span></span>
<span id="cb57-701"><a href="#cb57-701" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-702"><a href="#cb57-702" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Stacked Area Chart by Category"</span>,</span>
<span id="cb57-703"><a href="#cb57-703" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Component contribution to total performance"</span>,</span>
<span id="cb57-704"><a href="#cb57-704" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb57-705"><a href="#cb57-705" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Performance Value"</span>,</span>
<span id="cb57-706"><a href="#cb57-706" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Category"</span></span>
<span id="cb57-707"><a href="#cb57-707" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-708"><a href="#cb57-708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-709"><a href="#cb57-709" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p21)</span>
<span id="cb57-710"><a href="#cb57-710" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p22)</span>
<span id="cb57-711"><a href="#cb57-711" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-712"><a href="#cb57-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-713"><a href="#cb57-713" aria-hidden="true" tabindex="-1"></a><span class="fu">## 12. Polar and Radar Charts</span></span>
<span id="cb57-714"><a href="#cb57-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-715"><a href="#cb57-715" aria-hidden="true" tabindex="-1"></a>Polar coordinates can create unique and effective visualizations.</span>
<span id="cb57-716"><a href="#cb57-716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-717"><a href="#cb57-717" aria-hidden="true" tabindex="-1"></a><span class="in">```{r polar_charts}</span></span>
<span id="cb57-718"><a href="#cb57-718" aria-hidden="true" tabindex="-1"></a><span class="co"># Polar bar chart (rose chart)</span></span>
<span id="cb57-719"><a href="#cb57-719" aria-hidden="true" tabindex="-1"></a>monthly_summary <span class="ot">&lt;-</span> sales_data <span class="sc">%&gt;%</span></span>
<span id="cb57-720"><a href="#cb57-720" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month_num =</span> <span class="fu">as.numeric</span>(month))</span>
<span id="cb57-721"><a href="#cb57-721" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-722"><a href="#cb57-722" aria-hidden="true" tabindex="-1"></a>p23 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(monthly_summary, <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> revenue, <span class="at">fill =</span> month)) <span class="sc">+</span></span>
<span id="cb57-723"><a href="#cb57-723" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="fl">0.8</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-724"><a href="#cb57-724" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> custom_colors) <span class="sc">+</span></span>
<span id="cb57-725"><a href="#cb57-725" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">start =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb57-726"><a href="#cb57-726" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>(<span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">suffix =</span> <span class="st">"K"</span>)) <span class="sc">+</span></span>
<span id="cb57-727"><a href="#cb57-727" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-728"><a href="#cb57-728" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Circular Revenue Chart"</span>,</span>
<span id="cb57-729"><a href="#cb57-729" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Monthly performance in polar coordinates"</span>,</span>
<span id="cb57-730"><a href="#cb57-730" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Revenue (thousands)"</span></span>
<span id="cb57-731"><a href="#cb57-731" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-732"><a href="#cb57-732" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb57-733"><a href="#cb57-733" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb57-734"><a href="#cb57-734" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">0.8</span>))</span>
<span id="cb57-735"><a href="#cb57-735" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-736"><a href="#cb57-736" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-737"><a href="#cb57-737" aria-hidden="true" tabindex="-1"></a><span class="co"># Radar chart simulation</span></span>
<span id="cb57-738"><a href="#cb57-738" aria-hidden="true" tabindex="-1"></a>radar_data <span class="ot">&lt;-</span> customer_data <span class="sc">%&gt;%</span></span>
<span id="cb57-739"><a href="#cb57-739" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(category) <span class="sc">%&gt;%</span></span>
<span id="cb57-740"><a href="#cb57-740" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb57-741"><a href="#cb57-741" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_age =</span> <span class="fu">mean</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb57-742"><a href="#cb57-742" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_income =</span> <span class="fu">mean</span>(income, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">/</span> <span class="dv">1000</span>,  <span class="co"># Scale down</span></span>
<span id="cb57-743"><a href="#cb57-743" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_satisfaction =</span> <span class="fu">mean</span>(satisfaction, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb57-744"><a href="#cb57-744" aria-hidden="true" tabindex="-1"></a>    <span class="at">count =</span> <span class="fu">n</span>() <span class="sc">/</span> <span class="dv">10</span>,  <span class="co"># Scale down</span></span>
<span id="cb57-745"><a href="#cb57-745" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb57-746"><a href="#cb57-746" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb57-747"><a href="#cb57-747" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>category, <span class="at">names_to =</span> <span class="st">"metric"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb57-748"><a href="#cb57-748" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-749"><a href="#cb57-749" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Normalize values to 0-10 scale</span></span>
<span id="cb57-750"><a href="#cb57-750" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_norm =</span> scales<span class="sc">::</span><span class="fu">rescale</span>(value, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">10</span>))</span>
<span id="cb57-751"><a href="#cb57-751" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-752"><a href="#cb57-752" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-753"><a href="#cb57-753" aria-hidden="true" tabindex="-1"></a>p24 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(radar_data, <span class="fu">aes</span>(<span class="at">x =</span> metric, <span class="at">y =</span> value_norm, <span class="at">fill =</span> category)) <span class="sc">+</span></span>
<span id="cb57-754"><a href="#cb57-754" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">width =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-755"><a href="#cb57-755" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb57-756"><a href="#cb57-756" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>() <span class="sc">+</span></span>
<span id="cb57-757"><a href="#cb57-757" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>category) <span class="sc">+</span></span>
<span id="cb57-758"><a href="#cb57-758" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-759"><a href="#cb57-759" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Customer Profile Radar Charts"</span>,</span>
<span id="cb57-760"><a href="#cb57-760" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Multi-dimensional comparison across categories"</span>,</span>
<span id="cb57-761"><a href="#cb57-761" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Normalized Score"</span></span>
<span id="cb57-762"><a href="#cb57-762" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-763"><a href="#cb57-763" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb57-764"><a href="#cb57-764" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb57-765"><a href="#cb57-765" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">0.7</span>))</span>
<span id="cb57-766"><a href="#cb57-766" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-767"><a href="#cb57-767" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-768"><a href="#cb57-768" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p23)</span>
<span id="cb57-769"><a href="#cb57-769" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p24)</span>
<span id="cb57-770"><a href="#cb57-770" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-771"><a href="#cb57-771" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-772"><a href="#cb57-772" aria-hidden="true" tabindex="-1"></a><span class="fu">## 13. Statistical Plots</span></span>
<span id="cb57-773"><a href="#cb57-773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-774"><a href="#cb57-774" aria-hidden="true" tabindex="-1"></a>Advanced statistical visualizations for deeper analysis.</span>
<span id="cb57-775"><a href="#cb57-775" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-776"><a href="#cb57-776" aria-hidden="true" tabindex="-1"></a><span class="in">```{r statistical_plots}</span></span>
<span id="cb57-777"><a href="#cb57-777" aria-hidden="true" tabindex="-1"></a><span class="co"># Q-Q plot for normality testing</span></span>
<span id="cb57-778"><a href="#cb57-778" aria-hidden="true" tabindex="-1"></a>p25 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(customer_data, <span class="fu">aes</span>(<span class="at">sample =</span> income)) <span class="sc">+</span></span>
<span id="cb57-779"><a href="#cb57-779" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_qq</span>(<span class="at">color =</span> <span class="st">"#1A1A2E"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb57-780"><a href="#cb57-780" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_qq_line</span>(<span class="at">color =</span> <span class="st">"#533A71"</span>, <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb57-781"><a href="#cb57-781" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>category) <span class="sc">+</span></span>
<span id="cb57-782"><a href="#cb57-782" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-783"><a href="#cb57-783" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Q-Q Plots for Income Distribution"</span>,</span>
<span id="cb57-784"><a href="#cb57-784" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Testing normality assumption by customer category"</span>,</span>
<span id="cb57-785"><a href="#cb57-785" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Theoretical Quantiles"</span>,</span>
<span id="cb57-786"><a href="#cb57-786" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Sample Quantiles"</span></span>
<span id="cb57-787"><a href="#cb57-787" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-788"><a href="#cb57-788" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-789"><a href="#cb57-789" aria-hidden="true" tabindex="-1"></a><span class="co"># Error bars and confidence intervals</span></span>
<span id="cb57-790"><a href="#cb57-790" aria-hidden="true" tabindex="-1"></a>error_data <span class="ot">&lt;-</span> customer_data <span class="sc">%&gt;%</span></span>
<span id="cb57-791"><a href="#cb57-791" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(category, gender) <span class="sc">%&gt;%</span></span>
<span id="cb57-792"><a href="#cb57-792" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb57-793"><a href="#cb57-793" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_income =</span> <span class="fu">mean</span>(income, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb57-794"><a href="#cb57-794" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_income =</span> <span class="fu">sd</span>(income, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb57-795"><a href="#cb57-795" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb57-796"><a href="#cb57-796" aria-hidden="true" tabindex="-1"></a>    <span class="at">se_income =</span> sd_income <span class="sc">/</span> <span class="fu">sqrt</span>(n),</span>
<span id="cb57-797"><a href="#cb57-797" aria-hidden="true" tabindex="-1"></a>    <span class="at">ci_lower =</span> mean_income <span class="sc">-</span> <span class="fl">1.96</span> <span class="sc">*</span> se_income,</span>
<span id="cb57-798"><a href="#cb57-798" aria-hidden="true" tabindex="-1"></a>    <span class="at">ci_upper =</span> mean_income <span class="sc">+</span> <span class="fl">1.96</span> <span class="sc">*</span> se_income,</span>
<span id="cb57-799"><a href="#cb57-799" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb57-800"><a href="#cb57-800" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-801"><a href="#cb57-801" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-802"><a href="#cb57-802" aria-hidden="true" tabindex="-1"></a>p26 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(error_data, <span class="fu">aes</span>(<span class="at">x =</span> category, <span class="at">y =</span> mean_income, <span class="at">fill =</span> gender)) <span class="sc">+</span></span>
<span id="cb57-803"><a href="#cb57-803" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-804"><a href="#cb57-804" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(</span>
<span id="cb57-805"><a href="#cb57-805" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">ymin =</span> ci_lower, <span class="at">ymax =</span> ci_upper),</span>
<span id="cb57-806"><a href="#cb57-806" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.9</span>),</span>
<span id="cb57-807"><a href="#cb57-807" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="fl">0.2</span>,</span>
<span id="cb57-808"><a href="#cb57-808" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"#2C3E50"</span>,</span>
<span id="cb57-809"><a href="#cb57-809" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">0.8</span></span>
<span id="cb57-810"><a href="#cb57-810" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-811"><a href="#cb57-811" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#6A0572"</span>)) <span class="sc">+</span></span>
<span id="cb57-812"><a href="#cb57-812" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb57-813"><a href="#cb57-813" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-814"><a href="#cb57-814" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Mean Income with 95% Confidence Intervals"</span>,</span>
<span id="cb57-815"><a href="#cb57-815" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Statistical significance testing across groups"</span>,</span>
<span id="cb57-816"><a href="#cb57-816" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Customer Category"</span>,</span>
<span id="cb57-817"><a href="#cb57-817" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Mean Annual Income"</span>,</span>
<span id="cb57-818"><a href="#cb57-818" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Gender"</span></span>
<span id="cb57-819"><a href="#cb57-819" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-820"><a href="#cb57-820" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-821"><a href="#cb57-821" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p25)</span>
<span id="cb57-822"><a href="#cb57-822" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p26)</span>
<span id="cb57-823"><a href="#cb57-823" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-824"><a href="#cb57-824" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-825"><a href="#cb57-825" aria-hidden="true" tabindex="-1"></a><span class="fu">## 14. Network and Flow Diagrams</span></span>
<span id="cb57-826"><a href="#cb57-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-827"><a href="#cb57-827" aria-hidden="true" tabindex="-1"></a>Visualizing relationships and flows between entities.</span>
<span id="cb57-828"><a href="#cb57-828" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-829"><a href="#cb57-829" aria-hidden="true" tabindex="-1"></a><span class="in">```{r network_flow_plots}</span></span>
<span id="cb57-830"><a href="#cb57-830" aria-hidden="true" tabindex="-1"></a><span class="co"># Alluvial/Sankey-style plot</span></span>
<span id="cb57-831"><a href="#cb57-831" aria-hidden="true" tabindex="-1"></a>flow_data <span class="ot">&lt;-</span> customer_data <span class="sc">%&gt;%</span></span>
<span id="cb57-832"><a href="#cb57-832" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(category, gender, satisfaction <span class="sc">&gt;</span> <span class="dv">7</span>) <span class="sc">%&gt;%</span></span>
<span id="cb57-833"><a href="#cb57-833" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">high_satisfaction =</span> <span class="st">`</span><span class="at">satisfaction &gt; 7</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb57-834"><a href="#cb57-834" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-835"><a href="#cb57-835" aria-hidden="true" tabindex="-1"></a>    <span class="at">satisfaction_level =</span> <span class="fu">ifelse</span>(high_satisfaction, <span class="st">"High"</span>, <span class="st">"Low"</span>),</span>
<span id="cb57-836"><a href="#cb57-836" aria-hidden="true" tabindex="-1"></a>    <span class="at">flow_id =</span> <span class="fu">row_number</span>()</span>
<span id="cb57-837"><a href="#cb57-837" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-838"><a href="#cb57-838" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-839"><a href="#cb57-839" aria-hidden="true" tabindex="-1"></a><span class="co"># Create flow visualization using area plots</span></span>
<span id="cb57-840"><a href="#cb57-840" aria-hidden="true" tabindex="-1"></a>p27 <span class="ot">&lt;-</span> flow_data <span class="sc">%&gt;%</span></span>
<span id="cb57-841"><a href="#cb57-841" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-842"><a href="#cb57-842" aria-hidden="true" tabindex="-1"></a>    <span class="at">x1 =</span> <span class="dv">1</span>, <span class="at">x2 =</span> <span class="dv">2</span>, <span class="at">x3 =</span> <span class="dv">3</span>,</span>
<span id="cb57-843"><a href="#cb57-843" aria-hidden="true" tabindex="-1"></a>    <span class="at">category_y =</span> <span class="fu">as.numeric</span>(<span class="fu">as.factor</span>(category)),</span>
<span id="cb57-844"><a href="#cb57-844" aria-hidden="true" tabindex="-1"></a>    <span class="at">gender_y =</span> <span class="fu">as.numeric</span>(<span class="fu">as.factor</span>(gender)) <span class="sc">+</span> <span class="dv">3</span>,</span>
<span id="cb57-845"><a href="#cb57-845" aria-hidden="true" tabindex="-1"></a>    <span class="at">satisfaction_y =</span> <span class="fu">as.numeric</span>(<span class="fu">as.factor</span>(satisfaction_level)) <span class="sc">+</span> <span class="dv">6</span></span>
<span id="cb57-846"><a href="#cb57-846" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb57-847"><a href="#cb57-847" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb57-848"><a href="#cb57-848" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Category to Gender flows</span></span>
<span id="cb57-849"><a href="#cb57-849" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> x1, <span class="at">y =</span> category_y, <span class="at">xend =</span> x2, <span class="at">yend =</span> gender_y, <span class="at">size =</span> n),</span>
<span id="cb57-850"><a href="#cb57-850" aria-hidden="true" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">"#1A1A2E"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb57-851"><a href="#cb57-851" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Gender to Satisfaction flows  </span></span>
<span id="cb57-852"><a href="#cb57-852" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> x2, <span class="at">y =</span> gender_y, <span class="at">xend =</span> x3, <span class="at">yend =</span> satisfaction_y, <span class="at">size =</span> n),</span>
<span id="cb57-853"><a href="#cb57-853" aria-hidden="true" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">"#533A71"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb57-854"><a href="#cb57-854" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add points for nodes</span></span>
<span id="cb57-855"><a href="#cb57-855" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> x1, <span class="at">y =</span> category_y), <span class="at">size =</span> <span class="dv">8</span>, <span class="at">color =</span> <span class="st">"#1A1A2E"</span>) <span class="sc">+</span></span>
<span id="cb57-856"><a href="#cb57-856" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> x2, <span class="at">y =</span> gender_y), <span class="at">size =</span> <span class="dv">8</span>, <span class="at">color =</span> <span class="st">"#533A71"</span>) <span class="sc">+</span></span>
<span id="cb57-857"><a href="#cb57-857" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> x3, <span class="at">y =</span> satisfaction_y), <span class="at">size =</span> <span class="dv">8</span>, <span class="at">color =</span> <span class="st">"#0F3460"</span>) <span class="sc">+</span></span>
<span id="cb57-858"><a href="#cb57-858" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">10</span>), <span class="at">guide =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb57-859"><a href="#cb57-859" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Category"</span>, <span class="st">"Gender"</span>, <span class="st">"Satisfaction"</span>)) <span class="sc">+</span></span>
<span id="cb57-860"><a href="#cb57-860" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-861"><a href="#cb57-861" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Customer Flow Diagram"</span>,</span>
<span id="cb57-862"><a href="#cb57-862" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Relationships between category, gender, and satisfaction"</span>,</span>
<span id="cb57-863"><a href="#cb57-863" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">""</span></span>
<span id="cb57-864"><a href="#cb57-864" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-865"><a href="#cb57-865" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb57-866"><a href="#cb57-866" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb57-867"><a href="#cb57-867" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb57-868"><a href="#cb57-868" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-869"><a href="#cb57-869" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-870"><a href="#cb57-870" aria-hidden="true" tabindex="-1"></a><span class="co"># Chord diagram simulation using polar coordinates</span></span>
<span id="cb57-871"><a href="#cb57-871" aria-hidden="true" tabindex="-1"></a>chord_data <span class="ot">&lt;-</span> customer_data <span class="sc">%&gt;%</span></span>
<span id="cb57-872"><a href="#cb57-872" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(category, gender) <span class="sc">%&gt;%</span></span>
<span id="cb57-873"><a href="#cb57-873" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-874"><a href="#cb57-874" aria-hidden="true" tabindex="-1"></a>    <span class="at">angle =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">2</span><span class="sc">*</span>pi, <span class="at">length.out =</span> <span class="fu">n</span>()),</span>
<span id="cb57-875"><a href="#cb57-875" aria-hidden="true" tabindex="-1"></a>    <span class="at">radius =</span> scales<span class="sc">::</span><span class="fu">rescale</span>(n, <span class="at">to =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">5</span>))</span>
<span id="cb57-876"><a href="#cb57-876" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-877"><a href="#cb57-877" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-878"><a href="#cb57-878" aria-hidden="true" tabindex="-1"></a>p28 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(chord_data, <span class="fu">aes</span>(<span class="at">x =</span> angle, <span class="at">y =</span> radius)) <span class="sc">+</span></span>
<span id="cb57-879"><a href="#cb57-879" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> category), <span class="at">width =</span> <span class="fl">0.3</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-880"><a href="#cb57-880" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb57-881"><a href="#cb57-881" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">start =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb57-882"><a href="#cb57-882" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-883"><a href="#cb57-883" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Circular Relationship Plot"</span>,</span>
<span id="cb57-884"><a href="#cb57-884" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Category-Gender distribution in polar coordinates"</span>,</span>
<span id="cb57-885"><a href="#cb57-885" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Category"</span></span>
<span id="cb57-886"><a href="#cb57-886" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-887"><a href="#cb57-887" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb57-888"><a href="#cb57-888" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-889"><a href="#cb57-889" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p27)</span>
<span id="cb57-890"><a href="#cb57-890" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p28)</span>
<span id="cb57-891"><a href="#cb57-891" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-892"><a href="#cb57-892" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-893"><a href="#cb57-893" aria-hidden="true" tabindex="-1"></a><span class="fu">## 15. Advanced Distribution Plots</span></span>
<span id="cb57-894"><a href="#cb57-894" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-895"><a href="#cb57-895" aria-hidden="true" tabindex="-1"></a>Sophisticated ways to visualize and compare distributions.</span>
<span id="cb57-896"><a href="#cb57-896" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-897"><a href="#cb57-897" aria-hidden="true" tabindex="-1"></a><span class="in">```{r advanced_distributions}</span></span>
<span id="cb57-898"><a href="#cb57-898" aria-hidden="true" tabindex="-1"></a><span class="co"># Strip charts with jitter</span></span>
<span id="cb57-899"><a href="#cb57-899" aria-hidden="true" tabindex="-1"></a>p29 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(customer_data, <span class="fu">aes</span>(<span class="at">x =</span> category, <span class="at">y =</span> income, <span class="at">color =</span> category)) <span class="sc">+</span></span>
<span id="cb57-900"><a href="#cb57-900" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">width =</span> <span class="fl">0.3</span>, <span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb57-901"><a href="#cb57-901" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> median, <span class="at">geom =</span> <span class="st">"crossbar"</span>, <span class="at">width =</span> <span class="fl">0.5</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb57-902"><a href="#cb57-902" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb57-903"><a href="#cb57-903" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb57-904"><a href="#cb57-904" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-905"><a href="#cb57-905" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Income Distribution Strip Chart"</span>,</span>
<span id="cb57-906"><a href="#cb57-906" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Individual data points with median crossbars"</span>,</span>
<span id="cb57-907"><a href="#cb57-907" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Customer Category"</span>,</span>
<span id="cb57-908"><a href="#cb57-908" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Annual Income"</span></span>
<span id="cb57-909"><a href="#cb57-909" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-910"><a href="#cb57-910" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb57-911"><a href="#cb57-911" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-912"><a href="#cb57-912" aria-hidden="true" tabindex="-1"></a><span class="co"># Slope graph</span></span>
<span id="cb57-913"><a href="#cb57-913" aria-hidden="true" tabindex="-1"></a>slope_data <span class="ot">&lt;-</span> sales_data <span class="sc">%&gt;%</span></span>
<span id="cb57-914"><a href="#cb57-914" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(month, revenue, profit) <span class="sc">%&gt;%</span></span>
<span id="cb57-915"><a href="#cb57-915" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Jan"</span>, <span class="st">"Jun"</span>, <span class="st">"Dec"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb57-916"><a href="#cb57-916" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(revenue, profit), <span class="at">names_to =</span> <span class="st">"metric"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb57-917"><a href="#cb57-917" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> <span class="fu">factor</span>(month, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Jan"</span>, <span class="st">"Jun"</span>, <span class="st">"Dec"</span>)))</span>
<span id="cb57-918"><a href="#cb57-918" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-919"><a href="#cb57-919" aria-hidden="true" tabindex="-1"></a>p30 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(slope_data, <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> value, <span class="at">group =</span> metric, <span class="at">color =</span> metric)) <span class="sc">+</span></span>
<span id="cb57-920"><a href="#cb57-920" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-921"><a href="#cb57-921" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb57-922"><a href="#cb57-922" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> scales<span class="sc">::</span><span class="fu">dollar</span>(value, <span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">suffix =</span> <span class="st">"K"</span>)), </span>
<span id="cb57-923"><a href="#cb57-923" aria-hidden="true" tabindex="-1"></a>            <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>, <span class="at">family =</span> <span class="st">"source"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb57-924"><a href="#cb57-924" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"profit"</span> <span class="ot">=</span> <span class="st">"#1A1A2E"</span>, <span class="st">"revenue"</span> <span class="ot">=</span> <span class="st">"#533A71"</span>)) <span class="sc">+</span></span>
<span id="cb57-925"><a href="#cb57-925" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>(<span class="at">scale =</span> <span class="fl">1e-3</span>, <span class="at">suffix =</span> <span class="st">"K"</span>)) <span class="sc">+</span></span>
<span id="cb57-926"><a href="#cb57-926" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-927"><a href="#cb57-927" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Revenue vs Profit Slope Graph"</span>,</span>
<span id="cb57-928"><a href="#cb57-928" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Performance progression across key months"</span>,</span>
<span id="cb57-929"><a href="#cb57-929" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Month"</span>,</span>
<span id="cb57-930"><a href="#cb57-930" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Amount (thousands)"</span>,</span>
<span id="cb57-931"><a href="#cb57-931" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Metric"</span></span>
<span id="cb57-932"><a href="#cb57-932" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-933"><a href="#cb57-933" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-934"><a href="#cb57-934" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p29)</span>
<span id="cb57-935"><a href="#cb57-935" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p30)</span>
<span id="cb57-936"><a href="#cb57-936" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-937"><a href="#cb57-937" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-938"><a href="#cb57-938" aria-hidden="true" tabindex="-1"></a><span class="fu">## 16. Specialized Business Plots</span></span>
<span id="cb57-939"><a href="#cb57-939" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-940"><a href="#cb57-940" aria-hidden="true" tabindex="-1"></a>Industry-specific and business-focused visualizations.</span>
<span id="cb57-941"><a href="#cb57-941" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-942"><a href="#cb57-942" aria-hidden="true" tabindex="-1"></a><span class="in">```{r business_plots}</span></span>
<span id="cb57-943"><a href="#cb57-943" aria-hidden="true" tabindex="-1"></a><span class="co"># Bullet chart simulation</span></span>
<span id="cb57-944"><a href="#cb57-944" aria-hidden="true" tabindex="-1"></a>target_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-945"><a href="#cb57-945" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric =</span> <span class="fu">c</span>(<span class="st">"Revenue"</span>, <span class="st">"Profit"</span>, <span class="st">"Customers"</span>, <span class="st">"Satisfaction"</span>),</span>
<span id="cb57-946"><a href="#cb57-946" aria-hidden="true" tabindex="-1"></a>  <span class="at">actual =</span> <span class="fu">c</span>(<span class="dv">78000</span>, <span class="dv">23400</span>, <span class="dv">500</span>, <span class="fl">7.2</span>),</span>
<span id="cb57-947"><a href="#cb57-947" aria-hidden="true" tabindex="-1"></a>  <span class="at">target =</span> <span class="fu">c</span>(<span class="dv">80000</span>, <span class="dv">25000</span>, <span class="dv">600</span>, <span class="fl">8.0</span>),</span>
<span id="cb57-948"><a href="#cb57-948" aria-hidden="true" tabindex="-1"></a>  <span class="at">poor =</span> <span class="fu">c</span>(<span class="dv">60000</span>, <span class="dv">15000</span>, <span class="dv">300</span>, <span class="fl">5.0</span>),</span>
<span id="cb57-949"><a href="#cb57-949" aria-hidden="true" tabindex="-1"></a>  <span class="at">good =</span> <span class="fu">c</span>(<span class="dv">75000</span>, <span class="dv">22000</span>, <span class="dv">500</span>, <span class="fl">7.5</span>)</span>
<span id="cb57-950"><a href="#cb57-950" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb57-951"><a href="#cb57-951" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-952"><a href="#cb57-952" aria-hidden="true" tabindex="-1"></a>p31 <span class="ot">&lt;-</span> target_data <span class="sc">%&gt;%</span></span>
<span id="cb57-953"><a href="#cb57-953" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(poor, good, target), <span class="at">names_to =</span> <span class="st">"benchmark"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb57-954"><a href="#cb57-954" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> metric)) <span class="sc">+</span></span>
<span id="cb57-955"><a href="#cb57-955" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y =</span> value, <span class="at">fill =</span> benchmark), </span>
<span id="cb57-956"><a href="#cb57-956" aria-hidden="true" tabindex="-1"></a>           <span class="at">position =</span> <span class="st">"identity"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">width =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb57-957"><a href="#cb57-957" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> actual), <span class="at">size =</span> <span class="dv">4</span>, <span class="at">color =</span> <span class="st">"#1A1A2E"</span>) <span class="sc">+</span></span>
<span id="cb57-958"><a href="#cb57-958" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">y =</span> actual, <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">comma</span>(actual)), </span>
<span id="cb57-959"><a href="#cb57-959" aria-hidden="true" tabindex="-1"></a>            <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.2</span>, <span class="at">family =</span> <span class="st">"source"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb57-960"><a href="#cb57-960" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"poor"</span> <span class="ot">=</span> <span class="st">"#6A0572"</span>, <span class="st">"good"</span> <span class="ot">=</span> <span class="st">"#533A71"</span>, <span class="st">"target"</span> <span class="ot">=</span> <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb57-961"><a href="#cb57-961" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb57-962"><a href="#cb57-962" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-963"><a href="#cb57-963" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Performance Bullet Chart"</span>,</span>
<span id="cb57-964"><a href="#cb57-964" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Actual vs target performance with benchmark ranges"</span>,</span>
<span id="cb57-965"><a href="#cb57-965" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Metrics"</span>,</span>
<span id="cb57-966"><a href="#cb57-966" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Value"</span>,</span>
<span id="cb57-967"><a href="#cb57-967" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Benchmark"</span></span>
<span id="cb57-968"><a href="#cb57-968" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-969"><a href="#cb57-969" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-970"><a href="#cb57-970" aria-hidden="true" tabindex="-1"></a><span class="co"># Funnel chart</span></span>
<span id="cb57-971"><a href="#cb57-971" aria-hidden="true" tabindex="-1"></a>funnel_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-972"><a href="#cb57-972" aria-hidden="true" tabindex="-1"></a>  <span class="at">stage =</span> <span class="fu">c</span>(<span class="st">"Leads"</span>, <span class="st">"Qualified"</span>, <span class="st">"Proposals"</span>, <span class="st">"Negotiations"</span>, <span class="st">"Closed"</span>),</span>
<span id="cb57-973"><a href="#cb57-973" aria-hidden="true" tabindex="-1"></a>  <span class="at">count =</span> <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">750</span>, <span class="dv">400</span>, <span class="dv">200</span>, <span class="dv">120</span>),</span>
<span id="cb57-974"><a href="#cb57-974" aria-hidden="true" tabindex="-1"></a>  <span class="at">order =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb57-975"><a href="#cb57-975" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb57-976"><a href="#cb57-976" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-977"><a href="#cb57-977" aria-hidden="true" tabindex="-1"></a>    <span class="at">percentage =</span> count <span class="sc">/</span> <span class="fu">max</span>(count) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb57-978"><a href="#cb57-978" aria-hidden="true" tabindex="-1"></a>    <span class="at">stage =</span> <span class="fu">factor</span>(stage, <span class="at">levels =</span> stage)</span>
<span id="cb57-979"><a href="#cb57-979" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-980"><a href="#cb57-980" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-981"><a href="#cb57-981" aria-hidden="true" tabindex="-1"></a>p32 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(funnel_data, <span class="fu">aes</span>(<span class="at">x =</span> order, <span class="at">y =</span> count, <span class="at">fill =</span> stage)) <span class="sc">+</span></span>
<span id="cb57-982"><a href="#cb57-982" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="fl">0.8</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-983"><a href="#cb57-983" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(count, <span class="st">"</span><span class="sc">\n</span><span class="st">("</span>, <span class="fu">round</span>(percentage, <span class="dv">1</span>), <span class="st">"%)"</span>)), </span>
<span id="cb57-984"><a href="#cb57-984" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">family =</span> <span class="st">"source"</span>) <span class="sc">+</span></span>
<span id="cb57-985"><a href="#cb57-985" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> custom_colors[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]) <span class="sc">+</span></span>
<span id="cb57-986"><a href="#cb57-986" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">labels =</span> funnel_data<span class="sc">$</span>stage) <span class="sc">+</span></span>
<span id="cb57-987"><a href="#cb57-987" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>()) <span class="sc">+</span></span>
<span id="cb57-988"><a href="#cb57-988" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-989"><a href="#cb57-989" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Sales Funnel Analysis"</span>,</span>
<span id="cb57-990"><a href="#cb57-990" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Conversion rates through sales pipeline"</span>,</span>
<span id="cb57-991"><a href="#cb57-991" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Sales Stage"</span>,</span>
<span id="cb57-992"><a href="#cb57-992" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Count"</span>,</span>
<span id="cb57-993"><a href="#cb57-993" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Stage"</span></span>
<span id="cb57-994"><a href="#cb57-994" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-995"><a href="#cb57-995" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb57-996"><a href="#cb57-996" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-997"><a href="#cb57-997" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p31)</span>
<span id="cb57-998"><a href="#cb57-998" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p32)</span>
<span id="cb57-999"><a href="#cb57-999" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-1000"><a href="#cb57-1000" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1001"><a href="#cb57-1001" aria-hidden="true" tabindex="-1"></a><span class="fu">## 17. Tree Maps and Hierarchical Plots</span></span>
<span id="cb57-1002"><a href="#cb57-1002" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1003"><a href="#cb57-1003" aria-hidden="true" tabindex="-1"></a>Visualizing hierarchical data and proportional relationships.</span>
<span id="cb57-1004"><a href="#cb57-1004" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1005"><a href="#cb57-1005" aria-hidden="true" tabindex="-1"></a><span class="in">```{r treemap_hierarchical}</span></span>
<span id="cb57-1006"><a href="#cb57-1006" aria-hidden="true" tabindex="-1"></a><span class="co"># Treemap simulation using rectangles</span></span>
<span id="cb57-1007"><a href="#cb57-1007" aria-hidden="true" tabindex="-1"></a>treemap_data <span class="ot">&lt;-</span> customer_data <span class="sc">%&gt;%</span></span>
<span id="cb57-1008"><a href="#cb57-1008" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(category, gender) <span class="sc">%&gt;%</span></span>
<span id="cb57-1009"><a href="#cb57-1009" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(category) <span class="sc">%&gt;%</span></span>
<span id="cb57-1010"><a href="#cb57-1010" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-1011"><a href="#cb57-1011" aria-hidden="true" tabindex="-1"></a>    <span class="at">category_total =</span> <span class="fu">sum</span>(n),</span>
<span id="cb57-1012"><a href="#cb57-1012" aria-hidden="true" tabindex="-1"></a>    <span class="at">prop_in_category =</span> n <span class="sc">/</span> category_total,</span>
<span id="cb57-1013"><a href="#cb57-1013" aria-hidden="true" tabindex="-1"></a>    <span class="at">category_prop =</span> category_total <span class="sc">/</span> <span class="fu">sum</span>(customer_data <span class="sc">%&gt;%</span> <span class="fu">count</span>(category) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(n))</span>
<span id="cb57-1014"><a href="#cb57-1014" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb57-1015"><a href="#cb57-1015" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb57-1016"><a href="#cb57-1016" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(category_total), <span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb57-1017"><a href="#cb57-1017" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-1018"><a href="#cb57-1018" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate rectangle positions</span></span>
<span id="cb57-1019"><a href="#cb57-1019" aria-hidden="true" tabindex="-1"></a>    <span class="at">id =</span> <span class="fu">row_number</span>(),</span>
<span id="cb57-1020"><a href="#cb57-1020" aria-hidden="true" tabindex="-1"></a>    <span class="at">xmin =</span> <span class="fu">case_when</span>(</span>
<span id="cb57-1021"><a href="#cb57-1021" aria-hidden="true" tabindex="-1"></a>      category <span class="sc">==</span> <span class="st">"Standard"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb57-1022"><a href="#cb57-1022" aria-hidden="true" tabindex="-1"></a>      category <span class="sc">==</span> <span class="st">"Premium"</span> <span class="sc">~</span> <span class="fl">0.5</span>,</span>
<span id="cb57-1023"><a href="#cb57-1023" aria-hidden="true" tabindex="-1"></a>      category <span class="sc">==</span> <span class="st">"Basic"</span> <span class="sc">~</span> <span class="fl">0.75</span></span>
<span id="cb57-1024"><a href="#cb57-1024" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb57-1025"><a href="#cb57-1025" aria-hidden="true" tabindex="-1"></a>    <span class="at">xmax =</span> <span class="fu">case_when</span>(</span>
<span id="cb57-1026"><a href="#cb57-1026" aria-hidden="true" tabindex="-1"></a>      category <span class="sc">==</span> <span class="st">"Standard"</span> <span class="sc">~</span> <span class="fl">0.5</span>,</span>
<span id="cb57-1027"><a href="#cb57-1027" aria-hidden="true" tabindex="-1"></a>      category <span class="sc">==</span> <span class="st">"Premium"</span> <span class="sc">~</span> <span class="fl">0.75</span>,</span>
<span id="cb57-1028"><a href="#cb57-1028" aria-hidden="true" tabindex="-1"></a>      category <span class="sc">==</span> <span class="st">"Basic"</span> <span class="sc">~</span> <span class="dv">1</span></span>
<span id="cb57-1029"><a href="#cb57-1029" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb57-1030"><a href="#cb57-1030" aria-hidden="true" tabindex="-1"></a>    <span class="at">ymin =</span> <span class="fu">case_when</span>(</span>
<span id="cb57-1031"><a href="#cb57-1031" aria-hidden="true" tabindex="-1"></a>      gender <span class="sc">==</span> <span class="st">"Female"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb57-1032"><a href="#cb57-1032" aria-hidden="true" tabindex="-1"></a>      gender <span class="sc">==</span> <span class="st">"Male"</span> <span class="sc">~</span> <span class="fl">0.5</span>,</span>
<span id="cb57-1033"><a href="#cb57-1033" aria-hidden="true" tabindex="-1"></a>      gender <span class="sc">==</span> <span class="st">"Other"</span> <span class="sc">~</span> <span class="fl">0.8</span></span>
<span id="cb57-1034"><a href="#cb57-1034" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb57-1035"><a href="#cb57-1035" aria-hidden="true" tabindex="-1"></a>    <span class="at">ymax =</span> <span class="fu">case_when</span>(</span>
<span id="cb57-1036"><a href="#cb57-1036" aria-hidden="true" tabindex="-1"></a>      gender <span class="sc">==</span> <span class="st">"Female"</span> <span class="sc">~</span> <span class="fl">0.5</span>,</span>
<span id="cb57-1037"><a href="#cb57-1037" aria-hidden="true" tabindex="-1"></a>      gender <span class="sc">==</span> <span class="st">"Male"</span> <span class="sc">~</span> <span class="fl">0.8</span>,</span>
<span id="cb57-1038"><a href="#cb57-1038" aria-hidden="true" tabindex="-1"></a>      gender <span class="sc">==</span> <span class="st">"Other"</span> <span class="sc">~</span> <span class="dv">1</span></span>
<span id="cb57-1039"><a href="#cb57-1039" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb57-1040"><a href="#cb57-1040" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1041"><a href="#cb57-1041" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1042"><a href="#cb57-1042" aria-hidden="true" tabindex="-1"></a>p33 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(treemap_data) <span class="sc">+</span></span>
<span id="cb57-1043"><a href="#cb57-1043" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> xmin, <span class="at">xmax =</span> xmax, <span class="at">ymin =</span> ymin, <span class="at">ymax =</span> ymax, </span>
<span id="cb57-1044"><a href="#cb57-1044" aria-hidden="true" tabindex="-1"></a>                <span class="at">fill =</span> category), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-1045"><a href="#cb57-1045" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x =</span> (xmin <span class="sc">+</span> xmax)<span class="sc">/</span><span class="dv">2</span>, <span class="at">y =</span> (ymin <span class="sc">+</span> ymax)<span class="sc">/</span><span class="dv">2</span>, </span>
<span id="cb57-1046"><a href="#cb57-1046" aria-hidden="true" tabindex="-1"></a>                <span class="at">label =</span> <span class="fu">paste0</span>(category, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, gender, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, n)), </span>
<span id="cb57-1047"><a href="#cb57-1047" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">family =</span> <span class="st">"source"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb57-1048"><a href="#cb57-1048" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb57-1049"><a href="#cb57-1049" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-1050"><a href="#cb57-1050" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Customer Segment Treemap"</span>,</span>
<span id="cb57-1051"><a href="#cb57-1051" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Hierarchical view of category and gender distribution"</span></span>
<span id="cb57-1052"><a href="#cb57-1052" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1053"><a href="#cb57-1053" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb57-1054"><a href="#cb57-1054" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb57-1055"><a href="#cb57-1055" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb57-1056"><a href="#cb57-1056" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"playfair"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.6</span>), <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>),</span>
<span id="cb57-1057"><a href="#cb57-1057" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">"source"</span>, <span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.1</span>), <span class="at">color =</span> <span class="st">"#7F8C8D"</span>)</span>
<span id="cb57-1058"><a href="#cb57-1058" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1059"><a href="#cb57-1059" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1060"><a href="#cb57-1060" aria-hidden="true" tabindex="-1"></a><span class="co"># Sunburst chart simulation</span></span>
<span id="cb57-1061"><a href="#cb57-1061" aria-hidden="true" tabindex="-1"></a>sunburst_data <span class="ot">&lt;-</span> customer_data <span class="sc">%&gt;%</span></span>
<span id="cb57-1062"><a href="#cb57-1062" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">satisfaction_group =</span> <span class="fu">ifelse</span>(satisfaction <span class="sc">&gt;</span> <span class="dv">7</span>, <span class="st">"High"</span>, <span class="st">"Low"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb57-1063"><a href="#cb57-1063" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(category, gender, satisfaction_group) <span class="sc">%&gt;%</span></span>
<span id="cb57-1064"><a href="#cb57-1064" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-1065"><a href="#cb57-1065" aria-hidden="true" tabindex="-1"></a>    <span class="at">angle_start =</span> <span class="fu">cumsum</span>(<span class="fu">lag</span>(n, <span class="at">default =</span> <span class="dv">0</span>)) <span class="sc">/</span> <span class="fu">sum</span>(n) <span class="sc">*</span> <span class="dv">2</span> <span class="sc">*</span> pi,</span>
<span id="cb57-1066"><a href="#cb57-1066" aria-hidden="true" tabindex="-1"></a>    <span class="at">angle_end =</span> <span class="fu">cumsum</span>(n) <span class="sc">/</span> <span class="fu">sum</span>(n) <span class="sc">*</span> <span class="dv">2</span> <span class="sc">*</span> pi,</span>
<span id="cb57-1067"><a href="#cb57-1067" aria-hidden="true" tabindex="-1"></a>    <span class="at">angle_mid =</span> (angle_start <span class="sc">+</span> angle_end) <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb57-1068"><a href="#cb57-1068" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1069"><a href="#cb57-1069" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1070"><a href="#cb57-1070" aria-hidden="true" tabindex="-1"></a>p34 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sunburst_data) <span class="sc">+</span></span>
<span id="cb57-1071"><a href="#cb57-1071" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> <span class="dv">1</span>, <span class="at">xmax =</span> <span class="dv">2</span>, </span>
<span id="cb57-1072"><a href="#cb57-1072" aria-hidden="true" tabindex="-1"></a>                <span class="at">ymin =</span> angle_start, <span class="at">ymax =</span> angle_end, </span>
<span id="cb57-1073"><a href="#cb57-1073" aria-hidden="true" tabindex="-1"></a>                <span class="at">fill =</span> category), <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-1074"><a href="#cb57-1074" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> <span class="dv">2</span>, <span class="at">xmax =</span> <span class="dv">3</span>,</span>
<span id="cb57-1075"><a href="#cb57-1075" aria-hidden="true" tabindex="-1"></a>                <span class="at">ymin =</span> angle_start, <span class="at">ymax =</span> angle_end,</span>
<span id="cb57-1076"><a href="#cb57-1076" aria-hidden="true" tabindex="-1"></a>                <span class="at">fill =</span> gender), <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb57-1077"><a href="#cb57-1077" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>, <span class="st">"#6A0572"</span>, <span class="st">"#AB0E86"</span>, <span class="st">"#263238"</span>)) <span class="sc">+</span></span>
<span id="cb57-1078"><a href="#cb57-1078" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb57-1079"><a href="#cb57-1079" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb57-1080"><a href="#cb57-1080" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-1081"><a href="#cb57-1081" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Customer Hierarchy Sunburst"</span>,</span>
<span id="cb57-1082"><a href="#cb57-1082" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Multi-level categorical breakdown"</span></span>
<span id="cb57-1083"><a href="#cb57-1083" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1084"><a href="#cb57-1084" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb57-1085"><a href="#cb57-1085" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb57-1086"><a href="#cb57-1086" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1087"><a href="#cb57-1087" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p33)</span>
<span id="cb57-1088"><a href="#cb57-1088" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p34)</span>
<span id="cb57-1089"><a href="#cb57-1089" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-1090"><a href="#cb57-1090" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1091"><a href="#cb57-1091" aria-hidden="true" tabindex="-1"></a><span class="fu">## 18. Time Series Decomposition and Calendar Plots</span></span>
<span id="cb57-1092"><a href="#cb57-1092" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1093"><a href="#cb57-1093" aria-hidden="true" tabindex="-1"></a>Advanced time-based visualizations.</span>
<span id="cb57-1094"><a href="#cb57-1094" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1095"><a href="#cb57-1095" aria-hidden="true" tabindex="-1"></a><span class="in">```{r time_series_advanced}</span></span>
<span id="cb57-1096"><a href="#cb57-1096" aria-hidden="true" tabindex="-1"></a><span class="co"># Calendar heatmap simulation</span></span>
<span id="cb57-1097"><a href="#cb57-1097" aria-hidden="true" tabindex="-1"></a>calendar_data <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb57-1098"><a href="#cb57-1098" aria-hidden="true" tabindex="-1"></a>  <span class="at">week =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">52</span>,</span>
<span id="cb57-1099"><a href="#cb57-1099" aria-hidden="true" tabindex="-1"></a>  <span class="at">weekday =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span></span>
<span id="cb57-1100"><a href="#cb57-1100" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb57-1101"><a href="#cb57-1101" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-1102"><a href="#cb57-1102" aria-hidden="true" tabindex="-1"></a>    <span class="at">date =</span> <span class="fu">as.Date</span>(<span class="st">"2024-01-01"</span>) <span class="sc">+</span> (week <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">*</span> <span class="dv">7</span> <span class="sc">+</span> (weekday <span class="sc">-</span> <span class="dv">1</span>),</span>
<span id="cb57-1103"><a href="#cb57-1103" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> <span class="fu">sin</span>(week <span class="sc">*</span> <span class="fl">0.1</span>) <span class="sc">*</span> <span class="dv">100</span> <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="fu">n</span>(), <span class="dv">0</span>, <span class="dv">20</span>) <span class="sc">+</span> <span class="dv">500</span>,</span>
<span id="cb57-1104"><a href="#cb57-1104" aria-hidden="true" tabindex="-1"></a>    <span class="at">month =</span> <span class="fu">format</span>(date, <span class="st">"%b"</span>)</span>
<span id="cb57-1105"><a href="#cb57-1105" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb57-1106"><a href="#cb57-1106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(date <span class="sc">&lt;=</span> <span class="fu">as.Date</span>(<span class="st">"2024-12-31"</span>))</span>
<span id="cb57-1107"><a href="#cb57-1107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1108"><a href="#cb57-1108" aria-hidden="true" tabindex="-1"></a>p35 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(calendar_data, <span class="fu">aes</span>(<span class="at">x =</span> weekday, <span class="at">y =</span> week, <span class="at">fill =</span> value)) <span class="sc">+</span></span>
<span id="cb57-1109"><a href="#cb57-1109" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb57-1110"><a href="#cb57-1110" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(</span>
<span id="cb57-1111"><a href="#cb57-1111" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"#1A1A2E"</span>, </span>
<span id="cb57-1112"><a href="#cb57-1112" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid =</span> <span class="st">"#533A71"</span>, </span>
<span id="cb57-1113"><a href="#cb57-1113" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"#AB0E86"</span>,</span>
<span id="cb57-1114"><a href="#cb57-1114" aria-hidden="true" tabindex="-1"></a>    <span class="at">midpoint =</span> <span class="dv">500</span>,</span>
<span id="cb57-1115"><a href="#cb57-1115" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Activity"</span></span>
<span id="cb57-1116"><a href="#cb57-1116" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1117"><a href="#cb57-1117" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Mon"</span>, <span class="st">"Tue"</span>, <span class="st">"Wed"</span>, <span class="st">"Thu"</span>, <span class="st">"Fri"</span>, <span class="st">"Sat"</span>, <span class="st">"Sun"</span>)) <span class="sc">+</span></span>
<span id="cb57-1118"><a href="#cb57-1118" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_reverse</span>() <span class="sc">+</span></span>
<span id="cb57-1119"><a href="#cb57-1119" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-1120"><a href="#cb57-1120" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Annual Activity Calendar Heatmap"</span>,</span>
<span id="cb57-1121"><a href="#cb57-1121" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Daily activity levels throughout 2024"</span>,</span>
<span id="cb57-1122"><a href="#cb57-1122" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Day of Week"</span>,</span>
<span id="cb57-1123"><a href="#cb57-1123" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Week of Year"</span></span>
<span id="cb57-1124"><a href="#cb57-1124" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1125"><a href="#cb57-1125" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb57-1126"><a href="#cb57-1126" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb57-1127"><a href="#cb57-1127" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb57-1128"><a href="#cb57-1128" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1129"><a href="#cb57-1129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1130"><a href="#cb57-1130" aria-hidden="true" tabindex="-1"></a><span class="co"># Time series decomposition plot</span></span>
<span id="cb57-1131"><a href="#cb57-1131" aria-hidden="true" tabindex="-1"></a>decomp_data <span class="ot">&lt;-</span> time_series_data <span class="sc">%&gt;%</span></span>
<span id="cb57-1132"><a href="#cb57-1132" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-1133"><a href="#cb57-1133" aria-hidden="true" tabindex="-1"></a>    <span class="at">seasonal =</span> <span class="dv">50</span> <span class="sc">*</span> <span class="fu">sin</span>(<span class="dv">2</span> <span class="sc">*</span> pi <span class="sc">*</span> <span class="fu">as.numeric</span>(date <span class="sc">-</span> <span class="fu">min</span>(date)) <span class="sc">/</span> <span class="fl">365.25</span>),</span>
<span id="cb57-1134"><a href="#cb57-1134" aria-hidden="true" tabindex="-1"></a>    <span class="at">trend_component =</span> trend,</span>
<span id="cb57-1135"><a href="#cb57-1135" aria-hidden="true" tabindex="-1"></a>    <span class="at">noise =</span> value <span class="sc">-</span> trend <span class="sc">-</span> seasonal,</span>
<span id="cb57-1136"><a href="#cb57-1136" aria-hidden="true" tabindex="-1"></a>    <span class="at">reconstructed =</span> trend_component <span class="sc">+</span> seasonal <span class="sc">+</span> noise</span>
<span id="cb57-1137"><a href="#cb57-1137" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb57-1138"><a href="#cb57-1138" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(date, value, trend_component, seasonal, noise) <span class="sc">%&gt;%</span></span>
<span id="cb57-1139"><a href="#cb57-1139" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>date, <span class="at">names_to =</span> <span class="st">"component"</span>, <span class="at">values_to =</span> <span class="st">"val"</span>)</span>
<span id="cb57-1140"><a href="#cb57-1140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1141"><a href="#cb57-1141" aria-hidden="true" tabindex="-1"></a>p36 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(decomp_data, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> val)) <span class="sc">+</span></span>
<span id="cb57-1142"><a href="#cb57-1142" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"#1A1A2E"</span>, <span class="at">size =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-1143"><a href="#cb57-1143" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>component, <span class="at">scales =</span> <span class="st">"free_y"</span>, <span class="at">ncol =</span> <span class="dv">1</span>, </span>
<span id="cb57-1144"><a href="#cb57-1144" aria-hidden="true" tabindex="-1"></a>             <span class="at">labeller =</span> <span class="fu">labeller</span>(<span class="at">component =</span> <span class="fu">c</span>(</span>
<span id="cb57-1145"><a href="#cb57-1145" aria-hidden="true" tabindex="-1"></a>               <span class="st">"value"</span> <span class="ot">=</span> <span class="st">"Original Series"</span>,</span>
<span id="cb57-1146"><a href="#cb57-1146" aria-hidden="true" tabindex="-1"></a>               <span class="st">"trend_component"</span> <span class="ot">=</span> <span class="st">"Trend"</span>,</span>
<span id="cb57-1147"><a href="#cb57-1147" aria-hidden="true" tabindex="-1"></a>               <span class="st">"seasonal"</span> <span class="ot">=</span> <span class="st">"Seasonal"</span>,</span>
<span id="cb57-1148"><a href="#cb57-1148" aria-hidden="true" tabindex="-1"></a>               <span class="st">"noise"</span> <span class="ot">=</span> <span class="st">"Residuals"</span></span>
<span id="cb57-1149"><a href="#cb57-1149" aria-hidden="true" tabindex="-1"></a>             ))) <span class="sc">+</span></span>
<span id="cb57-1150"><a href="#cb57-1150" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_labels =</span> <span class="st">"%Y"</span>, <span class="at">date_breaks =</span> <span class="st">"1 year"</span>) <span class="sc">+</span></span>
<span id="cb57-1151"><a href="#cb57-1151" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-1152"><a href="#cb57-1152" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Time Series Decomposition"</span>,</span>
<span id="cb57-1153"><a href="#cb57-1153" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Breaking down the signal into components"</span>,</span>
<span id="cb57-1154"><a href="#cb57-1154" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb57-1155"><a href="#cb57-1155" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Value"</span></span>
<span id="cb57-1156"><a href="#cb57-1156" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1157"><a href="#cb57-1157" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>))</span>
<span id="cb57-1158"><a href="#cb57-1158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1159"><a href="#cb57-1159" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p35)</span>
<span id="cb57-1160"><a href="#cb57-1160" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p36)</span>
<span id="cb57-1161"><a href="#cb57-1161" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-1162"><a href="#cb57-1162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1163"><a href="#cb57-1163" aria-hidden="true" tabindex="-1"></a><span class="fu">## 19. 3D-Style and Perspective Plots</span></span>
<span id="cb57-1164"><a href="#cb57-1164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1165"><a href="#cb57-1165" aria-hidden="true" tabindex="-1"></a>Creating depth and dimension in 2D visualizations.</span>
<span id="cb57-1166"><a href="#cb57-1166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1167"><a href="#cb57-1167" aria-hidden="true" tabindex="-1"></a><span class="in">```{r perspective_3d}</span></span>
<span id="cb57-1168"><a href="#cb57-1168" aria-hidden="true" tabindex="-1"></a><span class="co"># 3D-style surface plot using contours and fills</span></span>
<span id="cb57-1169"><a href="#cb57-1169" aria-hidden="true" tabindex="-1"></a>surface_data <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb57-1170"><a href="#cb57-1170" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">3</span>, <span class="dv">3</span>, <span class="fl">0.2</span>),</span>
<span id="cb57-1171"><a href="#cb57-1171" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">3</span>, <span class="dv">3</span>, <span class="fl">0.2</span>)</span>
<span id="cb57-1172"><a href="#cb57-1172" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb57-1173"><a href="#cb57-1173" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-1174"><a href="#cb57-1174" aria-hidden="true" tabindex="-1"></a>    <span class="at">z =</span> <span class="fu">sin</span>(<span class="fu">sqrt</span>(x<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> y<span class="sc">^</span><span class="dv">2</span>)) <span class="sc">*</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fu">sqrt</span>(x<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> y<span class="sc">^</span><span class="dv">2</span>)<span class="sc">/</span><span class="dv">3</span>),</span>
<span id="cb57-1175"><a href="#cb57-1175" aria-hidden="true" tabindex="-1"></a>    <span class="at">z_group =</span> <span class="fu">cut</span>(z, <span class="at">breaks =</span> <span class="dv">10</span>)</span>
<span id="cb57-1176"><a href="#cb57-1176" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1177"><a href="#cb57-1177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1178"><a href="#cb57-1178" aria-hidden="true" tabindex="-1"></a>p37 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(surface_data, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> z)) <span class="sc">+</span></span>
<span id="cb57-1179"><a href="#cb57-1179" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb57-1180"><a href="#cb57-1180" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_contour</span>(<span class="fu">aes</span>(<span class="at">z =</span> z), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb57-1181"><a href="#cb57-1181" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(</span>
<span id="cb57-1182"><a href="#cb57-1182" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"#1A1A2E"</span>, </span>
<span id="cb57-1183"><a href="#cb57-1183" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid =</span> <span class="st">"#533A71"</span>, </span>
<span id="cb57-1184"><a href="#cb57-1184" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"#AB0E86"</span>,</span>
<span id="cb57-1185"><a href="#cb57-1185" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Elevation"</span></span>
<span id="cb57-1186"><a href="#cb57-1186" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1187"><a href="#cb57-1187" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-1188"><a href="#cb57-1188" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"3D Surface Visualization"</span>,</span>
<span id="cb57-1189"><a href="#cb57-1189" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Simulated topographic map with contour lines"</span>,</span>
<span id="cb57-1190"><a href="#cb57-1190" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"X Coordinate"</span>,</span>
<span id="cb57-1191"><a href="#cb57-1191" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Y Coordinate"</span></span>
<span id="cb57-1192"><a href="#cb57-1192" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1193"><a href="#cb57-1193" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>()</span>
<span id="cb57-1194"><a href="#cb57-1194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1195"><a href="#cb57-1195" aria-hidden="true" tabindex="-1"></a><span class="co"># Isometric-style plot</span></span>
<span id="cb57-1196"><a href="#cb57-1196" aria-hidden="true" tabindex="-1"></a>iso_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-1197"><a href="#cb57-1197" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">each =</span> <span class="dv">10</span>),</span>
<span id="cb57-1198"><a href="#cb57-1198" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">10</span>),</span>
<span id="cb57-1199"><a href="#cb57-1199" aria-hidden="true" tabindex="-1"></a>  <span class="at">height =</span> <span class="fu">rpois</span>(<span class="dv">100</span>, <span class="at">lambda =</span> <span class="dv">5</span>)</span>
<span id="cb57-1200"><a href="#cb57-1200" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb57-1201"><a href="#cb57-1201" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-1202"><a href="#cb57-1202" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create isometric transformation</span></span>
<span id="cb57-1203"><a href="#cb57-1203" aria-hidden="true" tabindex="-1"></a>    <span class="at">iso_x =</span> x <span class="sc">+</span> y <span class="sc">*</span> <span class="fl">0.5</span>,</span>
<span id="cb57-1204"><a href="#cb57-1204" aria-hidden="true" tabindex="-1"></a>    <span class="at">iso_y =</span> y <span class="sc">*</span> <span class="fl">0.866</span> <span class="sc">+</span> height <span class="sc">*</span> <span class="fl">0.5</span>,</span>
<span id="cb57-1205"><a href="#cb57-1205" aria-hidden="true" tabindex="-1"></a>    <span class="at">height_group =</span> <span class="fu">cut</span>(height, <span class="at">breaks =</span> <span class="dv">5</span>)</span>
<span id="cb57-1206"><a href="#cb57-1206" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1207"><a href="#cb57-1207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1208"><a href="#cb57-1208" aria-hidden="true" tabindex="-1"></a>p38 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(iso_data, <span class="fu">aes</span>(<span class="at">x =</span> iso_x, <span class="at">y =</span> iso_y)) <span class="sc">+</span></span>
<span id="cb57-1209"><a href="#cb57-1209" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> height, <span class="at">size =</span> height), <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-1210"><a href="#cb57-1210" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">xend =</span> iso_x, <span class="at">yend =</span> iso_y <span class="sc">-</span> height <span class="sc">*</span> <span class="fl">0.5</span>), </span>
<span id="cb57-1211"><a href="#cb57-1211" aria-hidden="true" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb57-1212"><a href="#cb57-1212" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient2</span>(</span>
<span id="cb57-1213"><a href="#cb57-1213" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"#1A1A2E"</span>, </span>
<span id="cb57-1214"><a href="#cb57-1214" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid =</span> <span class="st">"#533A71"</span>, </span>
<span id="cb57-1215"><a href="#cb57-1215" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"#AB0E86"</span>,</span>
<span id="cb57-1216"><a href="#cb57-1216" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Height"</span></span>
<span id="cb57-1217"><a href="#cb57-1217" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1218"><a href="#cb57-1218" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">8</span>), <span class="at">guide =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb57-1219"><a href="#cb57-1219" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-1220"><a href="#cb57-1220" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Isometric Data Visualization"</span>,</span>
<span id="cb57-1221"><a href="#cb57-1221" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"3D perspective of categorical data points"</span>,</span>
<span id="cb57-1222"><a href="#cb57-1222" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Isometric X"</span>,</span>
<span id="cb57-1223"><a href="#cb57-1223" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Isometric Y"</span></span>
<span id="cb57-1224"><a href="#cb57-1224" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1225"><a href="#cb57-1225" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb57-1226"><a href="#cb57-1226" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb57-1227"><a href="#cb57-1227" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>()</span>
<span id="cb57-1228"><a href="#cb57-1228" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1229"><a href="#cb57-1229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1230"><a href="#cb57-1230" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p37)</span>
<span id="cb57-1231"><a href="#cb57-1231" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p38)</span>
<span id="cb57-1232"><a href="#cb57-1232" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-1233"><a href="#cb57-1233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1234"><a href="#cb57-1234" aria-hidden="true" tabindex="-1"></a><span class="fu">## 20. Animated-Style and Motion Plots</span></span>
<span id="cb57-1235"><a href="#cb57-1235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1236"><a href="#cb57-1236" aria-hidden="true" tabindex="-1"></a>Visualizations that suggest movement and change over time.</span>
<span id="cb57-1237"><a href="#cb57-1237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1238"><a href="#cb57-1238" aria-hidden="true" tabindex="-1"></a><span class="in">```{r motion_plots}</span></span>
<span id="cb57-1239"><a href="#cb57-1239" aria-hidden="true" tabindex="-1"></a><span class="co"># Comet plot (showing trajectory with fading trail)</span></span>
<span id="cb57-1240"><a href="#cb57-1240" aria-hidden="true" tabindex="-1"></a>trajectory_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-1241"><a href="#cb57-1241" aria-hidden="true" tabindex="-1"></a>  <span class="at">time =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>,</span>
<span id="cb57-1242"><a href="#cb57-1242" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">cumsum</span>(<span class="fu">rnorm</span>(<span class="dv">50</span>, <span class="dv">0</span>, <span class="dv">1</span>)),</span>
<span id="cb57-1243"><a href="#cb57-1243" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">cumsum</span>(<span class="fu">rnorm</span>(<span class="dv">50</span>, <span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb57-1244"><a href="#cb57-1244" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb57-1245"><a href="#cb57-1245" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-1246"><a href="#cb57-1246" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha_trail =</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fl">0.2</span> <span class="sc">*</span> (<span class="fu">max</span>(time) <span class="sc">-</span> time)),</span>
<span id="cb57-1247"><a href="#cb57-1247" aria-hidden="true" tabindex="-1"></a>    <span class="at">size_trail =</span> <span class="fu">pmax</span>(<span class="dv">1</span>, <span class="dv">10</span> <span class="sc">*</span> alpha_trail)</span>
<span id="cb57-1248"><a href="#cb57-1248" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1249"><a href="#cb57-1249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1250"><a href="#cb57-1250" aria-hidden="true" tabindex="-1"></a>p39 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(trajectory_data, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y)) <span class="sc">+</span></span>
<span id="cb57-1251"><a href="#cb57-1251" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">color =</span> <span class="st">"#533A71"</span>, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb57-1252"><a href="#cb57-1252" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">alpha =</span> alpha_trail, <span class="at">size =</span> size_trail), </span>
<span id="cb57-1253"><a href="#cb57-1253" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"#1A1A2E"</span>) <span class="sc">+</span></span>
<span id="cb57-1254"><a href="#cb57-1254" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> trajectory_data[<span class="fu">nrow</span>(trajectory_data), ], </span>
<span id="cb57-1255"><a href="#cb57-1255" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"#AB0E86"</span>, <span class="at">size =</span> <span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb57-1256"><a href="#cb57-1256" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_alpha_identity</span>() <span class="sc">+</span></span>
<span id="cb57-1257"><a href="#cb57-1257" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_identity</span>() <span class="sc">+</span></span>
<span id="cb57-1258"><a href="#cb57-1258" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-1259"><a href="#cb57-1259" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Trajectory Comet Plot"</span>,</span>
<span id="cb57-1260"><a href="#cb57-1260" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Path visualization with fading trail effect"</span>,</span>
<span id="cb57-1261"><a href="#cb57-1261" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"X Position"</span>,</span>
<span id="cb57-1262"><a href="#cb57-1262" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Y Position"</span></span>
<span id="cb57-1263"><a href="#cb57-1263" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1264"><a href="#cb57-1264" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>()</span>
<span id="cb57-1265"><a href="#cb57-1265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1266"><a href="#cb57-1266" aria-hidden="true" tabindex="-1"></a><span class="co"># Wind rose / directional plot</span></span>
<span id="cb57-1267"><a href="#cb57-1267" aria-hidden="true" tabindex="-1"></a>wind_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-1268"><a href="#cb57-1268" aria-hidden="true" tabindex="-1"></a>  <span class="at">direction =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">359</span>, <span class="at">by =</span> <span class="dv">10</span>),</span>
<span id="cb57-1269"><a href="#cb57-1269" aria-hidden="true" tabindex="-1"></a>  <span class="at">speed =</span> <span class="fu">abs</span>(<span class="fu">rnorm</span>(<span class="dv">36</span>, <span class="dv">15</span>, <span class="dv">5</span>)),</span>
<span id="cb57-1270"><a href="#cb57-1270" aria-hidden="true" tabindex="-1"></a>  <span class="at">category =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"Light"</span>, <span class="st">"Moderate"</span>, <span class="st">"Strong"</span>), <span class="dv">36</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-1271"><a href="#cb57-1271" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb57-1272"><a href="#cb57-1272" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-1273"><a href="#cb57-1273" aria-hidden="true" tabindex="-1"></a>    <span class="at">direction_rad =</span> direction <span class="sc">*</span> pi <span class="sc">/</span> <span class="dv">180</span>,</span>
<span id="cb57-1274"><a href="#cb57-1274" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> speed <span class="sc">*</span> <span class="fu">cos</span>(direction_rad),</span>
<span id="cb57-1275"><a href="#cb57-1275" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> speed <span class="sc">*</span> <span class="fu">sin</span>(direction_rad)</span>
<span id="cb57-1276"><a href="#cb57-1276" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1277"><a href="#cb57-1277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1278"><a href="#cb57-1278" aria-hidden="true" tabindex="-1"></a>p40 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(wind_data, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y)) <span class="sc">+</span></span>
<span id="cb57-1279"><a href="#cb57-1279" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_spoke</span>(<span class="fu">aes</span>(<span class="at">angle =</span> direction_rad, <span class="at">radius =</span> speed, <span class="at">color =</span> category), </span>
<span id="cb57-1280"><a href="#cb57-1280" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-1281"><a href="#cb57-1281" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> category, <span class="at">size =</span> speed), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb57-1282"><a href="#cb57-1282" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#AB0E86"</span>)) <span class="sc">+</span></span>
<span id="cb57-1283"><a href="#cb57-1283" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">6</span>), <span class="at">guide =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb57-1284"><a href="#cb57-1284" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span></span>
<span id="cb57-1285"><a href="#cb57-1285" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-1286"><a href="#cb57-1286" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Wind Rose Directional Plot"</span>,</span>
<span id="cb57-1287"><a href="#cb57-1287" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Direction and magnitude visualization"</span>,</span>
<span id="cb57-1288"><a href="#cb57-1288" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"East-West Component"</span>,</span>
<span id="cb57-1289"><a href="#cb57-1289" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"North-South Component"</span>,</span>
<span id="cb57-1290"><a href="#cb57-1290" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Wind Category"</span></span>
<span id="cb57-1291"><a href="#cb57-1291" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1292"><a href="#cb57-1292" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb57-1293"><a href="#cb57-1293" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb57-1294"><a href="#cb57-1294" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>()</span>
<span id="cb57-1295"><a href="#cb57-1295" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1296"><a href="#cb57-1296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1297"><a href="#cb57-1297" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p39)</span>
<span id="cb57-1298"><a href="#cb57-1298" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p40)</span>
<span id="cb57-1299"><a href="#cb57-1299" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-1300"><a href="#cb57-1300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1301"><a href="#cb57-1301" aria-hidden="true" tabindex="-1"></a><span class="fu">## 21. Mathematical and Scientific Plots</span></span>
<span id="cb57-1302"><a href="#cb57-1302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1303"><a href="#cb57-1303" aria-hidden="true" tabindex="-1"></a>Specialized visualizations for mathematical and scientific data.</span>
<span id="cb57-1304"><a href="#cb57-1304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1305"><a href="#cb57-1305" aria-hidden="true" tabindex="-1"></a><span class="in">```{r mathematical_plots}</span></span>
<span id="cb57-1306"><a href="#cb57-1306" aria-hidden="true" tabindex="-1"></a><span class="co"># Phase space plot</span></span>
<span id="cb57-1307"><a href="#cb57-1307" aria-hidden="true" tabindex="-1"></a>phase_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-1308"><a href="#cb57-1308" aria-hidden="true" tabindex="-1"></a>  <span class="at">t =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">4</span><span class="sc">*</span>pi, <span class="fl">0.1</span>)</span>
<span id="cb57-1309"><a href="#cb57-1309" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb57-1310"><a href="#cb57-1310" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-1311"><a href="#cb57-1311" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">sin</span>(t) <span class="sc">+</span> <span class="fl">0.1</span> <span class="sc">*</span> <span class="fu">sin</span>(<span class="dv">10</span><span class="sc">*</span>t),</span>
<span id="cb57-1312"><a href="#cb57-1312" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">cos</span>(t) <span class="sc">+</span> <span class="fl">0.1</span> <span class="sc">*</span> <span class="fu">cos</span>(<span class="dv">10</span><span class="sc">*</span>t),</span>
<span id="cb57-1313"><a href="#cb57-1313" aria-hidden="true" tabindex="-1"></a>    <span class="at">velocity_x =</span> <span class="fu">lead</span>(x) <span class="sc">-</span> x,</span>
<span id="cb57-1314"><a href="#cb57-1314" aria-hidden="true" tabindex="-1"></a>    <span class="at">velocity_y =</span> <span class="fu">lead</span>(y) <span class="sc">-</span> y,</span>
<span id="cb57-1315"><a href="#cb57-1315" aria-hidden="true" tabindex="-1"></a>    <span class="at">speed =</span> <span class="fu">sqrt</span>(velocity_x<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> velocity_y<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb57-1316"><a href="#cb57-1316" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb57-1317"><a href="#cb57-1317" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(speed))</span>
<span id="cb57-1318"><a href="#cb57-1318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1319"><a href="#cb57-1319" aria-hidden="true" tabindex="-1"></a>p41 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(phase_data, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y)) <span class="sc">+</span></span>
<span id="cb57-1320"><a href="#cb57-1320" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="fu">aes</span>(<span class="at">color =</span> speed), <span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-1321"><a href="#cb57-1321" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> phase_data[<span class="dv">1</span>, ], <span class="at">color =</span> <span class="st">"#1A1A2E"</span>, <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb57-1322"><a href="#cb57-1322" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> phase_data[<span class="fu">nrow</span>(phase_data), ], <span class="at">color =</span> <span class="st">"#AB0E86"</span>, <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb57-1323"><a href="#cb57-1323" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient2</span>(</span>
<span id="cb57-1324"><a href="#cb57-1324" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"#1A1A2E"</span>, </span>
<span id="cb57-1325"><a href="#cb57-1325" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid =</span> <span class="st">"#533A71"</span>, </span>
<span id="cb57-1326"><a href="#cb57-1326" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"#AB0E86"</span>,</span>
<span id="cb57-1327"><a href="#cb57-1327" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Speed"</span></span>
<span id="cb57-1328"><a href="#cb57-1328" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1329"><a href="#cb57-1329" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-1330"><a href="#cb57-1330" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Phase Space Trajectory"</span>,</span>
<span id="cb57-1331"><a href="#cb57-1331" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Position vs velocity in state space"</span>,</span>
<span id="cb57-1332"><a href="#cb57-1332" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Position X"</span>,</span>
<span id="cb57-1333"><a href="#cb57-1333" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Position Y"</span></span>
<span id="cb57-1334"><a href="#cb57-1334" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1335"><a href="#cb57-1335" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>()</span>
<span id="cb57-1336"><a href="#cb57-1336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1337"><a href="#cb57-1337" aria-hidden="true" tabindex="-1"></a><span class="co"># Mandelbrot-style fractal visualization</span></span>
<span id="cb57-1338"><a href="#cb57-1338" aria-hidden="true" tabindex="-1"></a>fractal_data <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb57-1339"><a href="#cb57-1339" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>, <span class="fl">0.05</span>),</span>
<span id="cb57-1340"><a href="#cb57-1340" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>, <span class="fl">0.05</span>)</span>
<span id="cb57-1341"><a href="#cb57-1341" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb57-1342"><a href="#cb57-1342" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-1343"><a href="#cb57-1343" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Simplified fractal calculation</span></span>
<span id="cb57-1344"><a href="#cb57-1344" aria-hidden="true" tabindex="-1"></a>    <span class="at">c_real =</span> x,</span>
<span id="cb57-1345"><a href="#cb57-1345" aria-hidden="true" tabindex="-1"></a>    <span class="at">c_imag =</span> y,</span>
<span id="cb57-1346"><a href="#cb57-1346" aria-hidden="true" tabindex="-1"></a>    <span class="at">iterations =</span> <span class="fu">pmin</span>(<span class="dv">20</span>, <span class="fu">abs</span>(x<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> y<span class="sc">^</span><span class="dv">2</span>) <span class="sc">*</span> <span class="dv">10</span>),</span>
<span id="cb57-1347"><a href="#cb57-1347" aria-hidden="true" tabindex="-1"></a>    <span class="at">fractal_value =</span> iterations <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="fu">n</span>(), <span class="dv">0</span>, <span class="fl">0.5</span>)</span>
<span id="cb57-1348"><a href="#cb57-1348" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1349"><a href="#cb57-1349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1350"><a href="#cb57-1350" aria-hidden="true" tabindex="-1"></a>p42 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(fractal_data, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> fractal_value)) <span class="sc">+</span></span>
<span id="cb57-1351"><a href="#cb57-1351" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb57-1352"><a href="#cb57-1352" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(</span>
<span id="cb57-1353"><a href="#cb57-1353" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"#1A1A2E"</span>, </span>
<span id="cb57-1354"><a href="#cb57-1354" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid =</span> <span class="st">"#533A71"</span>, </span>
<span id="cb57-1355"><a href="#cb57-1355" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"#AB0E86"</span>,</span>
<span id="cb57-1356"><a href="#cb57-1356" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Iterations"</span></span>
<span id="cb57-1357"><a href="#cb57-1357" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1358"><a href="#cb57-1358" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-1359"><a href="#cb57-1359" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Fractal-Style Visualization"</span>,</span>
<span id="cb57-1360"><a href="#cb57-1360" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Mathematical pattern visualization"</span>,</span>
<span id="cb57-1361"><a href="#cb57-1361" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Real Component"</span>,</span>
<span id="cb57-1362"><a href="#cb57-1362" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Imaginary Component"</span></span>
<span id="cb57-1363"><a href="#cb57-1363" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1364"><a href="#cb57-1364" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span></span>
<span id="cb57-1365"><a href="#cb57-1365" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb57-1366"><a href="#cb57-1366" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb57-1367"><a href="#cb57-1367" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>()</span>
<span id="cb57-1368"><a href="#cb57-1368" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1369"><a href="#cb57-1369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1370"><a href="#cb57-1370" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p41)</span>
<span id="cb57-1371"><a href="#cb57-1371" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p42)</span>
<span id="cb57-1372"><a href="#cb57-1372" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-1373"><a href="#cb57-1373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1374"><a href="#cb57-1374" aria-hidden="true" tabindex="-1"></a><span class="fu">## 22. Geographic and Spatial Plots</span></span>
<span id="cb57-1375"><a href="#cb57-1375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1376"><a href="#cb57-1376" aria-hidden="true" tabindex="-1"></a>Advanced spatial visualization techniques.</span>
<span id="cb57-1377"><a href="#cb57-1377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1378"><a href="#cb57-1378" aria-hidden="true" tabindex="-1"></a><span class="in">```{r spatial_plots}</span></span>
<span id="cb57-1379"><a href="#cb57-1379" aria-hidden="true" tabindex="-1"></a><span class="co"># Hexagonal binning for spatial data</span></span>
<span id="cb57-1380"><a href="#cb57-1380" aria-hidden="true" tabindex="-1"></a>spatial_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-1381"><a href="#cb57-1381" aria-hidden="true" tabindex="-1"></a>  <span class="at">longitude =</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="sc">-</span><span class="dv">74</span>, <span class="fl">0.1</span>),</span>
<span id="cb57-1382"><a href="#cb57-1382" aria-hidden="true" tabindex="-1"></a>  <span class="at">latitude =</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="fl">40.7</span>, <span class="fl">0.1</span>),</span>
<span id="cb57-1383"><a href="#cb57-1383" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">rpois</span>(<span class="dv">1000</span>, <span class="dv">5</span>)</span>
<span id="cb57-1384"><a href="#cb57-1384" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb57-1385"><a href="#cb57-1385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1386"><a href="#cb57-1386" aria-hidden="true" tabindex="-1"></a>p43 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(spatial_data, <span class="fu">aes</span>(<span class="at">x =</span> longitude, <span class="at">y =</span> latitude)) <span class="sc">+</span></span>
<span id="cb57-1387"><a href="#cb57-1387" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hex</span>(<span class="fu">aes</span>(<span class="at">fill =</span> <span class="fu">after_stat</span>(count)), <span class="at">bins =</span> <span class="dv">20</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-1388"><a href="#cb57-1388" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(</span>
<span id="cb57-1389"><a href="#cb57-1389" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"#1A1A2E"</span>, </span>
<span id="cb57-1390"><a href="#cb57-1390" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid =</span> <span class="st">"#533A71"</span>, </span>
<span id="cb57-1391"><a href="#cb57-1391" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"#AB0E86"</span>,</span>
<span id="cb57-1392"><a href="#cb57-1392" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Density"</span></span>
<span id="cb57-1393"><a href="#cb57-1393" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1394"><a href="#cb57-1394" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-1395"><a href="#cb57-1395" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Hexagonal Spatial Binning"</span>,</span>
<span id="cb57-1396"><a href="#cb57-1396" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Geographic density visualization"</span>,</span>
<span id="cb57-1397"><a href="#cb57-1397" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Longitude"</span>,</span>
<span id="cb57-1398"><a href="#cb57-1398" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Latitude"</span></span>
<span id="cb57-1399"><a href="#cb57-1399" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1400"><a href="#cb57-1400" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>()</span>
<span id="cb57-1401"><a href="#cb57-1401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1402"><a href="#cb57-1402" aria-hidden="true" tabindex="-1"></a><span class="co"># Voronoi diagram simulation</span></span>
<span id="cb57-1403"><a href="#cb57-1403" aria-hidden="true" tabindex="-1"></a>voronoi_seeds <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-1404"><a href="#cb57-1404" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">runif</span>(<span class="dv">15</span>, <span class="dv">0</span>, <span class="dv">10</span>),</span>
<span id="cb57-1405"><a href="#cb57-1405" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">runif</span>(<span class="dv">15</span>, <span class="dv">0</span>, <span class="dv">10</span>),</span>
<span id="cb57-1406"><a href="#cb57-1406" aria-hidden="true" tabindex="-1"></a>  <span class="at">category =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>), <span class="dv">15</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-1407"><a href="#cb57-1407" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb57-1408"><a href="#cb57-1408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1409"><a href="#cb57-1409" aria-hidden="true" tabindex="-1"></a>voronoi_grid <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb57-1410"><a href="#cb57-1410" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="fl">0.2</span>),</span>
<span id="cb57-1411"><a href="#cb57-1411" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="fl">0.2</span>)</span>
<span id="cb57-1412"><a href="#cb57-1412" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb57-1413"><a href="#cb57-1413" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb57-1414"><a href="#cb57-1414" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-1415"><a href="#cb57-1415" aria-hidden="true" tabindex="-1"></a>    <span class="at">distances =</span> <span class="fu">list</span>(<span class="fu">sqrt</span>((x <span class="sc">-</span> voronoi_seeds<span class="sc">$</span>x)<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> (y <span class="sc">-</span> voronoi_seeds<span class="sc">$</span>y)<span class="sc">^</span><span class="dv">2</span>)),</span>
<span id="cb57-1416"><a href="#cb57-1416" aria-hidden="true" tabindex="-1"></a>    <span class="at">nearest_seed =</span> <span class="fu">which.min</span>(<span class="fu">unlist</span>(distances)),</span>
<span id="cb57-1417"><a href="#cb57-1417" aria-hidden="true" tabindex="-1"></a>    <span class="at">category =</span> voronoi_seeds<span class="sc">$</span>category[nearest_seed]</span>
<span id="cb57-1418"><a href="#cb57-1418" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb57-1419"><a href="#cb57-1419" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb57-1420"><a href="#cb57-1420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1421"><a href="#cb57-1421" aria-hidden="true" tabindex="-1"></a>p44 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(voronoi_grid, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> category)) <span class="sc">+</span></span>
<span id="cb57-1422"><a href="#cb57-1422" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb57-1423"><a href="#cb57-1423" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> voronoi_seeds, <span class="fu">aes</span>(<span class="at">color =</span> category), </span>
<span id="cb57-1424"><a href="#cb57-1424" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">4</span>, <span class="at">shape =</span> <span class="dv">21</span>, <span class="at">fill =</span> <span class="st">"white"</span>, <span class="at">stroke =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb57-1425"><a href="#cb57-1425" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb57-1426"><a href="#cb57-1426" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb57-1427"><a href="#cb57-1427" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-1428"><a href="#cb57-1428" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Voronoi Diagram Visualization"</span>,</span>
<span id="cb57-1429"><a href="#cb57-1429" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Spatial territory and influence mapping"</span>,</span>
<span id="cb57-1430"><a href="#cb57-1430" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"X Coordinate"</span>,</span>
<span id="cb57-1431"><a href="#cb57-1431" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Y Coordinate"</span>,</span>
<span id="cb57-1432"><a href="#cb57-1432" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Territory"</span>,</span>
<span id="cb57-1433"><a href="#cb57-1433" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Seed Points"</span></span>
<span id="cb57-1434"><a href="#cb57-1434" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1435"><a href="#cb57-1435" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span></span>
<span id="cb57-1436"><a href="#cb57-1436" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb57-1437"><a href="#cb57-1437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1438"><a href="#cb57-1438" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p43)</span>
<span id="cb57-1439"><a href="#cb57-1439" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p44)</span>
<span id="cb57-1440"><a href="#cb57-1440" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-1441"><a href="#cb57-1441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1442"><a href="#cb57-1442" aria-hidden="true" tabindex="-1"></a><span class="fu">## 23. Advanced Statistical and ML Plots</span></span>
<span id="cb57-1443"><a href="#cb57-1443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1444"><a href="#cb57-1444" aria-hidden="true" tabindex="-1"></a>Machine learning and advanced statistical visualizations.</span>
<span id="cb57-1445"><a href="#cb57-1445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1446"><a href="#cb57-1446" aria-hidden="true" tabindex="-1"></a><span class="in">```{r ml_statistical_plots}</span></span>
<span id="cb57-1447"><a href="#cb57-1447" aria-hidden="true" tabindex="-1"></a><span class="co"># Decision boundary visualization</span></span>
<span id="cb57-1448"><a href="#cb57-1448" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb57-1449"><a href="#cb57-1449" aria-hidden="true" tabindex="-1"></a>ml_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-1450"><a href="#cb57-1450" aria-hidden="true" tabindex="-1"></a>  <span class="at">x1 =</span> <span class="fu">rnorm</span>(<span class="dv">200</span>),</span>
<span id="cb57-1451"><a href="#cb57-1451" aria-hidden="true" tabindex="-1"></a>  <span class="at">x2 =</span> <span class="fu">rnorm</span>(<span class="dv">200</span>)</span>
<span id="cb57-1452"><a href="#cb57-1452" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb57-1453"><a href="#cb57-1453" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-1454"><a href="#cb57-1454" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">ifelse</span>(x1<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> x2<span class="sc">^</span><span class="dv">2</span> <span class="sc">&gt;</span> <span class="fl">1.5</span>, <span class="st">"Class_A"</span>, <span class="st">"Class_B"</span>),</span>
<span id="cb57-1455"><a href="#cb57-1455" aria-hidden="true" tabindex="-1"></a>    <span class="at">predicted =</span> <span class="fu">ifelse</span>(x1<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> x2<span class="sc">^</span><span class="dv">2</span> <span class="sc">&gt;</span> <span class="fl">1.3</span>, <span class="st">"Class_A"</span>, <span class="st">"Class_B"</span>),</span>
<span id="cb57-1456"><a href="#cb57-1456" aria-hidden="true" tabindex="-1"></a>    <span class="at">correct =</span> y <span class="sc">==</span> predicted</span>
<span id="cb57-1457"><a href="#cb57-1457" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1458"><a href="#cb57-1458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1459"><a href="#cb57-1459" aria-hidden="true" tabindex="-1"></a><span class="co"># Create decision boundary grid</span></span>
<span id="cb57-1460"><a href="#cb57-1460" aria-hidden="true" tabindex="-1"></a>boundary_grid <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb57-1461"><a href="#cb57-1461" aria-hidden="true" tabindex="-1"></a>  <span class="at">x1 =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">3</span>, <span class="dv">3</span>, <span class="fl">0.1</span>),</span>
<span id="cb57-1462"><a href="#cb57-1462" aria-hidden="true" tabindex="-1"></a>  <span class="at">x2 =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">3</span>, <span class="dv">3</span>, <span class="fl">0.1</span>)</span>
<span id="cb57-1463"><a href="#cb57-1463" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb57-1464"><a href="#cb57-1464" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-1465"><a href="#cb57-1465" aria-hidden="true" tabindex="-1"></a>    <span class="at">boundary_value =</span> x1<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> x2<span class="sc">^</span><span class="dv">2</span>,</span>
<span id="cb57-1466"><a href="#cb57-1466" aria-hidden="true" tabindex="-1"></a>    <span class="at">decision =</span> <span class="fu">ifelse</span>(boundary_value <span class="sc">&gt;</span> <span class="fl">1.3</span>, <span class="st">"Class_A"</span>, <span class="st">"Class_B"</span>)</span>
<span id="cb57-1467"><a href="#cb57-1467" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1468"><a href="#cb57-1468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1469"><a href="#cb57-1469" aria-hidden="true" tabindex="-1"></a>p45 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb57-1470"><a href="#cb57-1470" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">data =</span> boundary_grid, <span class="fu">aes</span>(<span class="at">x =</span> x1, <span class="at">y =</span> x2, <span class="at">fill =</span> decision), <span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb57-1471"><a href="#cb57-1471" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> ml_data, <span class="fu">aes</span>(<span class="at">x =</span> x1, <span class="at">y =</span> x2, <span class="at">color =</span> y, <span class="at">shape =</span> correct), </span>
<span id="cb57-1472"><a href="#cb57-1472" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-1473"><a href="#cb57-1473" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_contour</span>(<span class="at">data =</span> boundary_grid, <span class="fu">aes</span>(<span class="at">x =</span> x1, <span class="at">y =</span> x2, <span class="at">z =</span> boundary_value), </span>
<span id="cb57-1474"><a href="#cb57-1474" aria-hidden="true" tabindex="-1"></a>               <span class="at">breaks =</span> <span class="fl">1.3</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb57-1475"><a href="#cb57-1475" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Class_A"</span> <span class="ot">=</span> <span class="st">"#1A1A2E"</span>, <span class="st">"Class_B"</span> <span class="ot">=</span> <span class="st">"#533A71"</span>)) <span class="sc">+</span></span>
<span id="cb57-1476"><a href="#cb57-1476" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Class_A"</span> <span class="ot">=</span> <span class="st">"#1A1A2E"</span>, <span class="st">"Class_B"</span> <span class="ot">=</span> <span class="st">"#533A71"</span>)) <span class="sc">+</span></span>
<span id="cb57-1477"><a href="#cb57-1477" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_shape_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"TRUE"</span> <span class="ot">=</span> <span class="dv">16</span>, <span class="st">"FALSE"</span> <span class="ot">=</span> <span class="dv">4</span>)) <span class="sc">+</span></span>
<span id="cb57-1478"><a href="#cb57-1478" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-1479"><a href="#cb57-1479" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Machine Learning Decision Boundary"</span>,</span>
<span id="cb57-1480"><a href="#cb57-1480" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Classification visualization with prediction accuracy"</span>,</span>
<span id="cb57-1481"><a href="#cb57-1481" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Feature 1"</span>,</span>
<span id="cb57-1482"><a href="#cb57-1482" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Feature 2"</span>,</span>
<span id="cb57-1483"><a href="#cb57-1483" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"True Class"</span>,</span>
<span id="cb57-1484"><a href="#cb57-1484" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Predicted Region"</span>,</span>
<span id="cb57-1485"><a href="#cb57-1485" aria-hidden="true" tabindex="-1"></a>    <span class="at">shape =</span> <span class="st">"Correct Prediction"</span></span>
<span id="cb57-1486"><a href="#cb57-1486" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1487"><a href="#cb57-1487" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>()</span>
<span id="cb57-1488"><a href="#cb57-1488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1489"><a href="#cb57-1489" aria-hidden="true" tabindex="-1"></a><span class="co"># ROC Curve simulation</span></span>
<span id="cb57-1490"><a href="#cb57-1490" aria-hidden="true" tabindex="-1"></a>roc_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-1491"><a href="#cb57-1491" aria-hidden="true" tabindex="-1"></a>  <span class="at">threshold =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.01</span>)</span>
<span id="cb57-1492"><a href="#cb57-1492" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb57-1493"><a href="#cb57-1493" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-1494"><a href="#cb57-1494" aria-hidden="true" tabindex="-1"></a>    <span class="at">tpr =</span> <span class="dv">1</span> <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fu">qnorm</span>(<span class="dv">1</span> <span class="sc">-</span> threshold) <span class="sc">-</span> <span class="dv">1</span>),  <span class="co"># True Positive Rate</span></span>
<span id="cb57-1495"><a href="#cb57-1495" aria-hidden="true" tabindex="-1"></a>    <span class="at">fpr =</span> <span class="dv">1</span> <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fu">qnorm</span>(<span class="dv">1</span> <span class="sc">-</span> threshold)),      <span class="co"># False Positive Rate</span></span>
<span id="cb57-1496"><a href="#cb57-1496" aria-hidden="true" tabindex="-1"></a>    <span class="at">model =</span> <span class="st">"Model A"</span></span>
<span id="cb57-1497"><a href="#cb57-1497" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb57-1498"><a href="#cb57-1498" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(</span>
<span id="cb57-1499"><a href="#cb57-1499" aria-hidden="true" tabindex="-1"></a>    <span class="fu">data.frame</span>(</span>
<span id="cb57-1500"><a href="#cb57-1500" aria-hidden="true" tabindex="-1"></a>      <span class="at">threshold =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.01</span>)</span>
<span id="cb57-1501"><a href="#cb57-1501" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb57-1502"><a href="#cb57-1502" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb57-1503"><a href="#cb57-1503" aria-hidden="true" tabindex="-1"></a>      <span class="at">tpr =</span> <span class="dv">1</span> <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fu">qnorm</span>(<span class="dv">1</span> <span class="sc">-</span> threshold) <span class="sc">-</span> <span class="fl">0.5</span>),</span>
<span id="cb57-1504"><a href="#cb57-1504" aria-hidden="true" tabindex="-1"></a>      <span class="at">fpr =</span> <span class="dv">1</span> <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fu">qnorm</span>(<span class="dv">1</span> <span class="sc">-</span> threshold) <span class="sc">+</span> <span class="fl">0.5</span>),</span>
<span id="cb57-1505"><a href="#cb57-1505" aria-hidden="true" tabindex="-1"></a>      <span class="at">model =</span> <span class="st">"Model B"</span></span>
<span id="cb57-1506"><a href="#cb57-1506" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb57-1507"><a href="#cb57-1507" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1508"><a href="#cb57-1508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1509"><a href="#cb57-1509" aria-hidden="true" tabindex="-1"></a>p46 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(roc_data, <span class="fu">aes</span>(<span class="at">x =</span> fpr, <span class="at">y =</span> tpr, <span class="at">color =</span> model)) <span class="sc">+</span></span>
<span id="cb57-1510"><a href="#cb57-1510" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-1511"><a href="#cb57-1511" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, </span>
<span id="cb57-1512"><a href="#cb57-1512" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">"#95A5A6"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb57-1513"><a href="#cb57-1513" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> fpr, <span class="at">ymax =</span> tpr, <span class="at">fill =</span> model), <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb57-1514"><a href="#cb57-1514" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>)) <span class="sc">+</span></span>
<span id="cb57-1515"><a href="#cb57-1515" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>)) <span class="sc">+</span></span>
<span id="cb57-1516"><a href="#cb57-1516" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb57-1517"><a href="#cb57-1517" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>()) <span class="sc">+</span></span>
<span id="cb57-1518"><a href="#cb57-1518" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-1519"><a href="#cb57-1519" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"ROC Curve Comparison"</span>,</span>
<span id="cb57-1520"><a href="#cb57-1520" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Model performance visualization"</span>,</span>
<span id="cb57-1521"><a href="#cb57-1521" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"False Positive Rate"</span>,</span>
<span id="cb57-1522"><a href="#cb57-1522" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"True Positive Rate"</span>,</span>
<span id="cb57-1523"><a href="#cb57-1523" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Model"</span>,</span>
<span id="cb57-1524"><a href="#cb57-1524" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"AUC Area"</span></span>
<span id="cb57-1525"><a href="#cb57-1525" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1526"><a href="#cb57-1526" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>()</span>
<span id="cb57-1527"><a href="#cb57-1527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1528"><a href="#cb57-1528" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p45)</span>
<span id="cb57-1529"><a href="#cb57-1529" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p46)</span>
<span id="cb57-1530"><a href="#cb57-1530" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-1531"><a href="#cb57-1531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1532"><a href="#cb57-1532" aria-hidden="true" tabindex="-1"></a><span class="fu">## 24. Financial and Economic Plots</span></span>
<span id="cb57-1533"><a href="#cb57-1533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1534"><a href="#cb57-1534" aria-hidden="true" tabindex="-1"></a>Specialized visualizations for financial and economic data.</span>
<span id="cb57-1535"><a href="#cb57-1535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1536"><a href="#cb57-1536" aria-hidden="true" tabindex="-1"></a><span class="in">```{r financial_plots}</span></span>
<span id="cb57-1537"><a href="#cb57-1537" aria-hidden="true" tabindex="-1"></a><span class="co"># Candlestick chart simulation</span></span>
<span id="cb57-1538"><a href="#cb57-1538" aria-hidden="true" tabindex="-1"></a>candlestick_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-1539"><a href="#cb57-1539" aria-hidden="true" tabindex="-1"></a>  <span class="at">date =</span> <span class="fu">seq</span>(<span class="fu">as.Date</span>(<span class="st">"2024-01-01"</span>), <span class="at">by =</span> <span class="st">"day"</span>, <span class="at">length.out =</span> <span class="dv">30</span>)</span>
<span id="cb57-1540"><a href="#cb57-1540" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb57-1541"><a href="#cb57-1541" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-1542"><a href="#cb57-1542" aria-hidden="true" tabindex="-1"></a>    <span class="at">open =</span> <span class="dv">100</span> <span class="sc">+</span> <span class="fu">cumsum</span>(<span class="fu">rnorm</span>(<span class="dv">30</span>, <span class="dv">0</span>, <span class="dv">1</span>)),</span>
<span id="cb57-1543"><a href="#cb57-1543" aria-hidden="true" tabindex="-1"></a>    <span class="at">close =</span> open <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">30</span>, <span class="fl">0.5</span>, <span class="dv">2</span>),</span>
<span id="cb57-1544"><a href="#cb57-1544" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="fu">pmax</span>(open, close) <span class="sc">+</span> <span class="fu">abs</span>(<span class="fu">rnorm</span>(<span class="dv">30</span>, <span class="dv">0</span>, <span class="dv">1</span>)),</span>
<span id="cb57-1545"><a href="#cb57-1545" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="fu">pmin</span>(open, close) <span class="sc">-</span> <span class="fu">abs</span>(<span class="fu">rnorm</span>(<span class="dv">30</span>, <span class="dv">0</span>, <span class="dv">1</span>)),</span>
<span id="cb57-1546"><a href="#cb57-1546" aria-hidden="true" tabindex="-1"></a>    <span class="at">direction =</span> <span class="fu">ifelse</span>(close <span class="sc">&gt;</span> open, <span class="st">"Up"</span>, <span class="st">"Down"</span>)</span>
<span id="cb57-1547"><a href="#cb57-1547" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1548"><a href="#cb57-1548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1549"><a href="#cb57-1549" aria-hidden="true" tabindex="-1"></a>p47 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(candlestick_data, <span class="fu">aes</span>(<span class="at">x =</span> date)) <span class="sc">+</span></span>
<span id="cb57-1550"><a href="#cb57-1550" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">y =</span> low, <span class="at">yend =</span> high), <span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb57-1551"><a href="#cb57-1551" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">y =</span> open, <span class="at">yend =</span> close, <span class="at">color =</span> direction), <span class="at">size =</span> <span class="dv">4</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-1552"><a href="#cb57-1552" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Up"</span> <span class="ot">=</span> <span class="st">"#533A71"</span>, <span class="st">"Down"</span> <span class="ot">=</span> <span class="st">"#6A0572"</span>)) <span class="sc">+</span></span>
<span id="cb57-1553"><a href="#cb57-1553" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_labels =</span> <span class="st">"%b %d"</span>, <span class="at">date_breaks =</span> <span class="st">"5 days"</span>) <span class="sc">+</span></span>
<span id="cb57-1554"><a href="#cb57-1554" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-1555"><a href="#cb57-1555" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Financial Candlestick Chart"</span>,</span>
<span id="cb57-1556"><a href="#cb57-1556" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"OHLC price visualization"</span>,</span>
<span id="cb57-1557"><a href="#cb57-1557" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb57-1558"><a href="#cb57-1558" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Price"</span>,</span>
<span id="cb57-1559"><a href="#cb57-1559" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Direction"</span></span>
<span id="cb57-1560"><a href="#cb57-1560" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1561"><a href="#cb57-1561" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb57-1562"><a href="#cb57-1562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1563"><a href="#cb57-1563" aria-hidden="true" tabindex="-1"></a><span class="co"># Economic bubble chart</span></span>
<span id="cb57-1564"><a href="#cb57-1564" aria-hidden="true" tabindex="-1"></a>economic_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-1565"><a href="#cb57-1565" aria-hidden="true" tabindex="-1"></a>  <span class="at">country =</span> <span class="fu">paste</span>(<span class="st">"Country"</span>, LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]),</span>
<span id="cb57-1566"><a href="#cb57-1566" aria-hidden="true" tabindex="-1"></a>  <span class="at">gdp_per_capita =</span> <span class="fu">exp</span>(<span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">10</span>, <span class="fl">0.5</span>)),</span>
<span id="cb57-1567"><a href="#cb57-1567" aria-hidden="true" tabindex="-1"></a>  <span class="at">life_expectancy =</span> <span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">75</span>, <span class="dv">8</span>),</span>
<span id="cb57-1568"><a href="#cb57-1568" aria-hidden="true" tabindex="-1"></a>  <span class="at">population =</span> <span class="fu">exp</span>(<span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">15</span>, <span class="dv">1</span>)),</span>
<span id="cb57-1569"><a href="#cb57-1569" aria-hidden="true" tabindex="-1"></a>  <span class="at">region =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"Asia"</span>, <span class="st">"Europe"</span>, <span class="st">"Americas"</span>, <span class="st">"Africa"</span>), <span class="dv">20</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-1570"><a href="#cb57-1570" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb57-1571"><a href="#cb57-1571" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1572"><a href="#cb57-1572" aria-hidden="true" tabindex="-1"></a>p48 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(economic_data, <span class="fu">aes</span>(<span class="at">x =</span> gdp_per_capita, <span class="at">y =</span> life_expectancy)) <span class="sc">+</span></span>
<span id="cb57-1573"><a href="#cb57-1573" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> population, <span class="at">color =</span> region), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb57-1574"><a href="#cb57-1574" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">fill =</span> <span class="st">"#95A5A6"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb57-1575"><a href="#cb57-1575" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">dollar_format</span>()) <span class="sc">+</span></span>
<span id="cb57-1576"><a href="#cb57-1576" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">15</span>), <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">scale =</span> <span class="fl">1e-6</span>, <span class="at">suffix =</span> <span class="st">"M"</span>)) <span class="sc">+</span></span>
<span id="cb57-1577"><a href="#cb57-1577" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#1A1A2E"</span>, <span class="st">"#533A71"</span>, <span class="st">"#0F3460"</span>, <span class="st">"#6A0572"</span>)) <span class="sc">+</span></span>
<span id="cb57-1578"><a href="#cb57-1578" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-1579"><a href="#cb57-1579" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Economic Development Bubble Chart"</span>,</span>
<span id="cb57-1580"><a href="#cb57-1580" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"GDP per capita vs life expectancy by population"</span>,</span>
<span id="cb57-1581"><a href="#cb57-1581" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"GDP per Capita (log scale)"</span>,</span>
<span id="cb57-1582"><a href="#cb57-1582" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Life Expectancy (years)"</span>,</span>
<span id="cb57-1583"><a href="#cb57-1583" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="st">"Population"</span>,</span>
<span id="cb57-1584"><a href="#cb57-1584" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Region"</span></span>
<span id="cb57-1585"><a href="#cb57-1585" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1586"><a href="#cb57-1586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1587"><a href="#cb57-1587" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p47)</span>
<span id="cb57-1588"><a href="#cb57-1588" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p48)</span>
<span id="cb57-1589"><a href="#cb57-1589" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-1590"><a href="#cb57-1590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1591"><a href="#cb57-1591" aria-hidden="true" tabindex="-1"></a><span class="fu">## 25. Artistic and Creative Visualizations</span></span>
<span id="cb57-1592"><a href="#cb57-1592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1593"><a href="#cb57-1593" aria-hidden="true" tabindex="-1"></a>Pushing the boundaries of data art and creative expression.</span>
<span id="cb57-1594"><a href="#cb57-1594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1595"><a href="#cb57-1595" aria-hidden="true" tabindex="-1"></a><span class="in">```{r artistic_plots}</span></span>
<span id="cb57-1596"><a href="#cb57-1596" aria-hidden="true" tabindex="-1"></a><span class="co"># Spirograph-style data art</span></span>
<span id="cb57-1597"><a href="#cb57-1597" aria-hidden="true" tabindex="-1"></a>spiral_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-1598"><a href="#cb57-1598" aria-hidden="true" tabindex="-1"></a>  <span class="at">t =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">20</span><span class="sc">*</span>pi, <span class="fl">0.1</span>)</span>
<span id="cb57-1599"><a href="#cb57-1599" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb57-1600"><a href="#cb57-1600" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-1601"><a href="#cb57-1601" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> (<span class="dv">10</span> <span class="sc">+</span> <span class="dv">3</span> <span class="sc">*</span> <span class="fu">cos</span>(<span class="dv">5</span><span class="sc">*</span>t)) <span class="sc">*</span> <span class="fu">cos</span>(t),</span>
<span id="cb57-1602"><a href="#cb57-1602" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> (<span class="dv">10</span> <span class="sc">+</span> <span class="dv">3</span> <span class="sc">*</span> <span class="fu">cos</span>(<span class="dv">5</span><span class="sc">*</span>t)) <span class="sc">*</span> <span class="fu">sin</span>(t),</span>
<span id="cb57-1603"><a href="#cb57-1603" aria-hidden="true" tabindex="-1"></a>    <span class="at">color_val =</span> <span class="fu">sin</span>(t) <span class="sc">+</span> <span class="fu">cos</span>(<span class="dv">5</span><span class="sc">*</span>t),</span>
<span id="cb57-1604"><a href="#cb57-1604" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha_val =</span> (<span class="fu">sin</span>(t<span class="sc">/</span><span class="dv">2</span>) <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb57-1605"><a href="#cb57-1605" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1606"><a href="#cb57-1606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1607"><a href="#cb57-1607" aria-hidden="true" tabindex="-1"></a>p49 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(spiral_data, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y)) <span class="sc">+</span></span>
<span id="cb57-1608"><a href="#cb57-1608" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="fu">aes</span>(<span class="at">color =</span> color_val, <span class="at">alpha =</span> alpha_val), <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb57-1609"><a href="#cb57-1609" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> color_val, <span class="at">alpha =</span> alpha_val), <span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb57-1610"><a href="#cb57-1610" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient2</span>(</span>
<span id="cb57-1611"><a href="#cb57-1611" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"#1A1A2E"</span>, </span>
<span id="cb57-1612"><a href="#cb57-1612" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid =</span> <span class="st">"#533A71"</span>, </span>
<span id="cb57-1613"><a href="#cb57-1613" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"#AB0E86"</span>,</span>
<span id="cb57-1614"><a href="#cb57-1614" aria-hidden="true" tabindex="-1"></a>    <span class="at">guide =</span> <span class="st">"none"</span></span>
<span id="cb57-1615"><a href="#cb57-1615" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1616"><a href="#cb57-1616" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_alpha_identity</span>() <span class="sc">+</span></span>
<span id="cb57-1617"><a href="#cb57-1617" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-1618"><a href="#cb57-1618" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Data Spirograph Art"</span>,</span>
<span id="cb57-1619"><a href="#cb57-1619" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Mathematical beauty in data visualization"</span></span>
<span id="cb57-1620"><a href="#cb57-1620" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1621"><a href="#cb57-1621" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span></span>
<span id="cb57-1622"><a href="#cb57-1622" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb57-1623"><a href="#cb57-1623" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb57-1624"><a href="#cb57-1624" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#0A0A0A"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb57-1625"><a href="#cb57-1625" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"white"</span>),</span>
<span id="cb57-1626"><a href="#cb57-1626" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"white"</span>)</span>
<span id="cb57-1627"><a href="#cb57-1627" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1628"><a href="#cb57-1628" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1629"><a href="#cb57-1629" aria-hidden="true" tabindex="-1"></a><span class="co"># Word cloud simulation using text positioning</span></span>
<span id="cb57-1630"><a href="#cb57-1630" aria-hidden="true" tabindex="-1"></a>word_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-1631"><a href="#cb57-1631" aria-hidden="true" tabindex="-1"></a>  <span class="at">word =</span> <span class="fu">c</span>(<span class="st">"ggplot2"</span>, <span class="st">"visualization"</span>, <span class="st">"data"</span>, <span class="st">"science"</span>, <span class="st">"R"</span>, <span class="st">"beautiful"</span>, </span>
<span id="cb57-1632"><a href="#cb57-1632" aria-hidden="true" tabindex="-1"></a>           <span class="st">"insights"</span>, <span class="st">"analytics"</span>, <span class="st">"charts"</span>, <span class="st">"graphs"</span>, <span class="st">"statistical"</span>, <span class="st">"modern"</span>),</span>
<span id="cb57-1633"><a href="#cb57-1633" aria-hidden="true" tabindex="-1"></a>  <span class="at">frequency =</span> <span class="fu">c</span>(<span class="dv">50</span>, <span class="dv">45</span>, <span class="dv">40</span>, <span class="dv">35</span>, <span class="dv">30</span>, <span class="dv">25</span>, <span class="dv">20</span>, <span class="dv">18</span>, <span class="dv">15</span>, <span class="dv">12</span>, <span class="dv">10</span>, <span class="dv">8</span>),</span>
<span id="cb57-1634"><a href="#cb57-1634" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">runif</span>(<span class="dv">12</span>, <span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>),</span>
<span id="cb57-1635"><a href="#cb57-1635" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">runif</span>(<span class="dv">12</span>, <span class="sc">-</span><span class="dv">3</span>, <span class="dv">3</span>),</span>
<span id="cb57-1636"><a href="#cb57-1636" aria-hidden="true" tabindex="-1"></a>  <span class="at">angle =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">45</span>, <span class="dv">90</span>), <span class="dv">12</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-1637"><a href="#cb57-1637" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb57-1638"><a href="#cb57-1638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1639"><a href="#cb57-1639" aria-hidden="true" tabindex="-1"></a>p50 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(word_data, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y)) <span class="sc">+</span></span>
<span id="cb57-1640"><a href="#cb57-1640" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> word, <span class="at">size =</span> frequency, <span class="at">color =</span> frequency, <span class="at">angle =</span> angle),</span>
<span id="cb57-1641"><a href="#cb57-1641" aria-hidden="true" tabindex="-1"></a>            <span class="at">family =</span> <span class="st">"playfair"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-1642"><a href="#cb57-1642" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_continuous</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">12</span>), <span class="at">guide =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb57-1643"><a href="#cb57-1643" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient2</span>(</span>
<span id="cb57-1644"><a href="#cb57-1644" aria-hidden="true" tabindex="-1"></a>    <span class="at">low =</span> <span class="st">"#1A1A2E"</span>, </span>
<span id="cb57-1645"><a href="#cb57-1645" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid =</span> <span class="st">"#533A71"</span>, </span>
<span id="cb57-1646"><a href="#cb57-1646" aria-hidden="true" tabindex="-1"></a>    <span class="at">high =</span> <span class="st">"#AB0E86"</span>,</span>
<span id="cb57-1647"><a href="#cb57-1647" aria-hidden="true" tabindex="-1"></a>    <span class="at">guide =</span> <span class="st">"none"</span></span>
<span id="cb57-1648"><a href="#cb57-1648" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1649"><a href="#cb57-1649" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-1650"><a href="#cb57-1650" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Data Visualization Word Cloud"</span>,</span>
<span id="cb57-1651"><a href="#cb57-1651" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Key concepts in beautiful typography"</span></span>
<span id="cb57-1652"><a href="#cb57-1652" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1653"><a href="#cb57-1653" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="dv">6</span>, <span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb57-1654"><a href="#cb57-1654" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="sc">-</span><span class="dv">4</span>, <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb57-1655"><a href="#cb57-1655" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb57-1656"><a href="#cb57-1656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1657"><a href="#cb57-1657" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p49)</span>
<span id="cb57-1658"><a href="#cb57-1658" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p50)</span>
<span id="cb57-1659"><a href="#cb57-1659" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-1660"><a href="#cb57-1660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1661"><a href="#cb57-1661" aria-hidden="true" tabindex="-1"></a><span class="fu">## 26. Interactive-Style and Dashboard Elements</span></span>
<span id="cb57-1662"><a href="#cb57-1662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1663"><a href="#cb57-1663" aria-hidden="true" tabindex="-1"></a>Creating dashboard-like visualizations with multiple panels.</span>
<span id="cb57-1664"><a href="#cb57-1664" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1665"><a href="#cb57-1665" aria-hidden="true" tabindex="-1"></a><span class="in">```{r dashboard_elements}</span></span>
<span id="cb57-1666"><a href="#cb57-1666" aria-hidden="true" tabindex="-1"></a><span class="co"># KPI dashboard style</span></span>
<span id="cb57-1667"><a href="#cb57-1667" aria-hidden="true" tabindex="-1"></a>kpi_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-1668"><a href="#cb57-1668" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric =</span> <span class="fu">c</span>(<span class="st">"Revenue"</span>, <span class="st">"Customers"</span>, <span class="st">"Conversion"</span>, <span class="st">"Satisfaction"</span>),</span>
<span id="cb57-1669"><a href="#cb57-1669" aria-hidden="true" tabindex="-1"></a>  <span class="at">current =</span> <span class="fu">c</span>(<span class="dv">78000</span>, <span class="dv">1250</span>, <span class="fl">12.5</span>, <span class="fl">8.2</span>),</span>
<span id="cb57-1670"><a href="#cb57-1670" aria-hidden="true" tabindex="-1"></a>  <span class="at">target =</span> <span class="fu">c</span>(<span class="dv">80000</span>, <span class="dv">1200</span>, <span class="fl">15.0</span>, <span class="fl">8.5</span>),</span>
<span id="cb57-1671"><a href="#cb57-1671" aria-hidden="true" tabindex="-1"></a>  <span class="at">previous =</span> <span class="fu">c</span>(<span class="dv">72000</span>, <span class="dv">1100</span>, <span class="fl">10.2</span>, <span class="fl">7.8</span>)</span>
<span id="cb57-1672"><a href="#cb57-1672" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb57-1673"><a href="#cb57-1673" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-1674"><a href="#cb57-1674" aria-hidden="true" tabindex="-1"></a>    <span class="at">vs_target =</span> (current <span class="sc">-</span> target) <span class="sc">/</span> target <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb57-1675"><a href="#cb57-1675" aria-hidden="true" tabindex="-1"></a>    <span class="at">vs_previous =</span> (current <span class="sc">-</span> previous) <span class="sc">/</span> previous <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb57-1676"><a href="#cb57-1676" aria-hidden="true" tabindex="-1"></a>    <span class="at">status =</span> <span class="fu">case_when</span>(</span>
<span id="cb57-1677"><a href="#cb57-1677" aria-hidden="true" tabindex="-1"></a>      vs_target <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"Above Target"</span>,</span>
<span id="cb57-1678"><a href="#cb57-1678" aria-hidden="true" tabindex="-1"></a>      vs_target <span class="sc">&gt;</span> <span class="sc">-</span><span class="dv">5</span> <span class="sc">~</span> <span class="st">"Near Target"</span>, </span>
<span id="cb57-1679"><a href="#cb57-1679" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Below Target"</span></span>
<span id="cb57-1680"><a href="#cb57-1680" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb57-1681"><a href="#cb57-1681" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1682"><a href="#cb57-1682" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1683"><a href="#cb57-1683" aria-hidden="true" tabindex="-1"></a>p51 <span class="ot">&lt;-</span> kpi_data <span class="sc">%&gt;%</span></span>
<span id="cb57-1684"><a href="#cb57-1684" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(current, target, previous), </span>
<span id="cb57-1685"><a href="#cb57-1685" aria-hidden="true" tabindex="-1"></a>                      <span class="at">names_to =</span> <span class="st">"period"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb57-1686"><a href="#cb57-1686" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> metric, <span class="at">y =</span> value, <span class="at">fill =</span> period)) <span class="sc">+</span></span>
<span id="cb57-1687"><a href="#cb57-1687" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">width =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb57-1688"><a href="#cb57-1688" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> scales<span class="sc">::</span><span class="fu">comma</span>(value, <span class="at">accuracy =</span> <span class="fl">0.1</span>)), </span>
<span id="cb57-1689"><a href="#cb57-1689" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.7</span>), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.3</span>,</span>
<span id="cb57-1690"><a href="#cb57-1690" aria-hidden="true" tabindex="-1"></a>            <span class="at">family =</span> <span class="st">"source"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb57-1691"><a href="#cb57-1691" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"current"</span> <span class="ot">=</span> <span class="st">"#1A1A2E"</span>, <span class="st">"target"</span> <span class="ot">=</span> <span class="st">"#533A71"</span>, <span class="st">"previous"</span> <span class="ot">=</span> <span class="st">"#0F3460"</span>)) <span class="sc">+</span></span>
<span id="cb57-1692"><a href="#cb57-1692" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>metric, <span class="at">scales =</span> <span class="st">"free"</span>, <span class="at">nrow =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb57-1693"><a href="#cb57-1693" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-1694"><a href="#cb57-1694" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Executive Dashboard - Key Performance Indicators"</span>,</span>
<span id="cb57-1695"><a href="#cb57-1695" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Current performance vs targets and historical comparison"</span>,</span>
<span id="cb57-1696"><a href="#cb57-1696" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb57-1697"><a href="#cb57-1697" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Value"</span>,</span>
<span id="cb57-1698"><a href="#cb57-1698" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Period"</span></span>
<span id="cb57-1699"><a href="#cb57-1699" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1700"><a href="#cb57-1700" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb57-1701"><a href="#cb57-1701" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb57-1702"><a href="#cb57-1702" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb57-1703"><a href="#cb57-1703" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fu">rel</span>(<span class="fl">1.1</span>), <span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb57-1704"><a href="#cb57-1704" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1705"><a href="#cb57-1705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1706"><a href="#cb57-1706" aria-hidden="true" tabindex="-1"></a><span class="co"># Gauge chart simulation</span></span>
<span id="cb57-1707"><a href="#cb57-1707" aria-hidden="true" tabindex="-1"></a>gauge_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-1708"><a href="#cb57-1708" aria-hidden="true" tabindex="-1"></a>  <span class="at">metric =</span> <span class="st">"Performance Score"</span>,</span>
<span id="cb57-1709"><a href="#cb57-1709" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="dv">75</span>,</span>
<span id="cb57-1710"><a href="#cb57-1710" aria-hidden="true" tabindex="-1"></a>  <span class="at">min_val =</span> <span class="dv">0</span>,</span>
<span id="cb57-1711"><a href="#cb57-1711" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_val =</span> <span class="dv">100</span></span>
<span id="cb57-1712"><a href="#cb57-1712" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb57-1713"><a href="#cb57-1713" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-1714"><a href="#cb57-1714" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create gauge segments</span></span>
<span id="cb57-1715"><a href="#cb57-1715" aria-hidden="true" tabindex="-1"></a>    <span class="at">angle_start =</span> pi,</span>
<span id="cb57-1716"><a href="#cb57-1716" aria-hidden="true" tabindex="-1"></a>    <span class="at">angle_end =</span> <span class="dv">0</span>,</span>
<span id="cb57-1717"><a href="#cb57-1717" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_angle =</span> angle_start <span class="sc">+</span> (value <span class="sc">/</span> max_val) <span class="sc">*</span> (angle_end <span class="sc">-</span> angle_start)</span>
<span id="cb57-1718"><a href="#cb57-1718" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1719"><a href="#cb57-1719" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1720"><a href="#cb57-1720" aria-hidden="true" tabindex="-1"></a><span class="co"># Create tick marks separately</span></span>
<span id="cb57-1721"><a href="#cb57-1721" aria-hidden="true" tabindex="-1"></a>gauge_ticks <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-1722"><a href="#cb57-1722" aria-hidden="true" tabindex="-1"></a>  <span class="at">tick_angles =</span> <span class="fu">seq</span>(pi, <span class="dv">0</span>, <span class="at">length.out =</span> <span class="dv">11</span>),</span>
<span id="cb57-1723"><a href="#cb57-1723" aria-hidden="true" tabindex="-1"></a>  <span class="at">tick_values =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dv">10</span>)</span>
<span id="cb57-1724"><a href="#cb57-1724" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb57-1725"><a href="#cb57-1725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1726"><a href="#cb57-1726" aria-hidden="true" tabindex="-1"></a>gauge_segments <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb57-1727"><a href="#cb57-1727" aria-hidden="true" tabindex="-1"></a>  <span class="at">start_angle =</span> <span class="fu">seq</span>(pi, <span class="dv">0</span>, <span class="at">length.out =</span> <span class="dv">101</span>)[<span class="sc">-</span><span class="dv">101</span>],</span>
<span id="cb57-1728"><a href="#cb57-1728" aria-hidden="true" tabindex="-1"></a>  <span class="at">end_angle =</span> <span class="fu">seq</span>(pi, <span class="dv">0</span>, <span class="at">length.out =</span> <span class="dv">101</span>)[<span class="sc">-</span><span class="dv">1</span>],</span>
<span id="cb57-1729"><a href="#cb57-1729" aria-hidden="true" tabindex="-1"></a>  <span class="at">segment_value =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">99</span></span>
<span id="cb57-1730"><a href="#cb57-1730" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb57-1731"><a href="#cb57-1731" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-1732"><a href="#cb57-1732" aria-hidden="true" tabindex="-1"></a>    <span class="at">color_zone =</span> <span class="fu">case_when</span>(</span>
<span id="cb57-1733"><a href="#cb57-1733" aria-hidden="true" tabindex="-1"></a>      segment_value <span class="sc">&lt;</span> <span class="dv">30</span> <span class="sc">~</span> <span class="st">"Low"</span>,</span>
<span id="cb57-1734"><a href="#cb57-1734" aria-hidden="true" tabindex="-1"></a>      segment_value <span class="sc">&lt;</span> <span class="dv">70</span> <span class="sc">~</span> <span class="st">"Medium"</span>,</span>
<span id="cb57-1735"><a href="#cb57-1735" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"High"</span></span>
<span id="cb57-1736"><a href="#cb57-1736" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb57-1737"><a href="#cb57-1737" aria-hidden="true" tabindex="-1"></a>    <span class="at">x1 =</span> <span class="fl">0.8</span> <span class="sc">*</span> <span class="fu">cos</span>(start_angle),</span>
<span id="cb57-1738"><a href="#cb57-1738" aria-hidden="true" tabindex="-1"></a>    <span class="at">y1 =</span> <span class="fl">0.8</span> <span class="sc">*</span> <span class="fu">sin</span>(start_angle),</span>
<span id="cb57-1739"><a href="#cb57-1739" aria-hidden="true" tabindex="-1"></a>    <span class="at">x2 =</span> <span class="fu">cos</span>(start_angle),</span>
<span id="cb57-1740"><a href="#cb57-1740" aria-hidden="true" tabindex="-1"></a>    <span class="at">y2 =</span> <span class="fu">sin</span>(start_angle)</span>
<span id="cb57-1741"><a href="#cb57-1741" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-1742"><a href="#cb57-1742" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1743"><a href="#cb57-1743" aria-hidden="true" tabindex="-1"></a>p52 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb57-1744"><a href="#cb57-1744" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">data =</span> gauge_segments, </span>
<span id="cb57-1745"><a href="#cb57-1745" aria-hidden="true" tabindex="-1"></a>               <span class="fu">aes</span>(<span class="at">x =</span> x1, <span class="at">y =</span> y1, <span class="at">xend =</span> x2, <span class="at">yend =</span> y2, <span class="at">color =</span> color_zone),</span>
<span id="cb57-1746"><a href="#cb57-1746" aria-hidden="true" tabindex="-1"></a>               <span class="at">size =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-1747"><a href="#cb57-1747" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> <span class="dv">0</span>, </span>
<span id="cb57-1748"><a href="#cb57-1748" aria-hidden="true" tabindex="-1"></a>               <span class="at">xend =</span> <span class="fl">0.7</span> <span class="sc">*</span> <span class="fu">cos</span>(gauge_data<span class="sc">$</span>value_angle), </span>
<span id="cb57-1749"><a href="#cb57-1749" aria-hidden="true" tabindex="-1"></a>               <span class="at">yend =</span> <span class="fl">0.7</span> <span class="sc">*</span> <span class="fu">sin</span>(gauge_data<span class="sc">$</span>value_angle),</span>
<span id="cb57-1750"><a href="#cb57-1750" aria-hidden="true" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">"#2C3E50"</span>, <span class="at">size =</span> <span class="dv">3</span>, </span>
<span id="cb57-1751"><a href="#cb57-1751" aria-hidden="true" tabindex="-1"></a>               <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">0.3</span>, <span class="st">"cm"</span>))) <span class="sc">+</span></span>
<span id="cb57-1752"><a href="#cb57-1752" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>) <span class="sc">+</span></span>
<span id="cb57-1753"><a href="#cb57-1753" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Low"</span> <span class="ot">=</span> <span class="st">"#6A0572"</span>, <span class="st">"Medium"</span> <span class="ot">=</span> <span class="st">"#533A71"</span>, <span class="st">"High"</span> <span class="ot">=</span> <span class="st">"#1A1A2E"</span>)) <span class="sc">+</span></span>
<span id="cb57-1754"><a href="#cb57-1754" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.3</span>, <span class="at">label =</span> <span class="fu">paste</span>(gauge_data<span class="sc">$</span>value, <span class="st">"%"</span>), </span>
<span id="cb57-1755"><a href="#cb57-1755" aria-hidden="true" tabindex="-1"></a>           <span class="at">size =</span> <span class="dv">8</span>, <span class="at">family =</span> <span class="cf">if</span> (.Platform<span class="sc">$</span>OS.type <span class="sc">==</span> <span class="st">"windows"</span>) <span class="st">"Times New Roman"</span> <span class="cf">else</span> <span class="st">"playfair"</span>, </span>
<span id="cb57-1756"><a href="#cb57-1756" aria-hidden="true" tabindex="-1"></a>           <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">color =</span> <span class="st">"#2C3E50"</span>) <span class="sc">+</span></span>
<span id="cb57-1757"><a href="#cb57-1757" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb57-1758"><a href="#cb57-1758" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Performance Gauge Visualization"</span>,</span>
<span id="cb57-1759"><a href="#cb57-1759" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Real-time metric monitoring"</span>,</span>
<span id="cb57-1760"><a href="#cb57-1760" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Performance Zone"</span></span>
<span id="cb57-1761"><a href="#cb57-1761" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-1762"><a href="#cb57-1762" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span></span>
<span id="cb57-1763"><a href="#cb57-1763" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="sc">-</span><span class="fl">1.2</span>, <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb57-1764"><a href="#cb57-1764" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="sc">-</span><span class="fl">0.5</span>, <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb57-1765"><a href="#cb57-1765" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb57-1766"><a href="#cb57-1766" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1767"><a href="#cb57-1767" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p51)</span>
<span id="cb57-1768"><a href="#cb57-1768" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(p52)</span>
<span id="cb57-1769"><a href="#cb57-1769" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb57-1770"><a href="#cb57-1770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1771"><a href="#cb57-1771" aria-hidden="true" tabindex="-1"></a><span class="fu">## Conclusion: Best Practices for Beautiful ggplot2 Visualizations</span></span>
<span id="cb57-1772"><a href="#cb57-1772" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1773"><a href="#cb57-1773" aria-hidden="true" tabindex="-1"></a><span class="fu">### Key Takeaways:</span></span>
<span id="cb57-1774"><a href="#cb57-1774" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1775"><a href="#cb57-1775" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Custom Themes**: Creating a consistent, branded look across all your visualizations</span>
<span id="cb57-1776"><a href="#cb57-1776" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Color Psychology**: Using colors that enhance readability and convey the right message</span>
<span id="cb57-1777"><a href="#cb57-1777" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Typography**: Selecting appropriate fonts that match your visualization's purpose</span>
<span id="cb57-1778"><a href="#cb57-1778" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>**White Space**: Embracing clean, uncluttered designs with strategic use of white space</span>
<span id="cb57-1779"><a href="#cb57-1779" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>**Annotations**: Adding context and highlighting key insights directly on the plot</span>
<span id="cb57-1780"><a href="#cb57-1780" aria-hidden="true" tabindex="-1"></a><span class="ss">6. </span>**Layering**: Combining multiple geoms to create rich, informative visualizations</span>
<span id="cb57-1781"><a href="#cb57-1781" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1782"><a href="#cb57-1782" aria-hidden="true" tabindex="-1"></a><span class="fu">### Advanced Tips:</span></span>
<span id="cb57-1783"><a href="#cb57-1783" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1784"><a href="#cb57-1784" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Use <span class="in">`scales`</span> package for professional formatting of axes</span>
<span id="cb57-1785"><a href="#cb57-1785" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Leverage <span class="in">`viridis`</span> and <span class="in">`RColorBrewer`</span> for scientifically-backed color palettes</span>
<span id="cb57-1786"><a href="#cb57-1786" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Apply <span class="in">`patchwork`</span> for combining multiple plots elegantly</span>
<span id="cb57-1787"><a href="#cb57-1787" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Implement consistent spacing and alignment across plot elements</span>
<span id="cb57-1788"><a href="#cb57-1788" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Consider your audience and the story you want to tell</span>
<span id="cb57-1789"><a href="#cb57-1789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1790"><a href="#cb57-1790" aria-hidden="true" tabindex="-1"></a>This comprehensive guide covers the essential plot types in ggplot2, each enhanced with our custom theme that prioritizes clean aesthetics, readability, and visual appeal. The combination of thoughtful color choices, beautiful typography, and strategic use of white space creates visualizations that not only inform but also inspire.</span>
<span id="cb57-1791"><a href="#cb57-1791" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-1792"><a href="#cb57-1792" aria-hidden="true" tabindex="-1"></a>Remember: Great data visualization is not just about the data—it's about creating a visual narrative that guides your audience to insights in an elegant and memorable way.</span></code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>